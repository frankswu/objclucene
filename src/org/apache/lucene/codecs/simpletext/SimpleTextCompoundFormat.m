//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./codecs/src/java/org/apache/lucene/codecs/simpletext/SimpleTextCompoundFormat.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/FileNotFoundException.h"
#include "java/io/IOException.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/Throwable.h"
#include "java/lang/UnsupportedOperationException.h"
#include "java/text/DecimalFormat.h"
#include "java/text/DecimalFormatSymbols.h"
#include "java/text/ParseException.h"
#include "java/util/Arrays.h"
#include "java/util/Collection.h"
#include "java/util/Locale.h"
#include "java/util/Set.h"
#include "org/apache/lucene/codecs/CompoundFormat.h"
#include "org/apache/lucene/codecs/simpletext/SimpleTextCompoundFormat.h"
#include "org/apache/lucene/codecs/simpletext/SimpleTextUtil.h"
#include "org/apache/lucene/index/CorruptIndexException.h"
#include "org/apache/lucene/index/IndexFileNames.h"
#include "org/apache/lucene/index/SegmentInfo.h"
#include "org/apache/lucene/store/Directory.h"
#include "org/apache/lucene/store/IOContext.h"
#include "org/apache/lucene/store/IndexInput.h"
#include "org/apache/lucene/store/IndexOutput.h"
#include "org/apache/lucene/store/Lock.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/BytesRefBuilder.h"
#include "org/apache/lucene/util/StringHelper.h"
#include "org/lukhnos/portmobile/charset/StandardCharsets.h"

@interface OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat ()

- (NSString *)stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder:(OrgApacheLuceneUtilBytesRefBuilder *)scratch
                                withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)prefix;

@end

__attribute__((unused)) static NSString *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat *self, OrgApacheLuceneUtilBytesRefBuilder *scratch, OrgApacheLuceneUtilBytesRef *prefix);

@interface OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 : OrgApacheLuceneStoreDirectory {
 @public
  IOSObjectArray *val$fileNames_;
  IOSLongArray *val$endOffsets_;
  IOSLongArray *val$startOffsets_;
  OrgApacheLuceneStoreIndexInput *val$in_;
}

- (jint)getIndexWithNSString:(NSString *)name;

- (IOSObjectArray *)listAll;

- (jlong)fileLengthWithNSString:(NSString *)name;

- (OrgApacheLuceneStoreIndexInput *)openInputWithNSString:(NSString *)name
                        withOrgApacheLuceneStoreIOContext:(OrgApacheLuceneStoreIOContext *)context;

- (void)close;

- (OrgApacheLuceneStoreIndexOutput *)createOutputWithNSString:(NSString *)name
                            withOrgApacheLuceneStoreIOContext:(OrgApacheLuceneStoreIOContext *)context;

- (void)syncWithJavaUtilCollection:(id<JavaUtilCollection>)names;

- (void)deleteFileWithNSString:(NSString *)name;

- (void)renameFileWithNSString:(NSString *)source
                  withNSString:(NSString *)dest;

- (OrgApacheLuceneStoreLock *)obtainLockWithNSString:(NSString *)name;

- (instancetype)initWithNSStringArray:(IOSObjectArray *)capture$0
                        withLongArray:(IOSLongArray *)capture$1
                        withLongArray:(IOSLongArray *)capture$2
   withOrgApacheLuceneStoreIndexInput:(OrgApacheLuceneStoreIndexInput *)capture$3;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1, val$fileNames_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1, val$endOffsets_, IOSLongArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1, val$startOffsets_, IOSLongArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1, val$in_, OrgApacheLuceneStoreIndexInput *)

__attribute__((unused)) static jint OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_getIndexWithNSString_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 *self, NSString *name);

__attribute__((unused)) static void OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_initWithNSStringArray_withLongArray_withLongArray_withOrgApacheLuceneStoreIndexInput_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 *self, IOSObjectArray *capture$0, IOSLongArray *capture$1, IOSLongArray *capture$2, OrgApacheLuceneStoreIndexInput *capture$3);

__attribute__((unused)) static OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 *new_OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_initWithNSStringArray_withLongArray_withLongArray_withOrgApacheLuceneStoreIndexInput_(IOSObjectArray *capture$0, IOSLongArray *capture$1, IOSLongArray *capture$2, OrgApacheLuceneStoreIndexInput *capture$3) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1)

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat)

NSString *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_DATA_EXTENSION_ = @"scf";
OrgApacheLuceneUtilBytesRef *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_HEADER_;
OrgApacheLuceneUtilBytesRef *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLE_;
OrgApacheLuceneUtilBytesRef *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLENAME_;
OrgApacheLuceneUtilBytesRef *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLESTART_;
OrgApacheLuceneUtilBytesRef *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEEND_;
OrgApacheLuceneUtilBytesRef *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEPOS_;
NSString *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_OFFSETPATTERN_;

@implementation OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat

- (instancetype)init {
  OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_init(self);
  return self;
}

- (OrgApacheLuceneStoreDirectory *)getCompoundReaderWithOrgApacheLuceneStoreDirectory:(OrgApacheLuceneStoreDirectory *)dir
                                                  withOrgApacheLuceneIndexSegmentInfo:(OrgApacheLuceneIndexSegmentInfo *)si
                                                    withOrgApacheLuceneStoreIOContext:(OrgApacheLuceneStoreIOContext *)context {
  NSString *dataFile = OrgApacheLuceneIndexIndexFileNames_segmentFileNameWithNSString_withNSString_withNSString_(((OrgApacheLuceneIndexSegmentInfo *) nil_chk(si))->name_, @"", OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_DATA_EXTENSION_);
  OrgApacheLuceneStoreIndexInput *in = [((OrgApacheLuceneStoreDirectory *) nil_chk(dir)) openInputWithNSString:dataFile withOrgApacheLuceneStoreIOContext:context];
  OrgApacheLuceneUtilBytesRefBuilder *scratch = [new_OrgApacheLuceneUtilBytesRefBuilder_init() autorelease];
  JavaTextDecimalFormat *df = [new_JavaTextDecimalFormat_initWithNSString_withJavaTextDecimalFormatSymbols_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_OFFSETPATTERN_, JavaTextDecimalFormatSymbols_getInstanceWithJavaUtilLocale_(JreLoadStatic(JavaUtilLocale, ROOT_))) autorelease];
  jlong pos = [((OrgApacheLuceneStoreIndexInput *) nil_chk(in)) length] - ((OrgApacheLuceneUtilBytesRef *) nil_chk(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEPOS_))->length_ - ((jint) [((NSString *) nil_chk(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_OFFSETPATTERN_)) length]) - 1;
  [in seekWithLong:pos];
  OrgApacheLuceneCodecsSimpletextSimpleTextUtil_readLineWithOrgApacheLuceneStoreDataInput_withOrgApacheLuceneUtilBytesRefBuilder_(in, scratch);
  JreAssert((OrgApacheLuceneUtilStringHelper_startsWithWithOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneUtilBytesRef_([scratch get], OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEPOS_)), (@"org/apache/lucene/codecs/simpletext/SimpleTextCompoundFormat.java:67 condition failed: assert StringHelper.startsWith(scratch.get(), TABLEPOS);"));
  jlong tablePos = -1;
  @try {
    tablePos = [((NSNumber *) nil_chk([df parseWithNSString:OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder_withOrgApacheLuceneUtilBytesRef_(self, scratch, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEPOS_)])) longLongValue];
  }
  @catch (JavaTextParseException *e) {
    @throw [new_OrgApacheLuceneIndexCorruptIndexException_initWithNSString_withOrgApacheLuceneStoreDataInput_(JreStrcat("$$", @"can't parse CFS trailer, got: ", [((OrgApacheLuceneUtilBytesRef *) nil_chk([scratch get])) utf8ToString]), in) autorelease];
  }
  [in seekWithLong:tablePos];
  OrgApacheLuceneCodecsSimpletextSimpleTextUtil_readLineWithOrgApacheLuceneStoreDataInput_withOrgApacheLuceneUtilBytesRefBuilder_(in, scratch);
  JreAssert((OrgApacheLuceneUtilStringHelper_startsWithWithOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneUtilBytesRef_([scratch get], OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLE_)), (@"org/apache/lucene/codecs/simpletext/SimpleTextCompoundFormat.java:78 condition failed: assert StringHelper.startsWith(scratch.get(), TABLE);"));
  jint numEntries = JavaLangInteger_parseIntWithNSString_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder_withOrgApacheLuceneUtilBytesRef_(self, scratch, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLE_));
  IOSObjectArray *fileNames = [IOSObjectArray arrayWithLength:numEntries type:NSString_class_()];
  IOSLongArray *startOffsets = [IOSLongArray arrayWithLength:numEntries];
  IOSLongArray *endOffsets = [IOSLongArray arrayWithLength:numEntries];
  for (jint i = 0; i < numEntries; i++) {
    OrgApacheLuceneCodecsSimpletextSimpleTextUtil_readLineWithOrgApacheLuceneStoreDataInput_withOrgApacheLuceneUtilBytesRefBuilder_(in, scratch);
    JreAssert((OrgApacheLuceneUtilStringHelper_startsWithWithOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneUtilBytesRef_([scratch get], OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLENAME_)), (@"org/apache/lucene/codecs/simpletext/SimpleTextCompoundFormat.java:87 condition failed: assert StringHelper.startsWith(scratch.get(), TABLENAME);"));
    IOSObjectArray_Set(fileNames, i, JreStrcat("$$", si->name_, OrgApacheLuceneIndexIndexFileNames_stripSegmentNameWithNSString_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder_withOrgApacheLuceneUtilBytesRef_(self, scratch, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLENAME_))));
    if (i > 0) {
      JreAssert(([((NSString *) nil_chk(IOSObjectArray_Get(fileNames, i))) compareToWithId:IOSObjectArray_Get(fileNames, i - 1)] > 0), (@"org/apache/lucene/codecs/simpletext/SimpleTextCompoundFormat.java:92 condition failed: assert fileNames[i].compareTo(fileNames[i-1]) > 0;"));
    }
    OrgApacheLuceneCodecsSimpletextSimpleTextUtil_readLineWithOrgApacheLuceneStoreDataInput_withOrgApacheLuceneUtilBytesRefBuilder_(in, scratch);
    JreAssert((OrgApacheLuceneUtilStringHelper_startsWithWithOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneUtilBytesRef_([scratch get], OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLESTART_)), (@"org/apache/lucene/codecs/simpletext/SimpleTextCompoundFormat.java:96 condition failed: assert StringHelper.startsWith(scratch.get(), TABLESTART);"));
    *IOSLongArray_GetRef(startOffsets, i) = JavaLangLong_parseLongWithNSString_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder_withOrgApacheLuceneUtilBytesRef_(self, scratch, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLESTART_));
    OrgApacheLuceneCodecsSimpletextSimpleTextUtil_readLineWithOrgApacheLuceneStoreDataInput_withOrgApacheLuceneUtilBytesRefBuilder_(in, scratch);
    JreAssert((OrgApacheLuceneUtilStringHelper_startsWithWithOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneUtilBytesRef_([scratch get], OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEEND_)), (@"org/apache/lucene/codecs/simpletext/SimpleTextCompoundFormat.java:100 condition failed: assert StringHelper.startsWith(scratch.get(), TABLEEND);"));
    *IOSLongArray_GetRef(endOffsets, i) = JavaLangLong_parseLongWithNSString_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder_withOrgApacheLuceneUtilBytesRef_(self, scratch, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEEND_));
  }
  return [new_OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_initWithNSStringArray_withLongArray_withLongArray_withOrgApacheLuceneStoreIndexInput_(fileNames, endOffsets, startOffsets, in) autorelease];
}

- (void)writeWithOrgApacheLuceneStoreDirectory:(OrgApacheLuceneStoreDirectory *)dir
           withOrgApacheLuceneIndexSegmentInfo:(OrgApacheLuceneIndexSegmentInfo *)si
             withOrgApacheLuceneStoreIOContext:(OrgApacheLuceneStoreIOContext *)context {
  NSString *dataFile = OrgApacheLuceneIndexIndexFileNames_segmentFileNameWithNSString_withNSString_withNSString_(((OrgApacheLuceneIndexSegmentInfo *) nil_chk(si))->name_, @"", OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_DATA_EXTENSION_);
  jint numFiles = [((id<JavaUtilSet>) nil_chk([si files])) size];
  IOSObjectArray *names = [((id<JavaUtilSet>) nil_chk([si files])) toArrayWithNSObjectArray:[IOSObjectArray arrayWithLength:numFiles type:NSString_class_()]];
  JavaUtilArrays_sortWithNSObjectArray_(names);
  IOSLongArray *startOffsets = [IOSLongArray arrayWithLength:numFiles];
  IOSLongArray *endOffsets = [IOSLongArray arrayWithLength:numFiles];
  OrgApacheLuceneUtilBytesRefBuilder *scratch = [new_OrgApacheLuceneUtilBytesRefBuilder_init() autorelease];
  {
    JavaLangThrowable *__mainException = nil;
    OrgApacheLuceneStoreIndexOutput *out = [((OrgApacheLuceneStoreDirectory *) nil_chk(dir)) createOutputWithNSString:dataFile withOrgApacheLuceneStoreIOContext:context];
    @try {
      for (jint i = 0; i < ((IOSObjectArray *) nil_chk(names))->size_; i++) {
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withOrgApacheLuceneUtilBytesRef_(out, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_HEADER_);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withNSString_withOrgApacheLuceneUtilBytesRefBuilder_(out, IOSObjectArray_Get(names, i), scratch);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeNewlineWithOrgApacheLuceneStoreDataOutput_(out);
        *IOSLongArray_GetRef(startOffsets, i) = [((OrgApacheLuceneStoreIndexOutput *) nil_chk(out)) getFilePointer];
        {
          JavaLangThrowable *__mainException = nil;
          OrgApacheLuceneStoreIndexInput *in = [dir openInputWithNSString:IOSObjectArray_Get(names, i) withOrgApacheLuceneStoreIOContext:JreLoadStatic(OrgApacheLuceneStoreIOContext, READONCE_)];
          @try {
            [out copyBytesWithOrgApacheLuceneStoreDataInput:in withLong:[((OrgApacheLuceneStoreIndexInput *) nil_chk(in)) length]];
          }
          @finally {
            @try {
              [in close];
            }
            @catch (JavaLangThrowable *e) {
              if (__mainException) {
                [__mainException addSuppressedWithJavaLangThrowable:e];
              } else {
                __mainException = e;
              }
            }
            if (__mainException) {
              @throw __mainException;
            }
          }
        }
        *IOSLongArray_GetRef(endOffsets, i) = [out getFilePointer];
      }
      jlong tocPos = [((OrgApacheLuceneStoreIndexOutput *) nil_chk(out)) getFilePointer];
      OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withOrgApacheLuceneUtilBytesRef_(out, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLE_);
      OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withNSString_withOrgApacheLuceneUtilBytesRefBuilder_(out, JavaLangInteger_toStringWithInt_(numFiles), scratch);
      OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeNewlineWithOrgApacheLuceneStoreDataOutput_(out);
      for (jint i = 0; i < names->size_; i++) {
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withOrgApacheLuceneUtilBytesRef_(out, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLENAME_);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withNSString_withOrgApacheLuceneUtilBytesRefBuilder_(out, IOSObjectArray_Get(names, i), scratch);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeNewlineWithOrgApacheLuceneStoreDataOutput_(out);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withOrgApacheLuceneUtilBytesRef_(out, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLESTART_);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withNSString_withOrgApacheLuceneUtilBytesRefBuilder_(out, JavaLangLong_toStringWithLong_(IOSLongArray_Get(startOffsets, i)), scratch);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeNewlineWithOrgApacheLuceneStoreDataOutput_(out);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withOrgApacheLuceneUtilBytesRef_(out, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEEND_);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withNSString_withOrgApacheLuceneUtilBytesRefBuilder_(out, JavaLangLong_toStringWithLong_(IOSLongArray_Get(endOffsets, i)), scratch);
        OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeNewlineWithOrgApacheLuceneStoreDataOutput_(out);
      }
      JavaTextDecimalFormat *df = [new_JavaTextDecimalFormat_initWithNSString_withJavaTextDecimalFormatSymbols_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_OFFSETPATTERN_, JavaTextDecimalFormatSymbols_getInstanceWithJavaUtilLocale_(JreLoadStatic(JavaUtilLocale, ROOT_))) autorelease];
      OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withOrgApacheLuceneUtilBytesRef_(out, OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEPOS_);
      OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeWithOrgApacheLuceneStoreDataOutput_withNSString_withOrgApacheLuceneUtilBytesRefBuilder_(out, [df formatWithLong:tocPos], scratch);
      OrgApacheLuceneCodecsSimpletextSimpleTextUtil_writeNewlineWithOrgApacheLuceneStoreDataOutput_(out);
    }
    @finally {
      @try {
        [out close];
      }
      @catch (JavaLangThrowable *e) {
        if (__mainException) {
          [__mainException addSuppressedWithJavaLangThrowable:e];
        } else {
          __mainException = e;
        }
      }
      if (__mainException) {
        @throw __mainException;
      }
    }
  }
}

- (NSString *)stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder:(OrgApacheLuceneUtilBytesRefBuilder *)scratch
                                withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)prefix {
  return OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder_withOrgApacheLuceneUtilBytesRef_(self, scratch, prefix);
}

+ (void)initialize {
  if (self == [OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat class]) {
    JreStrongAssignAndConsume(&OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_HEADER_, new_OrgApacheLuceneUtilBytesRef_initWithJavaLangCharSequence_(@"cfs entry for: "));
    JreStrongAssignAndConsume(&OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLE_, new_OrgApacheLuceneUtilBytesRef_initWithJavaLangCharSequence_(@"table of contents, size: "));
    JreStrongAssignAndConsume(&OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLENAME_, new_OrgApacheLuceneUtilBytesRef_initWithJavaLangCharSequence_(@"  filename: "));
    JreStrongAssignAndConsume(&OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLESTART_, new_OrgApacheLuceneUtilBytesRef_initWithJavaLangCharSequence_(@"    start: "));
    JreStrongAssignAndConsume(&OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEEND_, new_OrgApacheLuceneUtilBytesRef_initWithJavaLangCharSequence_(@"    end: "));
    JreStrongAssignAndConsume(&OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEPOS_, new_OrgApacheLuceneUtilBytesRef_initWithJavaLangCharSequence_(@"table of contents begins at offset: "));
    {
      jint numDigits = ((jint) [((NSString *) nil_chk(JavaLangLong_toStringWithLong_(JavaLangLong_MAX_VALUE))) length]);
      IOSCharArray *pattern = [IOSCharArray arrayWithLength:numDigits];
      JavaUtilArrays_fillWithCharArray_withChar_(pattern, '0');
      JreStrongAssign(&OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_OFFSETPATTERN_, [NSString stringWithCharacters:pattern]);
    }
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "SimpleTextCompoundFormat", NULL, 0x1, NULL, NULL },
    { "getCompoundReaderWithOrgApacheLuceneStoreDirectory:withOrgApacheLuceneIndexSegmentInfo:withOrgApacheLuceneStoreIOContext:", "getCompoundReader", "Lorg.apache.lucene.store.Directory;", 0x1, "Ljava.io.IOException;", NULL },
    { "writeWithOrgApacheLuceneStoreDirectory:withOrgApacheLuceneIndexSegmentInfo:withOrgApacheLuceneStoreIOContext:", "write", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder:withOrgApacheLuceneUtilBytesRef:", "stripPrefix", "Ljava.lang.String;", 0x2, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "DATA_EXTENSION_", NULL, 0x18, "Ljava.lang.String;", &OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_DATA_EXTENSION_, NULL, .constantValue.asLong = 0 },
    { "HEADER_", NULL, 0x18, "Lorg.apache.lucene.util.BytesRef;", &OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_HEADER_, NULL, .constantValue.asLong = 0 },
    { "TABLE_", NULL, 0x18, "Lorg.apache.lucene.util.BytesRef;", &OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLE_, NULL, .constantValue.asLong = 0 },
    { "TABLENAME_", NULL, 0x18, "Lorg.apache.lucene.util.BytesRef;", &OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLENAME_, NULL, .constantValue.asLong = 0 },
    { "TABLESTART_", NULL, 0x18, "Lorg.apache.lucene.util.BytesRef;", &OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLESTART_, NULL, .constantValue.asLong = 0 },
    { "TABLEEND_", NULL, 0x18, "Lorg.apache.lucene.util.BytesRef;", &OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEEND_, NULL, .constantValue.asLong = 0 },
    { "TABLEPOS_", NULL, 0x18, "Lorg.apache.lucene.util.BytesRef;", &OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_TABLEPOS_, NULL, .constantValue.asLong = 0 },
    { "OFFSETPATTERN_", NULL, 0x18, "Ljava.lang.String;", &OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_OFFSETPATTERN_, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat = { 2, "SimpleTextCompoundFormat", "org.apache.lucene.codecs.simpletext", NULL, 0x1, 4, methods, 8, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat;
}

@end

void OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_init(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat *self) {
  OrgApacheLuceneCodecsCompoundFormat_init(self);
}

OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat *new_OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_init() {
  OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat *self = [OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat alloc];
  OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_init(self);
  return self;
}

NSString *OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_stripPrefixWithOrgApacheLuceneUtilBytesRefBuilder_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat *self, OrgApacheLuceneUtilBytesRefBuilder *scratch, OrgApacheLuceneUtilBytesRef *prefix) {
  return [NSString stringWithBytes:[((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(scratch)) bytes] offset:((OrgApacheLuceneUtilBytesRef *) nil_chk(prefix))->length_ length:[scratch length] - prefix->length_ charset:JreLoadStatic(OrgLukhnosPortmobileCharsetStandardCharsets, UTF_8_)];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat)

@implementation OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1

- (jint)getIndexWithNSString:(NSString *)name {
  return OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_getIndexWithNSString_(self, name);
}

- (IOSObjectArray *)listAll {
  [self ensureOpen];
  return [((IOSObjectArray *) nil_chk(val$fileNames_)) clone];
}

- (jlong)fileLengthWithNSString:(NSString *)name {
  [self ensureOpen];
  jint index = OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_getIndexWithNSString_(self, name);
  return IOSLongArray_Get(nil_chk(val$endOffsets_), index) - IOSLongArray_Get(nil_chk(val$startOffsets_), index);
}

- (OrgApacheLuceneStoreIndexInput *)openInputWithNSString:(NSString *)name
                        withOrgApacheLuceneStoreIOContext:(OrgApacheLuceneStoreIOContext *)context {
  [self ensureOpen];
  jint index = OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_getIndexWithNSString_(self, name);
  return [((OrgApacheLuceneStoreIndexInput *) nil_chk(val$in_)) sliceWithNSString:name withLong:IOSLongArray_Get(nil_chk(val$startOffsets_), index) withLong:IOSLongArray_Get(nil_chk(val$endOffsets_), index) - IOSLongArray_Get(val$startOffsets_, index)];
}

- (void)close {
  [((OrgApacheLuceneStoreIndexInput *) nil_chk(val$in_)) close];
}

- (OrgApacheLuceneStoreIndexOutput *)createOutputWithNSString:(NSString *)name
                            withOrgApacheLuceneStoreIOContext:(OrgApacheLuceneStoreIOContext *)context {
  @throw [new_JavaLangUnsupportedOperationException_init() autorelease];
}

- (void)syncWithJavaUtilCollection:(id<JavaUtilCollection>)names {
  @throw [new_JavaLangUnsupportedOperationException_init() autorelease];
}

- (void)deleteFileWithNSString:(NSString *)name {
  @throw [new_JavaLangUnsupportedOperationException_init() autorelease];
}

- (void)renameFileWithNSString:(NSString *)source
                  withNSString:(NSString *)dest {
  @throw [new_JavaLangUnsupportedOperationException_init() autorelease];
}

- (OrgApacheLuceneStoreLock *)obtainLockWithNSString:(NSString *)name {
  @throw [new_JavaLangUnsupportedOperationException_init() autorelease];
}

- (instancetype)initWithNSStringArray:(IOSObjectArray *)capture$0
                        withLongArray:(IOSLongArray *)capture$1
                        withLongArray:(IOSLongArray *)capture$2
   withOrgApacheLuceneStoreIndexInput:(OrgApacheLuceneStoreIndexInput *)capture$3 {
  OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_initWithNSStringArray_withLongArray_withLongArray_withOrgApacheLuceneStoreIndexInput_(self, capture$0, capture$1, capture$2, capture$3);
  return self;
}

- (void)dealloc {
  RELEASE_(val$fileNames_);
  RELEASE_(val$endOffsets_);
  RELEASE_(val$startOffsets_);
  RELEASE_(val$in_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "getIndexWithNSString:", "getIndex", "I", 0x2, "Ljava.io.IOException;", NULL },
    { "listAll", NULL, "[Ljava.lang.String;", 0x1, "Ljava.io.IOException;", NULL },
    { "fileLengthWithNSString:", "fileLength", "J", 0x1, "Ljava.io.IOException;", NULL },
    { "openInputWithNSString:withOrgApacheLuceneStoreIOContext:", "openInput", "Lorg.apache.lucene.store.IndexInput;", 0x1, "Ljava.io.IOException;", NULL },
    { "close", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "createOutputWithNSString:withOrgApacheLuceneStoreIOContext:", "createOutput", "Lorg.apache.lucene.store.IndexOutput;", 0x1, NULL, NULL },
    { "syncWithJavaUtilCollection:", "sync", "V", 0x1, NULL, NULL },
    { "deleteFileWithNSString:", "deleteFile", "V", 0x1, NULL, NULL },
    { "renameFileWithNSString:withNSString:", "renameFile", "V", 0x1, NULL, NULL },
    { "obtainLockWithNSString:", "obtainLock", "Lorg.apache.lucene.store.Lock;", 0x1, NULL, NULL },
    { "initWithNSStringArray:withLongArray:withLongArray:withOrgApacheLuceneStoreIndexInput:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$fileNames_", NULL, 0x1012, "[Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$endOffsets_", NULL, 0x1012, "[J", NULL, NULL, .constantValue.asLong = 0 },
    { "val$startOffsets_", NULL, 0x1012, "[J", NULL, NULL, .constantValue.asLong = 0 },
    { "val$in_", NULL, 0x1012, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat", "getCompoundReaderWithOrgApacheLuceneStoreDirectory:withOrgApacheLuceneIndexSegmentInfo:withOrgApacheLuceneStoreIOContext:" };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 = { 2, "", "org.apache.lucene.codecs.simpletext", "SimpleTextCompoundFormat", 0x8008, 11, methods, 4, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1;
}

@end

jint OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_getIndexWithNSString_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 *self, NSString *name) {
  jint index = JavaUtilArrays_binarySearchWithNSObjectArray_withId_(self->val$fileNames_, name);
  if (index < 0) {
    @throw [new_JavaIoFileNotFoundException_initWithNSString_(JreStrcat("$$$$C", @"No sub-file found (fileName=", name, @" files: ", JavaUtilArrays_toStringWithNSObjectArray_(self->val$fileNames_), ')')) autorelease];
  }
  return index;
}

void OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_initWithNSStringArray_withLongArray_withLongArray_withOrgApacheLuceneStoreIndexInput_(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 *self, IOSObjectArray *capture$0, IOSLongArray *capture$1, IOSLongArray *capture$2, OrgApacheLuceneStoreIndexInput *capture$3) {
  JreStrongAssign(&self->val$fileNames_, capture$0);
  JreStrongAssign(&self->val$endOffsets_, capture$1);
  JreStrongAssign(&self->val$startOffsets_, capture$2);
  JreStrongAssign(&self->val$in_, capture$3);
  OrgApacheLuceneStoreDirectory_init(self);
}

OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 *new_OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_initWithNSStringArray_withLongArray_withLongArray_withOrgApacheLuceneStoreIndexInput_(IOSObjectArray *capture$0, IOSLongArray *capture$1, IOSLongArray *capture$2, OrgApacheLuceneStoreIndexInput *capture$3) {
  OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 *self = [OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1 alloc];
  OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1_initWithNSStringArray_withLongArray_withLongArray_withOrgApacheLuceneStoreIndexInput_(self, capture$0, capture$1, capture$2, capture$3);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsSimpletextSimpleTextCompoundFormat_$1)
