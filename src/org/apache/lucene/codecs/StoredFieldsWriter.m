//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/codecs/StoredFieldsWriter.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/lang/Double.h"
#include "java/lang/Float.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "org/apache/lucene/analysis/Analyzer.h"
#include "org/apache/lucene/analysis/TokenStream.h"
#include "org/apache/lucene/codecs/StoredFieldsReader.h"
#include "org/apache/lucene/codecs/StoredFieldsWriter.h"
#include "org/apache/lucene/document/StoredField.h"
#include "org/apache/lucene/index/FieldInfo.h"
#include "org/apache/lucene/index/FieldInfos.h"
#include "org/apache/lucene/index/IndexableField.h"
#include "org/apache/lucene/index/IndexableFieldType.h"
#include "org/apache/lucene/index/MergeState.h"
#include "org/apache/lucene/index/StoredFieldVisitor.h"
#include "org/apache/lucene/util/Bits.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/lukhnos/portmobile/charset/StandardCharsets.h"

@interface OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor () {
 @public
  OrgApacheLuceneCodecsStoredFieldsWriter *this$0_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor, this$0_, OrgApacheLuceneCodecsStoredFieldsWriter *)

@implementation OrgApacheLuceneCodecsStoredFieldsWriter

- (instancetype)init {
  OrgApacheLuceneCodecsStoredFieldsWriter_init(self);
  return self;
}

- (void)startDocument {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)finishDocument {
}

- (void)writeFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)info
             withOrgApacheLuceneIndexIndexableField:(id<OrgApacheLuceneIndexIndexableField>)field {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)finishWithOrgApacheLuceneIndexFieldInfos:(OrgApacheLuceneIndexFieldInfos *)fis
                                         withInt:(jint)numDocs {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (jint)mergeWithOrgApacheLuceneIndexMergeState:(OrgApacheLuceneIndexMergeState *)mergeState {
  jint docCount = 0;
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(((OrgApacheLuceneIndexMergeState *) nil_chk(mergeState))->storedFieldsReaders_))->size_; i++) {
    OrgApacheLuceneCodecsStoredFieldsReader *storedFieldsReader = IOSObjectArray_Get(mergeState->storedFieldsReaders_, i);
    [((OrgApacheLuceneCodecsStoredFieldsReader *) nil_chk(storedFieldsReader)) checkIntegrity];
    OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor *visitor = [new_OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor_initWithOrgApacheLuceneCodecsStoredFieldsWriter_withOrgApacheLuceneIndexMergeState_withInt_(self, mergeState, i) autorelease];
    jint maxDoc = IOSIntArray_Get(nil_chk(mergeState->maxDocs_), i);
    id<OrgApacheLuceneUtilBits> liveDocs = IOSObjectArray_Get(nil_chk(mergeState->liveDocs_), i);
    for (jint docID = 0; docID < maxDoc; docID++) {
      if (liveDocs != nil && ![liveDocs getWithInt:docID]) {
        continue;
      }
      [self startDocument];
      [storedFieldsReader visitDocumentWithInt:docID withOrgApacheLuceneIndexStoredFieldVisitor:visitor];
      [self finishDocument];
      docCount++;
    }
  }
  [self finishWithOrgApacheLuceneIndexFieldInfos:mergeState->mergeFieldInfos_ withInt:docCount];
  return docCount;
}

- (void)close {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "StoredFieldsWriter", NULL, 0x4, NULL, NULL },
    { "startDocument", NULL, "V", 0x401, "Ljava.io.IOException;", NULL },
    { "finishDocument", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "writeFieldWithOrgApacheLuceneIndexFieldInfo:withOrgApacheLuceneIndexIndexableField:", "writeField", "V", 0x401, "Ljava.io.IOException;", NULL },
    { "finishWithOrgApacheLuceneIndexFieldInfos:withInt:", "finish", "V", 0x401, "Ljava.io.IOException;", NULL },
    { "mergeWithOrgApacheLuceneIndexMergeState:", "merge", "I", 0x1, "Ljava.io.IOException;", NULL },
    { "close", NULL, "V", 0x401, "Ljava.io.IOException;", NULL },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.codecs.StoredFieldsWriter$MergeVisitor;"};
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsStoredFieldsWriter = { 2, "StoredFieldsWriter", "org.apache.lucene.codecs", NULL, 0x401, 7, methods, 0, NULL, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneCodecsStoredFieldsWriter;
}

@end

void OrgApacheLuceneCodecsStoredFieldsWriter_init(OrgApacheLuceneCodecsStoredFieldsWriter *self) {
  NSObject_init(self);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsStoredFieldsWriter)

@implementation OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor

- (instancetype)initWithOrgApacheLuceneCodecsStoredFieldsWriter:(OrgApacheLuceneCodecsStoredFieldsWriter *)outer$
                             withOrgApacheLuceneIndexMergeState:(OrgApacheLuceneIndexMergeState *)mergeState
                                                        withInt:(jint)readerIndex {
  OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor_initWithOrgApacheLuceneCodecsStoredFieldsWriter_withOrgApacheLuceneIndexMergeState_withInt_(self, outer$, mergeState, readerIndex);
  return self;
}

- (void)binaryFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo
                                       withByteArray:(IOSByteArray *)value {
  [self resetWithOrgApacheLuceneIndexFieldInfo:fieldInfo];
  JreStrongAssignAndConsume(&binaryValue_, new_OrgApacheLuceneUtilBytesRef_initWithByteArray_(value));
  [self write];
}

- (void)stringFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo
                                       withByteArray:(IOSByteArray *)value {
  [self resetWithOrgApacheLuceneIndexFieldInfo:fieldInfo];
  JreStrongAssign(&stringValue_, [NSString stringWithBytes:value charset:JreLoadStatic(OrgLukhnosPortmobileCharsetStandardCharsets, UTF_8_)]);
  [self write];
}

- (void)intFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo
                                          withInt:(jint)value {
  [self resetWithOrgApacheLuceneIndexFieldInfo:fieldInfo];
  JreStrongAssign(&numericValue_, JavaLangInteger_valueOfWithInt_(value));
  [self write];
}

- (void)longFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo
                                          withLong:(jlong)value {
  [self resetWithOrgApacheLuceneIndexFieldInfo:fieldInfo];
  JreStrongAssign(&numericValue_, JavaLangLong_valueOfWithLong_(value));
  [self write];
}

- (void)floatFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo
                                          withFloat:(jfloat)value {
  [self resetWithOrgApacheLuceneIndexFieldInfo:fieldInfo];
  JreStrongAssign(&numericValue_, JavaLangFloat_valueOfWithFloat_(value));
  [self write];
}

- (void)doubleFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo
                                          withDouble:(jdouble)value {
  [self resetWithOrgApacheLuceneIndexFieldInfo:fieldInfo];
  JreStrongAssign(&numericValue_, JavaLangDouble_valueOfWithDouble_(value));
  [self write];
}

- (OrgApacheLuceneIndexStoredFieldVisitor_StatusEnum *)needsFieldWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo {
  return JreLoadStatic(OrgApacheLuceneIndexStoredFieldVisitor_StatusEnum, YES);
}

- (NSString *)name {
  return ((OrgApacheLuceneIndexFieldInfo *) nil_chk(currentField_))->name_;
}

- (id<OrgApacheLuceneIndexIndexableFieldType>)fieldType {
  return JreLoadStatic(OrgApacheLuceneDocumentStoredField, TYPE_);
}

- (OrgApacheLuceneUtilBytesRef *)binaryValue {
  return binaryValue_;
}

- (NSString *)stringValue {
  return stringValue_;
}

- (NSNumber *)numericValue {
  return numericValue_;
}

- (jfloat)boost {
  return 1.0f;
}

- (OrgApacheLuceneAnalysisTokenStream *)tokenStreamWithOrgApacheLuceneAnalysisAnalyzer:(OrgApacheLuceneAnalysisAnalyzer *)analyzer
                                                withOrgApacheLuceneAnalysisTokenStream:(OrgApacheLuceneAnalysisTokenStream *)reuse {
  return nil;
}

- (void)resetWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)field {
  if (remapper_ != nil) {
    JreStrongAssign(&currentField_, [remapper_ fieldInfoWithNSString:((OrgApacheLuceneIndexFieldInfo *) nil_chk(field))->name_]);
  }
  else {
    JreStrongAssign(&currentField_, field);
  }
  JreStrongAssign(&binaryValue_, nil);
  JreStrongAssign(&stringValue_, nil);
  JreStrongAssign(&numericValue_, nil);
}

- (void)write {
  [this$0_ writeFieldWithOrgApacheLuceneIndexFieldInfo:currentField_ withOrgApacheLuceneIndexIndexableField:self];
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(binaryValue_);
  RELEASE_(stringValue_);
  RELEASE_(numericValue_);
  RELEASE_(currentField_);
  RELEASE_(remapper_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneCodecsStoredFieldsWriter:withOrgApacheLuceneIndexMergeState:withInt:", "MergeVisitor", NULL, 0x1, NULL, NULL },
    { "binaryFieldWithOrgApacheLuceneIndexFieldInfo:withByteArray:", "binaryField", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "stringFieldWithOrgApacheLuceneIndexFieldInfo:withByteArray:", "stringField", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "intFieldWithOrgApacheLuceneIndexFieldInfo:withInt:", "intField", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "longFieldWithOrgApacheLuceneIndexFieldInfo:withLong:", "longField", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "floatFieldWithOrgApacheLuceneIndexFieldInfo:withFloat:", "floatField", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "doubleFieldWithOrgApacheLuceneIndexFieldInfo:withDouble:", "doubleField", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "needsFieldWithOrgApacheLuceneIndexFieldInfo:", "needsField", "Lorg.apache.lucene.index.StoredFieldVisitor$Status;", 0x1, "Ljava.io.IOException;", NULL },
    { "name", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "fieldType", NULL, "Lorg.apache.lucene.index.IndexableFieldType;", 0x1, NULL, NULL },
    { "binaryValue", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, NULL, NULL },
    { "stringValue", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "numericValue", NULL, "Ljava.lang.Number;", 0x1, NULL, NULL },
    { "boost", NULL, "F", 0x1, NULL, NULL },
    { "tokenStreamWithOrgApacheLuceneAnalysisAnalyzer:withOrgApacheLuceneAnalysisTokenStream:", "tokenStream", "Lorg.apache.lucene.analysis.TokenStream;", 0x1, "Ljava.io.IOException;", NULL },
    { "resetWithOrgApacheLuceneIndexFieldInfo:", "reset", "V", 0x0, NULL, NULL },
    { "write", NULL, "V", 0x0, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.codecs.StoredFieldsWriter;", NULL, NULL, .constantValue.asLong = 0 },
    { "binaryValue_", NULL, 0x0, "Lorg.apache.lucene.util.BytesRef;", NULL, NULL, .constantValue.asLong = 0 },
    { "stringValue_", NULL, 0x0, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "numericValue_", NULL, 0x0, "Ljava.lang.Number;", NULL, NULL, .constantValue.asLong = 0 },
    { "currentField_", NULL, 0x0, "Lorg.apache.lucene.index.FieldInfo;", NULL, NULL, .constantValue.asLong = 0 },
    { "remapper_", NULL, 0x0, "Lorg.apache.lucene.index.FieldInfos;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor = { 2, "MergeVisitor", "org.apache.lucene.codecs", "StoredFieldsWriter", 0x4, 17, methods, 6, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor;
}

@end

void OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor_initWithOrgApacheLuceneCodecsStoredFieldsWriter_withOrgApacheLuceneIndexMergeState_withInt_(OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor *self, OrgApacheLuceneCodecsStoredFieldsWriter *outer$, OrgApacheLuceneIndexMergeState *mergeState, jint readerIndex) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneIndexStoredFieldVisitor_init(self);
  for (OrgApacheLuceneIndexFieldInfo * __strong fi in nil_chk(IOSObjectArray_Get(nil_chk(((OrgApacheLuceneIndexMergeState *) nil_chk(mergeState))->fieldInfos_), readerIndex))) {
    OrgApacheLuceneIndexFieldInfo *other = [((OrgApacheLuceneIndexFieldInfos *) nil_chk(mergeState->mergeFieldInfos_)) fieldInfoWithInt:((OrgApacheLuceneIndexFieldInfo *) nil_chk(fi))->number_];
    if (other == nil || ![((NSString *) nil_chk(other->name_)) isEqual:fi->name_]) {
      JreStrongAssign(&self->remapper_, mergeState->mergeFieldInfos_);
      break;
    }
  }
}

OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor *new_OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor_initWithOrgApacheLuceneCodecsStoredFieldsWriter_withOrgApacheLuceneIndexMergeState_withInt_(OrgApacheLuceneCodecsStoredFieldsWriter *outer$, OrgApacheLuceneIndexMergeState *mergeState, jint readerIndex) {
  OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor *self = [OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor alloc];
  OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor_initWithOrgApacheLuceneCodecsStoredFieldsWriter_withOrgApacheLuceneIndexMergeState_withInt_(self, outer$, mergeState, readerIndex);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsStoredFieldsWriter_MergeVisitor)
