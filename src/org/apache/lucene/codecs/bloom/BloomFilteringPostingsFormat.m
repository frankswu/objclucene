//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./codecs/src/java/org/apache/lucene/codecs/bloom/BloomFilteringPostingsFormat.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/Closeable.h"
#include "java/io/IOException.h"
#include "java/lang/Throwable.h"
#include "java/lang/UnsupportedOperationException.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/Collections.h"
#include "java/util/HashMap.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "org/apache/lucene/codecs/CodecUtil.h"
#include "org/apache/lucene/codecs/FieldsConsumer.h"
#include "org/apache/lucene/codecs/FieldsProducer.h"
#include "org/apache/lucene/codecs/PostingsFormat.h"
#include "org/apache/lucene/codecs/bloom/BloomFilterFactory.h"
#include "org/apache/lucene/codecs/bloom/BloomFilteringPostingsFormat.h"
#include "org/apache/lucene/codecs/bloom/DefaultBloomFilterFactory.h"
#include "org/apache/lucene/codecs/bloom/FuzzySet.h"
#include "org/apache/lucene/index/FieldInfo.h"
#include "org/apache/lucene/index/FieldInfos.h"
#include "org/apache/lucene/index/Fields.h"
#include "org/apache/lucene/index/IndexFileNames.h"
#include "org/apache/lucene/index/PostingsEnum.h"
#include "org/apache/lucene/index/SegmentInfo.h"
#include "org/apache/lucene/index/SegmentReadState.h"
#include "org/apache/lucene/index/SegmentWriteState.h"
#include "org/apache/lucene/index/Terms.h"
#include "org/apache/lucene/index/TermsEnum.h"
#include "org/apache/lucene/search/DocIdSetIterator.h"
#include "org/apache/lucene/store/ChecksumIndexInput.h"
#include "org/apache/lucene/store/Directory.h"
#include "org/apache/lucene/store/IOContext.h"
#include "org/apache/lucene/store/IndexOutput.h"
#include "org/apache/lucene/util/Accountable.h"
#include "org/apache/lucene/util/Accountables.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/IOUtils.h"
#include "org/apache/lucene/util/RamUsageEstimator.h"
#include "org/apache/lucene/util/automaton/CompiledAutomaton.h"

@interface OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat () {
 @public
  OrgApacheLuceneCodecsPostingsFormat *delegatePostingsFormat_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat, delegatePostingsFormat_, OrgApacheLuceneCodecsPostingsFormat *)

@interface OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer () {
 @public
  OrgApacheLuceneCodecsFieldsProducer *delegateFieldsProducer_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer, delegateFieldsProducer_, OrgApacheLuceneCodecsFieldsProducer *)

@interface OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms () {
 @public
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *this$0_;
  OrgApacheLuceneIndexTerms *delegateTerms_;
  OrgApacheLuceneCodecsBloomFuzzySet *filter_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms, this$0_, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms, delegateTerms_, OrgApacheLuceneIndexTerms *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms, filter_, OrgApacheLuceneCodecsBloomFuzzySet *)

@interface OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum () {
 @public
  OrgApacheLuceneIndexTerms *delegateTerms_;
  OrgApacheLuceneIndexTermsEnum *delegateTermsEnum_;
  OrgApacheLuceneCodecsBloomFuzzySet *filter_;
}

- (OrgApacheLuceneIndexTermsEnum *)delegate;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum, delegateTerms_, OrgApacheLuceneIndexTerms *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum, delegateTermsEnum_, OrgApacheLuceneIndexTermsEnum *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum, filter_, OrgApacheLuceneCodecsBloomFuzzySet *)

__attribute__((unused)) static OrgApacheLuceneIndexTermsEnum *OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum *self);

@interface OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer () {
 @public
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *this$0_;
  OrgApacheLuceneCodecsFieldsConsumer *delegateFieldsConsumer_;
  id<JavaUtilMap> bloomFilters_;
  OrgApacheLuceneIndexSegmentWriteState *state_;
  jboolean closed_;
}

- (void)saveAppropriatelySizedBloomFilterWithOrgApacheLuceneStoreIndexOutput:(OrgApacheLuceneStoreIndexOutput *)bloomOutput
                                      withOrgApacheLuceneCodecsBloomFuzzySet:(OrgApacheLuceneCodecsBloomFuzzySet *)bloomFilter
                                           withOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer, this$0_, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer, delegateFieldsConsumer_, OrgApacheLuceneCodecsFieldsConsumer *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer, bloomFilters_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer, state_, OrgApacheLuceneIndexSegmentWriteState *)

__attribute__((unused)) static void OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer_saveAppropriatelySizedBloomFilterWithOrgApacheLuceneStoreIndexOutput_withOrgApacheLuceneCodecsBloomFuzzySet_withOrgApacheLuceneIndexFieldInfo_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer *self, OrgApacheLuceneStoreIndexOutput *bloomOutput, OrgApacheLuceneCodecsBloomFuzzySet *bloomFilter, OrgApacheLuceneIndexFieldInfo *fieldInfo);

NSString *OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_CODEC_NAME_ = @"BloomFilter";
NSString *OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_EXTENSION_ = @"blm";

@implementation OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat

- (instancetype)initWithOrgApacheLuceneCodecsPostingsFormat:(OrgApacheLuceneCodecsPostingsFormat *)delegatePostingsFormat
           withOrgApacheLuceneCodecsBloomBloomFilterFactory:(OrgApacheLuceneCodecsBloomBloomFilterFactory *)bloomFilterFactory {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_initWithOrgApacheLuceneCodecsPostingsFormat_withOrgApacheLuceneCodecsBloomBloomFilterFactory_(self, delegatePostingsFormat, bloomFilterFactory);
  return self;
}

- (instancetype)initWithOrgApacheLuceneCodecsPostingsFormat:(OrgApacheLuceneCodecsPostingsFormat *)delegatePostingsFormat {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_initWithOrgApacheLuceneCodecsPostingsFormat_(self, delegatePostingsFormat);
  return self;
}

- (instancetype)init {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_init(self);
  return self;
}

- (OrgApacheLuceneCodecsFieldsConsumer *)fieldsConsumerWithOrgApacheLuceneIndexSegmentWriteState:(OrgApacheLuceneIndexSegmentWriteState *)state {
  if (delegatePostingsFormat_ == nil) {
    @throw [new_JavaLangUnsupportedOperationException_initWithNSString_(JreStrcat("$$$", @"Error - ", [[self getClass] getName], @" has been constructed without a choice of PostingsFormat")) autorelease];
  }
  OrgApacheLuceneCodecsFieldsConsumer *fieldsConsumer = [((OrgApacheLuceneCodecsPostingsFormat *) nil_chk(delegatePostingsFormat_)) fieldsConsumerWithOrgApacheLuceneIndexSegmentWriteState:state];
  return [new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_withOrgApacheLuceneCodecsFieldsConsumer_withOrgApacheLuceneIndexSegmentWriteState_(self, fieldsConsumer, state) autorelease];
}

- (OrgApacheLuceneCodecsFieldsProducer *)fieldsProducerWithOrgApacheLuceneIndexSegmentReadState:(OrgApacheLuceneIndexSegmentReadState *)state {
  return [new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_initWithOrgApacheLuceneIndexSegmentReadState_(state) autorelease];
}

- (NSString *)description {
  return JreStrcat("$@C", @"BloomFilteringPostingsFormat(", delegatePostingsFormat_, ')');
}

- (void)dealloc {
  RELEASE_(bloomFilterFactory_);
  RELEASE_(delegatePostingsFormat_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneCodecsPostingsFormat:withOrgApacheLuceneCodecsBloomBloomFilterFactory:", "BloomFilteringPostingsFormat", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheLuceneCodecsPostingsFormat:", "BloomFilteringPostingsFormat", NULL, 0x1, NULL, NULL },
    { "init", "BloomFilteringPostingsFormat", NULL, 0x1, NULL, NULL },
    { "fieldsConsumerWithOrgApacheLuceneIndexSegmentWriteState:", "fieldsConsumer", "Lorg.apache.lucene.codecs.FieldsConsumer;", 0x1, "Ljava.io.IOException;", NULL },
    { "fieldsProducerWithOrgApacheLuceneIndexSegmentReadState:", "fieldsProducer", "Lorg.apache.lucene.codecs.FieldsProducer;", 0x1, "Ljava.io.IOException;", NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "BLOOM_CODEC_NAME_", NULL, 0x19, "Ljava.lang.String;", &OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_CODEC_NAME_, NULL, .constantValue.asLong = 0 },
    { "VERSION_START", "VERSION_START", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_VERSION_START },
    { "VERSION_CURRENT", "VERSION_CURRENT", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_VERSION_CURRENT },
    { "BLOOM_EXTENSION_", NULL, 0x18, "Ljava.lang.String;", &OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_EXTENSION_, NULL, .constantValue.asLong = 0 },
    { "bloomFilterFactory_", NULL, 0x0, "Lorg.apache.lucene.codecs.bloom.BloomFilterFactory;", NULL, NULL, .constantValue.asLong = 0 },
    { "delegatePostingsFormat_", NULL, 0x2, "Lorg.apache.lucene.codecs.PostingsFormat;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.codecs.bloom.BloomFilteringPostingsFormat$BloomFilteredFieldsProducer;", "Lorg.apache.lucene.codecs.bloom.BloomFilteringPostingsFormat$BloomFilteredFieldsConsumer;"};
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat = { 2, "BloomFilteringPostingsFormat", "org.apache.lucene.codecs.bloom", NULL, 0x11, 6, methods, 6, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat;
}

@end

void OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_initWithOrgApacheLuceneCodecsPostingsFormat_withOrgApacheLuceneCodecsBloomBloomFilterFactory_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *self, OrgApacheLuceneCodecsPostingsFormat *delegatePostingsFormat, OrgApacheLuceneCodecsBloomBloomFilterFactory *bloomFilterFactory) {
  OrgApacheLuceneCodecsPostingsFormat_initWithNSString_(self, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_CODEC_NAME_);
  JreStrongAssignAndConsume(&self->bloomFilterFactory_, new_OrgApacheLuceneCodecsBloomDefaultBloomFilterFactory_init());
  JreStrongAssign(&self->delegatePostingsFormat_, delegatePostingsFormat);
  JreStrongAssign(&self->bloomFilterFactory_, bloomFilterFactory);
}

OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_initWithOrgApacheLuceneCodecsPostingsFormat_withOrgApacheLuceneCodecsBloomBloomFilterFactory_(OrgApacheLuceneCodecsPostingsFormat *delegatePostingsFormat, OrgApacheLuceneCodecsBloomBloomFilterFactory *bloomFilterFactory) {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *self = [OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat alloc];
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_initWithOrgApacheLuceneCodecsPostingsFormat_withOrgApacheLuceneCodecsBloomBloomFilterFactory_(self, delegatePostingsFormat, bloomFilterFactory);
  return self;
}

void OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_initWithOrgApacheLuceneCodecsPostingsFormat_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *self, OrgApacheLuceneCodecsPostingsFormat *delegatePostingsFormat) {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_initWithOrgApacheLuceneCodecsPostingsFormat_withOrgApacheLuceneCodecsBloomBloomFilterFactory_(self, delegatePostingsFormat, [new_OrgApacheLuceneCodecsBloomDefaultBloomFilterFactory_init() autorelease]);
}

OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_initWithOrgApacheLuceneCodecsPostingsFormat_(OrgApacheLuceneCodecsPostingsFormat *delegatePostingsFormat) {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *self = [OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat alloc];
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_initWithOrgApacheLuceneCodecsPostingsFormat_(self, delegatePostingsFormat);
  return self;
}

void OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_init(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *self) {
  OrgApacheLuceneCodecsPostingsFormat_initWithNSString_(self, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_CODEC_NAME_);
  JreStrongAssignAndConsume(&self->bloomFilterFactory_, new_OrgApacheLuceneCodecsBloomDefaultBloomFilterFactory_init());
}

OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_init() {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *self = [OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat alloc];
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat)

@implementation OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer

- (instancetype)initWithOrgApacheLuceneIndexSegmentReadState:(OrgApacheLuceneIndexSegmentReadState *)state {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_initWithOrgApacheLuceneIndexSegmentReadState_(self, state);
  return self;
}

- (id<JavaUtilIterator>)iterator {
  return [((OrgApacheLuceneCodecsFieldsProducer *) nil_chk(delegateFieldsProducer_)) iterator];
}

- (void)close {
  [((OrgApacheLuceneCodecsFieldsProducer *) nil_chk(delegateFieldsProducer_)) close];
}

- (OrgApacheLuceneIndexTerms *)termsWithNSString:(NSString *)field {
  OrgApacheLuceneCodecsBloomFuzzySet *filter = [((JavaUtilHashMap *) nil_chk(bloomsByFieldName_)) getWithId:field];
  if (filter == nil) {
    return [((OrgApacheLuceneCodecsFieldsProducer *) nil_chk(delegateFieldsProducer_)) termsWithNSString:field];
  }
  else {
    OrgApacheLuceneIndexTerms *result = [((OrgApacheLuceneCodecsFieldsProducer *) nil_chk(delegateFieldsProducer_)) termsWithNSString:field];
    if (result == nil) {
      return nil;
    }
    return [new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(self, result, filter) autorelease];
  }
}

- (jint)size {
  return [((OrgApacheLuceneCodecsFieldsProducer *) nil_chk(delegateFieldsProducer_)) size];
}

- (jlong)ramBytesUsed {
  jlong sizeInBytes = ((delegateFieldsProducer_ != nil) ? [delegateFieldsProducer_ ramBytesUsed] : 0);
  for (id<JavaUtilMap_Entry> __strong entry_ in nil_chk([((JavaUtilHashMap *) nil_chk(bloomsByFieldName_)) entrySet])) {
    sizeInBytes += ((jint) [((NSString *) nil_chk([((id<JavaUtilMap_Entry>) nil_chk(entry_)) getKey])) length]) * OrgApacheLuceneUtilRamUsageEstimator_NUM_BYTES_CHAR;
    sizeInBytes += [((OrgApacheLuceneCodecsBloomFuzzySet *) nil_chk([entry_ getValue])) ramBytesUsed];
  }
  return sizeInBytes;
}

- (id<JavaUtilCollection>)getChildResources {
  id<JavaUtilList> resources = [new_JavaUtilArrayList_init() autorelease];
  [resources addAllWithJavaUtilCollection:OrgApacheLuceneUtilAccountables_namedAccountablesWithNSString_withJavaUtilMap_(@"field", bloomsByFieldName_)];
  if (delegateFieldsProducer_ != nil) {
    [resources addWithId:OrgApacheLuceneUtilAccountables_namedAccountableWithNSString_withOrgApacheLuceneUtilAccountable_(@"delegate", delegateFieldsProducer_)];
  }
  return JavaUtilCollections_unmodifiableListWithJavaUtilList_(resources);
}

- (void)checkIntegrity {
  [((OrgApacheLuceneCodecsFieldsProducer *) nil_chk(delegateFieldsProducer_)) checkIntegrity];
}

- (NSString *)description {
  return JreStrcat("$$I$@C", [[self getClass] getSimpleName], @"(fields=", [((JavaUtilHashMap *) nil_chk(bloomsByFieldName_)) size], @",delegate=", delegateFieldsProducer_, ')');
}

- (void)dealloc {
  RELEASE_(delegateFieldsProducer_);
  RELEASE_(bloomsByFieldName_);
  [super dealloc];
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneIndexSegmentReadState:", "BloomFilteredFieldsProducer", NULL, 0x1, "Ljava.io.IOException;", NULL },
    { "iterator", NULL, "Ljava.util.Iterator;", 0x1, NULL, NULL },
    { "close", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "termsWithNSString:", "terms", "Lorg.apache.lucene.index.Terms;", 0x1, "Ljava.io.IOException;", NULL },
    { "size", NULL, "I", 0x1, NULL, NULL },
    { "ramBytesUsed", NULL, "J", 0x1, NULL, NULL },
    { "getChildResources", NULL, "Ljava.util.Collection;", 0x1, NULL, NULL },
    { "checkIntegrity", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "delegateFieldsProducer_", NULL, 0x2, "Lorg.apache.lucene.codecs.FieldsProducer;", NULL, NULL, .constantValue.asLong = 0 },
    { "bloomsByFieldName_", NULL, 0x0, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/String;Lorg/apache/lucene/codecs/bloom/FuzzySet;>;", .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.codecs.bloom.BloomFilteringPostingsFormat$BloomFilteredFieldsProducer$BloomFilteredTerms;", "Lorg.apache.lucene.codecs.bloom.BloomFilteringPostingsFormat$BloomFilteredFieldsProducer$BloomFilteredTermsEnum;"};
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer = { 2, "BloomFilteredFieldsProducer", "org.apache.lucene.codecs.bloom", "BloomFilteringPostingsFormat", 0x8, 9, methods, 2, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer;
}

@end

void OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *self, OrgApacheLuceneIndexSegmentReadState *state) {
  OrgApacheLuceneCodecsFieldsProducer_init(self);
  JreStrongAssignAndConsume(&self->bloomsByFieldName_, new_JavaUtilHashMap_init());
  NSString *bloomFileName = OrgApacheLuceneIndexIndexFileNames_segmentFileNameWithNSString_withNSString_withNSString_(((OrgApacheLuceneIndexSegmentInfo *) nil_chk(((OrgApacheLuceneIndexSegmentReadState *) nil_chk(state))->segmentInfo_))->name_, state->segmentSuffix_, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_EXTENSION_);
  OrgApacheLuceneStoreChecksumIndexInput *bloomIn = nil;
  jboolean success = NO;
  @try {
    bloomIn = [((OrgApacheLuceneStoreDirectory *) nil_chk(state->directory_)) openChecksumInputWithNSString:bloomFileName withOrgApacheLuceneStoreIOContext:state->context_];
    OrgApacheLuceneCodecsCodecUtil_checkIndexHeaderWithOrgApacheLuceneStoreDataInput_withNSString_withInt_withInt_withByteArray_withNSString_(bloomIn, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_CODEC_NAME_, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_VERSION_START, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_VERSION_CURRENT, [state->segmentInfo_ getId], state->segmentSuffix_);
    OrgApacheLuceneCodecsPostingsFormat *delegatePostingsFormat = OrgApacheLuceneCodecsPostingsFormat_forNameWithNSString_([((OrgApacheLuceneStoreChecksumIndexInput *) nil_chk(bloomIn)) readString]);
    JreStrongAssign(&self->delegateFieldsProducer_, [((OrgApacheLuceneCodecsPostingsFormat *) nil_chk(delegatePostingsFormat)) fieldsProducerWithOrgApacheLuceneIndexSegmentReadState:state]);
    jint numBlooms = [bloomIn readInt];
    for (jint i = 0; i < numBlooms; i++) {
      jint fieldNum = [bloomIn readInt];
      OrgApacheLuceneCodecsBloomFuzzySet *bloom = OrgApacheLuceneCodecsBloomFuzzySet_deserializeWithOrgApacheLuceneStoreDataInput_(bloomIn);
      OrgApacheLuceneIndexFieldInfo *fieldInfo = [((OrgApacheLuceneIndexFieldInfos *) nil_chk(state->fieldInfos_)) fieldInfoWithInt:fieldNum];
      [self->bloomsByFieldName_ putWithId:((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo))->name_ withId:bloom];
    }
    OrgApacheLuceneCodecsCodecUtil_checkFooterWithOrgApacheLuceneStoreChecksumIndexInput_(bloomIn);
    OrgApacheLuceneUtilIOUtils_closeWithJavaIoCloseableArray_([IOSObjectArray arrayWithObjects:(id[]){ bloomIn } count:1 type:JavaIoCloseable_class_()]);
    success = YES;
  }
  @finally {
    if (!success) {
      OrgApacheLuceneUtilIOUtils_closeWhileHandlingExceptionWithJavaIoCloseableArray_([IOSObjectArray arrayWithObjects:(id[]){ bloomIn, self->delegateFieldsProducer_ } count:2 type:JavaIoCloseable_class_()]);
    }
  }
}

OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneIndexSegmentReadState *state) {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *self = [OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer alloc];
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_initWithOrgApacheLuceneIndexSegmentReadState_(self, state);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer)

@implementation OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms

- (instancetype)initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer:(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *)outer$
                                                                             withOrgApacheLuceneIndexTerms:(OrgApacheLuceneIndexTerms *)terms
                                                                    withOrgApacheLuceneCodecsBloomFuzzySet:(OrgApacheLuceneCodecsBloomFuzzySet *)filter {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(self, outer$, terms, filter);
  return self;
}

- (OrgApacheLuceneIndexTermsEnum *)intersectWithOrgApacheLuceneUtilAutomatonCompiledAutomaton:(OrgApacheLuceneUtilAutomatonCompiledAutomaton *)compiled
                                                              withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)startTerm {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) intersectWithOrgApacheLuceneUtilAutomatonCompiledAutomaton:compiled withOrgApacheLuceneUtilBytesRef:startTerm];
}

- (OrgApacheLuceneIndexTermsEnum *)iterator {
  return [new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(this$0_, delegateTerms_, filter_) autorelease];
}

- (jlong)size {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) size];
}

- (jlong)getSumTotalTermFreq {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) getSumTotalTermFreq];
}

- (jlong)getSumDocFreq {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) getSumDocFreq];
}

- (jint)getDocCount {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) getDocCount];
}

- (jboolean)hasFreqs {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) hasFreqs];
}

- (jboolean)hasOffsets {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) hasOffsets];
}

- (jboolean)hasPositions {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) hasPositions];
}

- (jboolean)hasPayloads {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) hasPayloads];
}

- (OrgApacheLuceneUtilBytesRef *)getMin {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) getMin];
}

- (OrgApacheLuceneUtilBytesRef *)getMax {
  return [((OrgApacheLuceneIndexTerms *) nil_chk(delegateTerms_)) getMax];
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(delegateTerms_);
  RELEASE_(filter_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer:withOrgApacheLuceneIndexTerms:withOrgApacheLuceneCodecsBloomFuzzySet:", "BloomFilteredTerms", NULL, 0x1, NULL, NULL },
    { "intersectWithOrgApacheLuceneUtilAutomatonCompiledAutomaton:withOrgApacheLuceneUtilBytesRef:", "intersect", "Lorg.apache.lucene.index.TermsEnum;", 0x1, "Ljava.io.IOException;", NULL },
    { "iterator", NULL, "Lorg.apache.lucene.index.TermsEnum;", 0x1, "Ljava.io.IOException;", NULL },
    { "size", NULL, "J", 0x1, "Ljava.io.IOException;", NULL },
    { "getSumTotalTermFreq", NULL, "J", 0x1, "Ljava.io.IOException;", NULL },
    { "getSumDocFreq", NULL, "J", 0x1, "Ljava.io.IOException;", NULL },
    { "getDocCount", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "hasFreqs", NULL, "Z", 0x1, NULL, NULL },
    { "hasOffsets", NULL, "Z", 0x1, NULL, NULL },
    { "hasPositions", NULL, "Z", 0x1, NULL, NULL },
    { "hasPayloads", NULL, "Z", 0x1, NULL, NULL },
    { "getMin", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, "Ljava.io.IOException;", NULL },
    { "getMax", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.codecs.bloom.BloomFilteringPostingsFormat$BloomFilteredFieldsProducer;", NULL, NULL, .constantValue.asLong = 0 },
    { "delegateTerms_", NULL, 0x2, "Lorg.apache.lucene.index.Terms;", NULL, NULL, .constantValue.asLong = 0 },
    { "filter_", NULL, 0x2, "Lorg.apache.lucene.codecs.bloom.FuzzySet;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms = { 2, "BloomFilteredTerms", "org.apache.lucene.codecs.bloom", "BloomFilteringPostingsFormat$BloomFilteredFieldsProducer", 0x0, 13, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms;
}

@end

void OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms *self, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *outer$, OrgApacheLuceneIndexTerms *terms, OrgApacheLuceneCodecsBloomFuzzySet *filter) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneIndexTerms_init(self);
  JreStrongAssign(&self->delegateTerms_, terms);
  JreStrongAssign(&self->filter_, filter);
}

OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms *new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *outer$, OrgApacheLuceneIndexTerms *terms, OrgApacheLuceneCodecsBloomFuzzySet *filter) {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms *self = [OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms alloc];
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(self, outer$, terms, filter);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTerms)

@implementation OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum

- (instancetype)initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer:(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *)outer$
                                                                             withOrgApacheLuceneIndexTerms:(OrgApacheLuceneIndexTerms *)delegateTerms
                                                                    withOrgApacheLuceneCodecsBloomFuzzySet:(OrgApacheLuceneCodecsBloomFuzzySet *)filter {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(self, outer$, delegateTerms, filter);
  return self;
}

- (void)resetWithOrgApacheLuceneIndexTerms:(OrgApacheLuceneIndexTerms *)delegateTerms {
  JreStrongAssign(&self->delegateTerms_, delegateTerms);
  JreStrongAssign(&self->delegateTermsEnum_, nil);
}

- (OrgApacheLuceneIndexTermsEnum *)delegate {
  return OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self);
}

- (OrgApacheLuceneUtilBytesRef *)next {
  return [((OrgApacheLuceneIndexTermsEnum *) nil_chk(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self))) next];
}

- (jboolean)seekExactWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)text {
  if ([((OrgApacheLuceneCodecsBloomFuzzySet *) nil_chk(filter_)) containsWithOrgApacheLuceneUtilBytesRef:text] == JreLoadStatic(OrgApacheLuceneCodecsBloomFuzzySet_ContainsResultEnum, NO)) {
    return NO;
  }
  return [((OrgApacheLuceneIndexTermsEnum *) nil_chk(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self))) seekExactWithOrgApacheLuceneUtilBytesRef:text];
}

- (OrgApacheLuceneIndexTermsEnum_SeekStatusEnum *)seekCeilWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)text {
  return [((OrgApacheLuceneIndexTermsEnum *) nil_chk(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self))) seekCeilWithOrgApacheLuceneUtilBytesRef:text];
}

- (void)seekExactWithLong:(jlong)ord {
  [((OrgApacheLuceneIndexTermsEnum *) nil_chk(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self))) seekExactWithLong:ord];
}

- (OrgApacheLuceneUtilBytesRef *)term {
  return [((OrgApacheLuceneIndexTermsEnum *) nil_chk(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self))) term];
}

- (jlong)ord {
  return [((OrgApacheLuceneIndexTermsEnum *) nil_chk(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self))) ord];
}

- (jint)docFreq {
  return [((OrgApacheLuceneIndexTermsEnum *) nil_chk(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self))) docFreq];
}

- (jlong)totalTermFreq {
  return [((OrgApacheLuceneIndexTermsEnum *) nil_chk(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self))) totalTermFreq];
}

- (OrgApacheLuceneIndexPostingsEnum *)postingsWithOrgApacheLuceneIndexPostingsEnum:(OrgApacheLuceneIndexPostingsEnum *)reuse
                                                                           withInt:(jint)flags {
  return [((OrgApacheLuceneIndexTermsEnum *) nil_chk(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(self))) postingsWithOrgApacheLuceneIndexPostingsEnum:reuse withInt:flags];
}

- (void)dealloc {
  RELEASE_(delegateTerms_);
  RELEASE_(delegateTermsEnum_);
  RELEASE_(filter_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer:withOrgApacheLuceneIndexTerms:withOrgApacheLuceneCodecsBloomFuzzySet:", "BloomFilteredTermsEnum", NULL, 0x1, NULL, NULL },
    { "resetWithOrgApacheLuceneIndexTerms:", "reset", "V", 0x0, "Ljava.io.IOException;", NULL },
    { "delegate", NULL, "Lorg.apache.lucene.index.TermsEnum;", 0x2, "Ljava.io.IOException;", NULL },
    { "next", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, "Ljava.io.IOException;", NULL },
    { "seekExactWithOrgApacheLuceneUtilBytesRef:", "seekExact", "Z", 0x1, "Ljava.io.IOException;", NULL },
    { "seekCeilWithOrgApacheLuceneUtilBytesRef:", "seekCeil", "Lorg.apache.lucene.index.TermsEnum$SeekStatus;", 0x1, "Ljava.io.IOException;", NULL },
    { "seekExactWithLong:", "seekExact", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "term", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, "Ljava.io.IOException;", NULL },
    { "ord", NULL, "J", 0x1, "Ljava.io.IOException;", NULL },
    { "docFreq", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "totalTermFreq", NULL, "J", 0x1, "Ljava.io.IOException;", NULL },
    { "postingsWithOrgApacheLuceneIndexPostingsEnum:withInt:", "postings", "Lorg.apache.lucene.index.PostingsEnum;", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "delegateTerms_", NULL, 0x2, "Lorg.apache.lucene.index.Terms;", NULL, NULL, .constantValue.asLong = 0 },
    { "delegateTermsEnum_", NULL, 0x2, "Lorg.apache.lucene.index.TermsEnum;", NULL, NULL, .constantValue.asLong = 0 },
    { "filter_", NULL, 0x12, "Lorg.apache.lucene.codecs.bloom.FuzzySet;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum = { 2, "BloomFilteredTermsEnum", "org.apache.lucene.codecs.bloom", "BloomFilteringPostingsFormat$BloomFilteredFieldsProducer", 0x10, 12, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum;
}

@end

void OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum *self, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *outer$, OrgApacheLuceneIndexTerms *delegateTerms, OrgApacheLuceneCodecsBloomFuzzySet *filter) {
  OrgApacheLuceneIndexTermsEnum_init(self);
  JreStrongAssign(&self->delegateTerms_, delegateTerms);
  JreStrongAssign(&self->filter_, filter);
}

OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum *new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer *outer$, OrgApacheLuceneIndexTerms *delegateTerms, OrgApacheLuceneCodecsBloomFuzzySet *filter) {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum *self = [OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum alloc];
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_withOrgApacheLuceneIndexTerms_withOrgApacheLuceneCodecsBloomFuzzySet_(self, outer$, delegateTerms, filter);
  return self;
}

OrgApacheLuceneIndexTermsEnum *OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum_delegate(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum *self) {
  if (self->delegateTermsEnum_ == nil) {
    JreStrongAssign(&self->delegateTermsEnum_, [((OrgApacheLuceneIndexTerms *) nil_chk(self->delegateTerms_)) iterator]);
  }
  return self->delegateTermsEnum_;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsProducer_BloomFilteredTermsEnum)

@implementation OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer

- (instancetype)initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat:(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *)outer$
                                       withOrgApacheLuceneCodecsFieldsConsumer:(OrgApacheLuceneCodecsFieldsConsumer *)fieldsConsumer
                                     withOrgApacheLuceneIndexSegmentWriteState:(OrgApacheLuceneIndexSegmentWriteState *)state {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_withOrgApacheLuceneCodecsFieldsConsumer_withOrgApacheLuceneIndexSegmentWriteState_(self, outer$, fieldsConsumer, state);
  return self;
}

- (void)writeWithOrgApacheLuceneIndexFields:(OrgApacheLuceneIndexFields *)fields {
  [((OrgApacheLuceneCodecsFieldsConsumer *) nil_chk(delegateFieldsConsumer_)) writeWithOrgApacheLuceneIndexFields:fields];
  for (NSString * __strong field in nil_chk(fields)) {
    OrgApacheLuceneIndexTerms *terms = [fields termsWithNSString:field];
    if (terms == nil) {
      continue;
    }
    OrgApacheLuceneIndexFieldInfo *fieldInfo = [((OrgApacheLuceneIndexFieldInfos *) nil_chk(((OrgApacheLuceneIndexSegmentWriteState *) nil_chk(state_))->fieldInfos_)) fieldInfoWithNSString:field];
    OrgApacheLuceneIndexTermsEnum *termsEnum = [((OrgApacheLuceneIndexTerms *) nil_chk(terms)) iterator];
    OrgApacheLuceneCodecsBloomFuzzySet *bloomFilter = nil;
    OrgApacheLuceneIndexPostingsEnum *postingsEnum = nil;
    while (YES) {
      OrgApacheLuceneUtilBytesRef *term = [((OrgApacheLuceneIndexTermsEnum *) nil_chk(termsEnum)) next];
      if (term == nil) {
        break;
      }
      if (bloomFilter == nil) {
        bloomFilter = [((OrgApacheLuceneCodecsBloomBloomFilterFactory *) nil_chk(this$0_->bloomFilterFactory_)) getSetForFieldWithOrgApacheLuceneIndexSegmentWriteState:state_ withOrgApacheLuceneIndexFieldInfo:fieldInfo];
        if (bloomFilter == nil) {
          break;
        }
        JreAssert(([((id<JavaUtilMap>) nil_chk(bloomFilters_)) containsKeyWithId:field] == NO), (@"org/apache/lucene/codecs/bloom/BloomFilteringPostingsFormat.java:454 condition failed: assert bloomFilters.containsKey(field) == false;"));
        [bloomFilters_ putWithId:fieldInfo withId:bloomFilter];
      }
      postingsEnum = [termsEnum postingsWithOrgApacheLuceneIndexPostingsEnum:postingsEnum withInt:0];
      if ([((OrgApacheLuceneIndexPostingsEnum *) nil_chk(postingsEnum)) nextDoc] != OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS) {
        [((OrgApacheLuceneCodecsBloomFuzzySet *) nil_chk(bloomFilter)) addValueWithOrgApacheLuceneUtilBytesRef:term];
      }
    }
  }
}

- (void)close {
  if (closed_) {
    return;
  }
  closed_ = YES;
  [((OrgApacheLuceneCodecsFieldsConsumer *) nil_chk(delegateFieldsConsumer_)) close];
  id<JavaUtilList> nonSaturatedBlooms = [new_JavaUtilArrayList_init() autorelease];
  for (id<JavaUtilMap_Entry> __strong entry_ in nil_chk([((id<JavaUtilMap>) nil_chk(bloomFilters_)) entrySet])) {
    OrgApacheLuceneCodecsBloomFuzzySet *bloomFilter = [((id<JavaUtilMap_Entry>) nil_chk(entry_)) getValue];
    if (![((OrgApacheLuceneCodecsBloomBloomFilterFactory *) nil_chk(this$0_->bloomFilterFactory_)) isSaturatedWithOrgApacheLuceneCodecsBloomFuzzySet:bloomFilter withOrgApacheLuceneIndexFieldInfo:[entry_ getKey]]) {
      [nonSaturatedBlooms addWithId:entry_];
    }
  }
  NSString *bloomFileName = OrgApacheLuceneIndexIndexFileNames_segmentFileNameWithNSString_withNSString_withNSString_(((OrgApacheLuceneIndexSegmentInfo *) nil_chk(((OrgApacheLuceneIndexSegmentWriteState *) nil_chk(state_))->segmentInfo_))->name_, state_->segmentSuffix_, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_EXTENSION_);
  {
    JavaLangThrowable *__mainException = nil;
    OrgApacheLuceneStoreIndexOutput *bloomOutput = [((OrgApacheLuceneStoreDirectory *) nil_chk(state_->directory_)) createOutputWithNSString:bloomFileName withOrgApacheLuceneStoreIOContext:state_->context_];
    @try {
      OrgApacheLuceneCodecsCodecUtil_writeIndexHeaderWithOrgApacheLuceneStoreDataOutput_withNSString_withInt_withByteArray_withNSString_(bloomOutput, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BLOOM_CODEC_NAME_, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_VERSION_CURRENT, [state_->segmentInfo_ getId], state_->segmentSuffix_);
      [((OrgApacheLuceneStoreIndexOutput *) nil_chk(bloomOutput)) writeStringWithNSString:[((OrgApacheLuceneCodecsPostingsFormat *) nil_chk(this$0_->delegatePostingsFormat_)) getName]];
      [bloomOutput writeIntWithInt:[nonSaturatedBlooms size]];
      for (id<JavaUtilMap_Entry> __strong entry_ in nonSaturatedBlooms) {
        OrgApacheLuceneIndexFieldInfo *fieldInfo = [((id<JavaUtilMap_Entry>) nil_chk(entry_)) getKey];
        OrgApacheLuceneCodecsBloomFuzzySet *bloomFilter = [entry_ getValue];
        [bloomOutput writeIntWithInt:((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo))->number_];
        OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer_saveAppropriatelySizedBloomFilterWithOrgApacheLuceneStoreIndexOutput_withOrgApacheLuceneCodecsBloomFuzzySet_withOrgApacheLuceneIndexFieldInfo_(self, bloomOutput, bloomFilter, fieldInfo);
      }
      OrgApacheLuceneCodecsCodecUtil_writeFooterWithOrgApacheLuceneStoreIndexOutput_(bloomOutput);
    }
    @finally {
      @try {
        [bloomOutput close];
      }
      @catch (JavaLangThrowable *e) {
        if (__mainException) {
          [__mainException addSuppressedWithJavaLangThrowable:e];
        } else {
          __mainException = e;
        }
      }
      if (__mainException) {
        @throw __mainException;
      }
    }
  }
  [bloomFilters_ clear];
}

- (void)saveAppropriatelySizedBloomFilterWithOrgApacheLuceneStoreIndexOutput:(OrgApacheLuceneStoreIndexOutput *)bloomOutput
                                      withOrgApacheLuceneCodecsBloomFuzzySet:(OrgApacheLuceneCodecsBloomFuzzySet *)bloomFilter
                                           withOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer_saveAppropriatelySizedBloomFilterWithOrgApacheLuceneStoreIndexOutput_withOrgApacheLuceneCodecsBloomFuzzySet_withOrgApacheLuceneIndexFieldInfo_(self, bloomOutput, bloomFilter, fieldInfo);
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(delegateFieldsConsumer_);
  RELEASE_(bloomFilters_);
  RELEASE_(state_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat:withOrgApacheLuceneCodecsFieldsConsumer:withOrgApacheLuceneIndexSegmentWriteState:", "BloomFilteredFieldsConsumer", NULL, 0x1, NULL, NULL },
    { "writeWithOrgApacheLuceneIndexFields:", "write", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "close", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "saveAppropriatelySizedBloomFilterWithOrgApacheLuceneStoreIndexOutput:withOrgApacheLuceneCodecsBloomFuzzySet:withOrgApacheLuceneIndexFieldInfo:", "saveAppropriatelySizedBloomFilter", "V", 0x2, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.codecs.bloom.BloomFilteringPostingsFormat;", NULL, NULL, .constantValue.asLong = 0 },
    { "delegateFieldsConsumer_", NULL, 0x2, "Lorg.apache.lucene.codecs.FieldsConsumer;", NULL, NULL, .constantValue.asLong = 0 },
    { "bloomFilters_", NULL, 0x2, "Ljava.util.Map;", NULL, "Ljava/util/Map<Lorg/apache/lucene/index/FieldInfo;Lorg/apache/lucene/codecs/bloom/FuzzySet;>;", .constantValue.asLong = 0 },
    { "state_", NULL, 0x2, "Lorg.apache.lucene.index.SegmentWriteState;", NULL, NULL, .constantValue.asLong = 0 },
    { "closed_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer = { 2, "BloomFilteredFieldsConsumer", "org.apache.lucene.codecs.bloom", "BloomFilteringPostingsFormat", 0x0, 4, methods, 5, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer;
}

@end

void OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_withOrgApacheLuceneCodecsFieldsConsumer_withOrgApacheLuceneIndexSegmentWriteState_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer *self, OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *outer$, OrgApacheLuceneCodecsFieldsConsumer *fieldsConsumer, OrgApacheLuceneIndexSegmentWriteState *state) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneCodecsFieldsConsumer_init(self);
  JreStrongAssignAndConsume(&self->bloomFilters_, new_JavaUtilHashMap_init());
  JreStrongAssign(&self->delegateFieldsConsumer_, fieldsConsumer);
  JreStrongAssign(&self->state_, state);
}

OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer *new_OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_withOrgApacheLuceneCodecsFieldsConsumer_withOrgApacheLuceneIndexSegmentWriteState_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat *outer$, OrgApacheLuceneCodecsFieldsConsumer *fieldsConsumer, OrgApacheLuceneIndexSegmentWriteState *state) {
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer *self = [OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer alloc];
  OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer_initWithOrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_withOrgApacheLuceneCodecsFieldsConsumer_withOrgApacheLuceneIndexSegmentWriteState_(self, outer$, fieldsConsumer, state);
  return self;
}

void OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer_saveAppropriatelySizedBloomFilterWithOrgApacheLuceneStoreIndexOutput_withOrgApacheLuceneCodecsBloomFuzzySet_withOrgApacheLuceneIndexFieldInfo_(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer *self, OrgApacheLuceneStoreIndexOutput *bloomOutput, OrgApacheLuceneCodecsBloomFuzzySet *bloomFilter, OrgApacheLuceneIndexFieldInfo *fieldInfo) {
  OrgApacheLuceneCodecsBloomFuzzySet *rightSizedSet = [((OrgApacheLuceneCodecsBloomBloomFilterFactory *) nil_chk(self->this$0_->bloomFilterFactory_)) downsizeWithOrgApacheLuceneIndexFieldInfo:fieldInfo withOrgApacheLuceneCodecsBloomFuzzySet:bloomFilter];
  if (rightSizedSet == nil) {
    rightSizedSet = bloomFilter;
  }
  [((OrgApacheLuceneCodecsBloomFuzzySet *) nil_chk(rightSizedSet)) serializeWithOrgApacheLuceneStoreDataOutput:bloomOutput];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsBloomBloomFilteringPostingsFormat_BloomFilteredFieldsConsumer)
