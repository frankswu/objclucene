//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/Closeable.h"
#include "java/io/IOException.h"
#include "java/lang/IllegalStateException.h"
#include "java/util/Arrays.h"
#include "java/util/Collection.h"
#include "java/util/Collections.h"
#include "java/util/List.h"
#include "org/apache/lucene/codecs/BlockTermState.h"
#include "org/apache/lucene/codecs/CodecUtil.h"
#include "org/apache/lucene/codecs/PostingsReaderBase.h"
#include "org/apache/lucene/codecs/lucene50/ForUtil.h"
#include "org/apache/lucene/codecs/lucene50/Lucene50PostingsFormat.h"
#include "org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.h"
#include "org/apache/lucene/codecs/lucene50/Lucene50SkipReader.h"
#include "org/apache/lucene/index/DocsAndPositionsEnum.h"
#include "org/apache/lucene/index/FieldInfo.h"
#include "org/apache/lucene/index/FieldInfos.h"
#include "org/apache/lucene/index/IndexFileNames.h"
#include "org/apache/lucene/index/IndexOptions.h"
#include "org/apache/lucene/index/PostingsEnum.h"
#include "org/apache/lucene/index/SegmentInfo.h"
#include "org/apache/lucene/index/SegmentReadState.h"
#include "org/apache/lucene/search/DocIdSetIterator.h"
#include "org/apache/lucene/store/DataInput.h"
#include "org/apache/lucene/store/Directory.h"
#include "org/apache/lucene/store/IOContext.h"
#include "org/apache/lucene/store/IndexInput.h"
#include "org/apache/lucene/util/ArrayUtil.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/IOUtils.h"
#include "org/apache/lucene/util/RamUsageEstimator.h"

@interface OrgApacheLuceneCodecsLucene50Lucene50PostingsReader () {
 @public
  OrgApacheLuceneStoreIndexInput *docIn_;
  OrgApacheLuceneStoreIndexInput *posIn_;
  OrgApacheLuceneStoreIndexInput *payIn_;
  jint version__;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader, docIn_, OrgApacheLuceneStoreIndexInput *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader, posIn_, OrgApacheLuceneStoreIndexInput *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader, payIn_, OrgApacheLuceneStoreIndexInput *)

static jlong OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BASE_RAM_BYTES_USED_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader, BASE_RAM_BYTES_USED_, jlong)

@interface OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum () {
 @public
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *this$0_;
  IOSByteArray *encoded_;
  IOSIntArray *docDeltaBuffer_;
  IOSIntArray *freqBuffer_;
  jint docBufferUpto_;
  OrgApacheLuceneCodecsLucene50Lucene50SkipReader *skipper_;
  jboolean skipped_;
  jint docFreq_;
  jlong totalTermFreq_;
  jint docUpto_;
  jint doc_;
  jint accum_;
  jint freq_;
  jlong docTermStartFP_;
  jlong skipOffset_;
  jint nextSkipDoc_;
  jboolean needsFreq_;
  jint singletonDocID_;
}

- (void)refillDocs;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum, this$0_, OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum, encoded_, IOSByteArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum, docDeltaBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum, freqBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum, skipper_, OrgApacheLuceneCodecsLucene50Lucene50SkipReader *)

__attribute__((unused)) static void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_refillDocs(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum *self);

@interface OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum () {
 @public
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *this$0_;
  IOSByteArray *encoded_;
  IOSIntArray *docDeltaBuffer_;
  IOSIntArray *freqBuffer_;
  IOSIntArray *posDeltaBuffer_;
  jint docBufferUpto_;
  jint posBufferUpto_;
  OrgApacheLuceneCodecsLucene50Lucene50SkipReader *skipper_;
  jboolean skipped_;
  jint docFreq_;
  jlong totalTermFreq_;
  jint docUpto_;
  jint doc_;
  jint accum_;
  jint freq_;
  jint position_;
  jint posPendingCount_;
  jlong posPendingFP_;
  jlong docTermStartFP_;
  jlong posTermStartFP_;
  jlong payTermStartFP_;
  jlong lastPosBlockFP_;
  jlong skipOffset_;
  jint nextSkipDoc_;
  jint singletonDocID_;
}

- (void)refillDocs;

- (void)refillPositions;

- (void)skipPositions;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum, this$0_, OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum, encoded_, IOSByteArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum, docDeltaBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum, freqBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum, posDeltaBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum, skipper_, OrgApacheLuceneCodecsLucene50Lucene50SkipReader *)

__attribute__((unused)) static void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillDocs(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *self);

__attribute__((unused)) static void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillPositions(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *self);

__attribute__((unused)) static void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_skipPositions(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *self);

@interface OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum () {
 @public
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *this$0_;
  IOSByteArray *encoded_;
  IOSIntArray *docDeltaBuffer_;
  IOSIntArray *freqBuffer_;
  IOSIntArray *posDeltaBuffer_;
  IOSIntArray *payloadLengthBuffer_;
  IOSIntArray *offsetStartDeltaBuffer_;
  IOSIntArray *offsetLengthBuffer_;
  IOSByteArray *payloadBytes_;
  jint payloadByteUpto_;
  jint payloadLength_;
  jint lastStartOffset_;
  jint startOffset_;
  jint endOffset_;
  jint docBufferUpto_;
  jint posBufferUpto_;
  OrgApacheLuceneCodecsLucene50Lucene50SkipReader *skipper_;
  jboolean skipped_;
  jint docFreq_;
  jlong totalTermFreq_;
  jint docUpto_;
  jint doc_;
  jint accum_;
  jint freq_;
  jint position_;
  jint posPendingCount_;
  jlong posPendingFP_;
  jlong payPendingFP_;
  jlong docTermStartFP_;
  jlong posTermStartFP_;
  jlong payTermStartFP_;
  jlong lastPosBlockFP_;
  jlong skipOffset_;
  jint nextSkipDoc_;
  jboolean needsOffsets_;
  jboolean needsPayloads_;
  jint singletonDocID_;
}

- (void)refillDocs;

- (void)refillPositions;

- (void)skipPositions;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, this$0_, OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, encoded_, IOSByteArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, docDeltaBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, freqBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, posDeltaBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, payloadLengthBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, offsetStartDeltaBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, offsetLengthBuffer_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, payloadBytes_, IOSByteArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum, skipper_, OrgApacheLuceneCodecsLucene50Lucene50SkipReader *)

__attribute__((unused)) static void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillDocs(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *self);

__attribute__((unused)) static void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillPositions(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *self);

__attribute__((unused)) static void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_skipPositions(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *self);

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader)

@implementation OrgApacheLuceneCodecsLucene50Lucene50PostingsReader

- (instancetype)initWithOrgApacheLuceneIndexSegmentReadState:(OrgApacheLuceneIndexSegmentReadState *)state {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_initWithOrgApacheLuceneIndexSegmentReadState_(self, state);
  return self;
}

- (void)init__WithOrgApacheLuceneStoreIndexInput:(OrgApacheLuceneStoreIndexInput *)termsIn
        withOrgApacheLuceneIndexSegmentReadState:(OrgApacheLuceneIndexSegmentReadState *)state {
  OrgApacheLuceneCodecsCodecUtil_checkIndexHeaderWithOrgApacheLuceneStoreDataInput_withNSString_withInt_withInt_withByteArray_withNSString_(termsIn, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_TERMS_CODEC_, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_VERSION_START, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_VERSION_CURRENT, [((OrgApacheLuceneIndexSegmentInfo *) nil_chk(((OrgApacheLuceneIndexSegmentReadState *) nil_chk(state))->segmentInfo_)) getId], state->segmentSuffix_);
  jint indexBlockSize = [((OrgApacheLuceneStoreIndexInput *) nil_chk(termsIn)) readVInt];
  if (indexBlockSize != OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    @throw [new_JavaLangIllegalStateException_initWithNSString_(JreStrcat("$I$IC", @"index-time BLOCK_SIZE (", indexBlockSize, @") != read-time BLOCK_SIZE (", OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE, ')')) autorelease];
  }
}

+ (void)readVIntBlockWithOrgApacheLuceneStoreIndexInput:(OrgApacheLuceneStoreIndexInput *)docIn
                                           withIntArray:(IOSIntArray *)docBuffer
                                           withIntArray:(IOSIntArray *)freqBuffer
                                                withInt:(jint)num
                                            withBoolean:(jboolean)indexHasFreq {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_readVIntBlockWithOrgApacheLuceneStoreIndexInput_withIntArray_withIntArray_withInt_withBoolean_(docIn, docBuffer, freqBuffer, num, indexHasFreq);
}

- (OrgApacheLuceneCodecsBlockTermState *)newTermState {
  return [new_OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState_init() autorelease];
}

- (void)close {
  OrgApacheLuceneUtilIOUtils_closeWithJavaIoCloseableArray_([IOSObjectArray arrayWithObjects:(id[]){ docIn_, posIn_, payIn_ } count:3 type:JavaIoCloseable_class_()]);
}

- (void)decodeTermWithLongArray:(IOSLongArray *)longs
withOrgApacheLuceneStoreDataInput:(OrgApacheLuceneStoreDataInput *)inArg
withOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo
withOrgApacheLuceneCodecsBlockTermState:(OrgApacheLuceneCodecsBlockTermState *)_termState
                    withBoolean:(jboolean)absolute {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *termState = (OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *) check_class_cast(_termState, [OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState class]);
  jboolean fieldHasPositions = [((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo)) getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS)] >= 0;
  jboolean fieldHasOffsets = [((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([fieldInfo getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS)] >= 0;
  jboolean fieldHasPayloads = [fieldInfo hasPayloads];
  if (absolute) {
    ((OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *) nil_chk(termState))->docStartFP_ = 0;
    termState->posStartFP_ = 0;
    termState->payStartFP_ = 0;
  }
  ((OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *) nil_chk(termState))->docStartFP_ += IOSLongArray_Get(nil_chk(longs), 0);
  if (fieldHasPositions) {
    termState->posStartFP_ += IOSLongArray_Get(longs, 1);
    if (fieldHasOffsets || fieldHasPayloads) {
      termState->payStartFP_ += IOSLongArray_Get(longs, 2);
    }
  }
  if (termState->docFreq_ == 1) {
    termState->singletonDocID_ = [((OrgApacheLuceneStoreDataInput *) nil_chk(inArg)) readVInt];
  }
  else {
    termState->singletonDocID_ = -1;
  }
  if (fieldHasPositions) {
    if (termState->totalTermFreq_ > OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
      termState->lastPosBlockOffset_ = [((OrgApacheLuceneStoreDataInput *) nil_chk(inArg)) readVLong];
    }
    else {
      termState->lastPosBlockOffset_ = -1;
    }
  }
  if (termState->docFreq_ > OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    termState->skipOffset_ = [((OrgApacheLuceneStoreDataInput *) nil_chk(inArg)) readVLong];
  }
  else {
    termState->skipOffset_ = -1;
  }
}

- (OrgApacheLuceneIndexPostingsEnum *)postingsWithOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo
                                        withOrgApacheLuceneCodecsBlockTermState:(OrgApacheLuceneCodecsBlockTermState *)termState
                                           withOrgApacheLuceneIndexPostingsEnum:(OrgApacheLuceneIndexPostingsEnum *)reuse
                                                                        withInt:(jint)flags {
  jboolean indexHasPositions = [((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo)) getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS)] >= 0;
  jboolean indexHasOffsets = [((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([fieldInfo getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS)] >= 0;
  jboolean indexHasPayloads = [fieldInfo hasPayloads];
  if (OrgApacheLuceneIndexPostingsEnum_featureRequestedWithInt_withShort_(flags, OrgApacheLuceneIndexDocsAndPositionsEnum_OLD_NULL_SEMANTICS)) {
    if (!indexHasPositions) {
      return nil;
    }
  }
  if (indexHasPositions == false || OrgApacheLuceneIndexPostingsEnum_featureRequestedWithInt_withShort_(flags, OrgApacheLuceneIndexPostingsEnum_POSITIONS) == false) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum *docsEnum;
    if ([reuse isKindOfClass:[OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum class]]) {
      docsEnum = (OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum *) check_class_cast(reuse, [OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum class]);
      if (![((OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum *) nil_chk(docsEnum)) canReuseWithOrgApacheLuceneStoreIndexInput:docIn_ withOrgApacheLuceneIndexFieldInfo:fieldInfo]) {
        docsEnum = [new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, fieldInfo) autorelease];
      }
    }
    else {
      docsEnum = [new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, fieldInfo) autorelease];
    }
    return [((OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum *) nil_chk(docsEnum)) resetWithOrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState:(OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *) check_class_cast(termState, [OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState class]) withInt:flags];
  }
  else if ((indexHasOffsets == false || OrgApacheLuceneIndexPostingsEnum_featureRequestedWithInt_withShort_(flags, OrgApacheLuceneIndexPostingsEnum_OFFSETS) == false) && (indexHasPayloads == false || OrgApacheLuceneIndexPostingsEnum_featureRequestedWithInt_withShort_(flags, OrgApacheLuceneIndexPostingsEnum_PAYLOADS) == false)) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *docsAndPositionsEnum;
    if ([reuse isKindOfClass:[OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum class]]) {
      docsAndPositionsEnum = (OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *) check_class_cast(reuse, [OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum class]);
      if (![((OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *) nil_chk(docsAndPositionsEnum)) canReuseWithOrgApacheLuceneStoreIndexInput:docIn_ withOrgApacheLuceneIndexFieldInfo:fieldInfo]) {
        docsAndPositionsEnum = [new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, fieldInfo) autorelease];
      }
    }
    else {
      docsAndPositionsEnum = [new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, fieldInfo) autorelease];
    }
    return [((OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *) nil_chk(docsAndPositionsEnum)) resetWithOrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState:(OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *) check_class_cast(termState, [OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState class])];
  }
  else {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *everythingEnum;
    if ([reuse isKindOfClass:[OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum class]]) {
      everythingEnum = (OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *) check_class_cast(reuse, [OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum class]);
      if (![((OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *) nil_chk(everythingEnum)) canReuseWithOrgApacheLuceneStoreIndexInput:docIn_ withOrgApacheLuceneIndexFieldInfo:fieldInfo]) {
        everythingEnum = [new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, fieldInfo) autorelease];
      }
    }
    else {
      everythingEnum = [new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, fieldInfo) autorelease];
    }
    return [((OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *) nil_chk(everythingEnum)) resetWithOrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState:(OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *) check_class_cast(termState, [OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState class]) withInt:flags];
  }
}

- (jlong)ramBytesUsed {
  return OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BASE_RAM_BYTES_USED_;
}

- (id<JavaUtilCollection>)getChildResources {
  return JavaUtilCollections_emptyList();
}

- (void)checkIntegrity {
  if (docIn_ != nil) {
    OrgApacheLuceneCodecsCodecUtil_checksumEntireFileWithOrgApacheLuceneStoreIndexInput_(docIn_);
  }
  if (posIn_ != nil) {
    OrgApacheLuceneCodecsCodecUtil_checksumEntireFileWithOrgApacheLuceneStoreIndexInput_(posIn_);
  }
  if (payIn_ != nil) {
    OrgApacheLuceneCodecsCodecUtil_checksumEntireFileWithOrgApacheLuceneStoreIndexInput_(payIn_);
  }
}

- (NSString *)description {
  return JreStrcat("$$Z$ZC", [[self getClass] getSimpleName], @"(positions=", (posIn_ != nil), @",payloads=", (payIn_ != nil), ')');
}

- (void)dealloc {
  RELEASE_(docIn_);
  RELEASE_(posIn_);
  RELEASE_(payIn_);
  RELEASE_(forUtil_);
  [super dealloc];
}

+ (void)initialize {
  if (self == [OrgApacheLuceneCodecsLucene50Lucene50PostingsReader class]) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BASE_RAM_BYTES_USED_ = OrgApacheLuceneUtilRamUsageEstimator_shallowSizeOfInstanceWithIOSClass_(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_class_());
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneIndexSegmentReadState:", "Lucene50PostingsReader", NULL, 0x1, "Ljava.io.IOException;", NULL },
    { "init__WithOrgApacheLuceneStoreIndexInput:withOrgApacheLuceneIndexSegmentReadState:", "init", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "readVIntBlockWithOrgApacheLuceneStoreIndexInput:withIntArray:withIntArray:withInt:withBoolean:", "readVIntBlock", "V", 0x8, "Ljava.io.IOException;", NULL },
    { "newTermState", NULL, "Lorg.apache.lucene.codecs.BlockTermState;", 0x1, NULL, NULL },
    { "close", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "decodeTermWithLongArray:withOrgApacheLuceneStoreDataInput:withOrgApacheLuceneIndexFieldInfo:withOrgApacheLuceneCodecsBlockTermState:withBoolean:", "decodeTerm", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "postingsWithOrgApacheLuceneIndexFieldInfo:withOrgApacheLuceneCodecsBlockTermState:withOrgApacheLuceneIndexPostingsEnum:withInt:", "postings", "Lorg.apache.lucene.index.PostingsEnum;", 0x1, "Ljava.io.IOException;", NULL },
    { "ramBytesUsed", NULL, "J", 0x1, NULL, NULL },
    { "getChildResources", NULL, "Ljava.util.Collection;", 0x1, NULL, NULL },
    { "checkIntegrity", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "BASE_RAM_BYTES_USED_", NULL, 0x1a, "J", &OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BASE_RAM_BYTES_USED_, NULL, .constantValue.asLong = 0 },
    { "docIn_", NULL, 0x12, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "posIn_", NULL, 0x12, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "payIn_", NULL, 0x12, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "forUtil_", NULL, 0x10, "Lorg.apache.lucene.codecs.lucene50.ForUtil;", NULL, NULL, .constantValue.asLong = 0 },
    { "version__", "version", 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.codecs.lucene50.Lucene50PostingsReader$BlockDocsEnum;", "Lorg.apache.lucene.codecs.lucene50.Lucene50PostingsReader$BlockPostingsEnum;", "Lorg.apache.lucene.codecs.lucene50.Lucene50PostingsReader$EverythingEnum;"};
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsLucene50Lucene50PostingsReader = { 2, "Lucene50PostingsReader", "org.apache.lucene.codecs.lucene50", NULL, 0x11, 11, methods, 6, fields, 0, NULL, 3, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader;
}

@end

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *self, OrgApacheLuceneIndexSegmentReadState *state) {
  OrgApacheLuceneCodecsPostingsReaderBase_init(self);
  jboolean success = false;
  OrgApacheLuceneStoreIndexInput *docIn = nil;
  OrgApacheLuceneStoreIndexInput *posIn = nil;
  OrgApacheLuceneStoreIndexInput *payIn = nil;
  NSString *docName = OrgApacheLuceneIndexIndexFileNames_segmentFileNameWithNSString_withNSString_withNSString_(((OrgApacheLuceneIndexSegmentInfo *) nil_chk(((OrgApacheLuceneIndexSegmentReadState *) nil_chk(state))->segmentInfo_))->name_, state->segmentSuffix_, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_DOC_EXTENSION_);
  @try {
    docIn = [((OrgApacheLuceneStoreDirectory *) nil_chk(state->directory_)) openInputWithNSString:docName withOrgApacheLuceneStoreIOContext:state->context_];
    self->version__ = OrgApacheLuceneCodecsCodecUtil_checkIndexHeaderWithOrgApacheLuceneStoreDataInput_withNSString_withInt_withInt_withByteArray_withNSString_(docIn, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_DOC_CODEC_, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_VERSION_START, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_VERSION_CURRENT, [state->segmentInfo_ getId], state->segmentSuffix_);
    JreStrongAssignAndConsume(&self->forUtil_, new_OrgApacheLuceneCodecsLucene50ForUtil_initWithOrgApacheLuceneStoreDataInput_(docIn));
    OrgApacheLuceneCodecsCodecUtil_retrieveChecksumWithOrgApacheLuceneStoreIndexInput_(docIn);
    if ([((OrgApacheLuceneIndexFieldInfos *) nil_chk(state->fieldInfos_)) hasProx]) {
      NSString *proxName = OrgApacheLuceneIndexIndexFileNames_segmentFileNameWithNSString_withNSString_withNSString_(state->segmentInfo_->name_, state->segmentSuffix_, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_POS_EXTENSION_);
      posIn = [state->directory_ openInputWithNSString:proxName withOrgApacheLuceneStoreIOContext:state->context_];
      OrgApacheLuceneCodecsCodecUtil_checkIndexHeaderWithOrgApacheLuceneStoreDataInput_withNSString_withInt_withInt_withByteArray_withNSString_(posIn, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_POS_CODEC_, self->version__, self->version__, [state->segmentInfo_ getId], state->segmentSuffix_);
      OrgApacheLuceneCodecsCodecUtil_retrieveChecksumWithOrgApacheLuceneStoreIndexInput_(posIn);
      if ([state->fieldInfos_ hasPayloads] || [state->fieldInfos_ hasOffsets]) {
        NSString *payName = OrgApacheLuceneIndexIndexFileNames_segmentFileNameWithNSString_withNSString_withNSString_(state->segmentInfo_->name_, state->segmentSuffix_, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_PAY_EXTENSION_);
        payIn = [state->directory_ openInputWithNSString:payName withOrgApacheLuceneStoreIOContext:state->context_];
        OrgApacheLuceneCodecsCodecUtil_checkIndexHeaderWithOrgApacheLuceneStoreDataInput_withNSString_withInt_withInt_withByteArray_withNSString_(payIn, OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_PAY_CODEC_, self->version__, self->version__, [state->segmentInfo_ getId], state->segmentSuffix_);
        OrgApacheLuceneCodecsCodecUtil_retrieveChecksumWithOrgApacheLuceneStoreIndexInput_(payIn);
      }
    }
    JreStrongAssign(&self->docIn_, docIn);
    JreStrongAssign(&self->posIn_, posIn);
    JreStrongAssign(&self->payIn_, payIn);
    success = true;
  }
  @finally {
    if (!success) {
      OrgApacheLuceneUtilIOUtils_closeWhileHandlingExceptionWithJavaIoCloseableArray_([IOSObjectArray arrayWithObjects:(id[]){ docIn, posIn, payIn } count:3 type:JavaIoCloseable_class_()]);
    }
  }
}

OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_initWithOrgApacheLuceneIndexSegmentReadState_(OrgApacheLuceneIndexSegmentReadState *state) {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *self = [OrgApacheLuceneCodecsLucene50Lucene50PostingsReader alloc];
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_initWithOrgApacheLuceneIndexSegmentReadState_(self, state);
  return self;
}

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_readVIntBlockWithOrgApacheLuceneStoreIndexInput_withIntArray_withIntArray_withInt_withBoolean_(OrgApacheLuceneStoreIndexInput *docIn, IOSIntArray *docBuffer, IOSIntArray *freqBuffer, jint num, jboolean indexHasFreq) {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_initialize();
  if (indexHasFreq) {
    for (jint i = 0; i < num; i++) {
      jint code = [((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn)) readVInt];
      *IOSIntArray_GetRef(nil_chk(docBuffer), i) = JreURShift32(code, 1);
      if ((code & 1) != 0) {
        *IOSIntArray_GetRef(nil_chk(freqBuffer), i) = 1;
      }
      else {
        *IOSIntArray_GetRef(nil_chk(freqBuffer), i) = [docIn readVInt];
      }
    }
  }
  else {
    for (jint i = 0; i < num; i++) {
      *IOSIntArray_GetRef(nil_chk(docBuffer), i) = [((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn)) readVInt];
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader)

@implementation OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum

- (instancetype)initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader:(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *)outer$
                                          withOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, outer$, fieldInfo);
  return self;
}

- (jboolean)canReuseWithOrgApacheLuceneStoreIndexInput:(OrgApacheLuceneStoreIndexInput *)docIn
                     withOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo {
  return docIn == startDocIn_ && indexHasFreq_ == ([((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo)) getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS)] >= 0) && indexHasPos_ == ([((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([fieldInfo getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS)] >= 0) && indexHasPayloads_ == [fieldInfo hasPayloads];
}

- (OrgApacheLuceneIndexPostingsEnum *)resetWithOrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState:(OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *)termState
                                                                                                             withInt:(jint)flags {
  docFreq_ = ((OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *) nil_chk(termState))->docFreq_;
  totalTermFreq_ = indexHasFreq_ ? termState->totalTermFreq_ : docFreq_;
  docTermStartFP_ = termState->docStartFP_;
  skipOffset_ = termState->skipOffset_;
  singletonDocID_ = termState->singletonDocID_;
  if (docFreq_ > 1) {
    if (docIn_ == nil) {
      JreStrongAssign(&docIn_, [((OrgApacheLuceneStoreIndexInput *) nil_chk(startDocIn_)) clone]);
    }
    [((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn_)) seekWithLong:docTermStartFP_];
  }
  doc_ = -1;
  self->needsFreq_ = OrgApacheLuceneIndexPostingsEnum_featureRequestedWithInt_withShort_(flags, OrgApacheLuceneIndexPostingsEnum_FREQS);
  if (indexHasFreq_ == false || needsFreq_ == false) {
    JavaUtilArrays_fillWithIntArray_withInt_(freqBuffer_, 1);
  }
  accum_ = 0;
  docUpto_ = 0;
  nextSkipDoc_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE - 1;
  docBufferUpto_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
  skipped_ = false;
  return self;
}

- (jint)freq {
  return freq_;
}

- (jint)nextPosition {
  return -1;
}

- (jint)startOffset {
  return -1;
}

- (jint)endOffset {
  return -1;
}

- (OrgApacheLuceneUtilBytesRef *)getPayload {
  return nil;
}

- (jint)docID {
  return doc_;
}

- (void)refillDocs {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_refillDocs(self);
}

- (jint)nextDoc {
  if (docUpto_ == docFreq_) {
    return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  if (docBufferUpto_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_refillDocs(self);
  }
  accum_ += IOSIntArray_Get(nil_chk(docDeltaBuffer_), docBufferUpto_);
  docUpto_++;
  doc_ = accum_;
  freq_ = IOSIntArray_Get(nil_chk(freqBuffer_), docBufferUpto_);
  docBufferUpto_++;
  return doc_;
}

- (jint)advanceWithInt:(jint)target {
  if (docFreq_ > OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE && target > nextSkipDoc_) {
    if (skipper_ == nil) {
      JreStrongAssignAndConsume(&skipper_, new_OrgApacheLuceneCodecsLucene50Lucene50SkipReader_initWithOrgApacheLuceneStoreIndexInput_withInt_withBoolean_withBoolean_withBoolean_([((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn_)) clone], OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_MAX_SKIP_LEVELS, indexHasPos_, indexHasOffsets_, indexHasPayloads_));
    }
    if (!skipped_) {
      JreAssert((skipOffset_ != -1), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:423 condition failed: assert skipOffset != -1;"));
      [((OrgApacheLuceneCodecsLucene50Lucene50SkipReader *) nil_chk(skipper_)) init__WithLong:docTermStartFP_ + skipOffset_ withLong:docTermStartFP_ withLong:0 withLong:0 withInt:docFreq_];
      skipped_ = true;
    }
    jint newDocUpto = [((OrgApacheLuceneCodecsLucene50Lucene50SkipReader *) nil_chk(skipper_)) skipToWithInt:target] + 1;
    if (newDocUpto > docUpto_) {
      JreAssert((newDocUpto % OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE == 0), (JreStrcat("$I", @"got ", newDocUpto)));
      docUpto_ = newDocUpto;
      docBufferUpto_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
      accum_ = [skipper_ getDoc];
      [((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn_)) seekWithLong:[skipper_ getDocPointer]];
    }
    nextSkipDoc_ = [skipper_ getNextSkipDoc];
  }
  if (docUpto_ == docFreq_) {
    return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  if (docBufferUpto_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_refillDocs(self);
  }
  while (true) {
    accum_ += IOSIntArray_Get(nil_chk(docDeltaBuffer_), docBufferUpto_);
    docUpto_++;
    if (accum_ >= target) {
      break;
    }
    docBufferUpto_++;
    if (docUpto_ == docFreq_) {
      return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
    }
  }
  freq_ = IOSIntArray_Get(nil_chk(freqBuffer_), docBufferUpto_);
  docBufferUpto_++;
  return doc_ = accum_;
}

- (jlong)cost {
  return docFreq_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(encoded_);
  RELEASE_(docDeltaBuffer_);
  RELEASE_(freqBuffer_);
  RELEASE_(skipper_);
  RELEASE_(startDocIn_);
  RELEASE_(docIn_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader:withOrgApacheLuceneIndexFieldInfo:", "BlockDocsEnum", NULL, 0x1, NULL, NULL },
    { "canReuseWithOrgApacheLuceneStoreIndexInput:withOrgApacheLuceneIndexFieldInfo:", "canReuse", "Z", 0x1, NULL, NULL },
    { "resetWithOrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState:withInt:", "reset", "Lorg.apache.lucene.index.PostingsEnum;", 0x1, "Ljava.io.IOException;", NULL },
    { "freq", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "nextPosition", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "startOffset", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "endOffset", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "getPayload", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, "Ljava.io.IOException;", NULL },
    { "docID", NULL, "I", 0x1, NULL, NULL },
    { "refillDocs", NULL, "V", 0x2, "Ljava.io.IOException;", NULL },
    { "nextDoc", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "advanceWithInt:", "advance", "I", 0x1, "Ljava.io.IOException;", NULL },
    { "cost", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.codecs.lucene50.Lucene50PostingsReader;", NULL, NULL, .constantValue.asLong = 0 },
    { "encoded_", NULL, 0x12, "[B", NULL, NULL, .constantValue.asLong = 0 },
    { "docDeltaBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "freqBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "docBufferUpto_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "skipper_", NULL, 0x2, "Lorg.apache.lucene.codecs.lucene50.Lucene50SkipReader;", NULL, NULL, .constantValue.asLong = 0 },
    { "skipped_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "startDocIn_", NULL, 0x10, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "docIn_", NULL, 0x0, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "indexHasFreq_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "indexHasPos_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "indexHasOffsets_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "indexHasPayloads_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "docFreq_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "totalTermFreq_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "docUpto_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "doc_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "accum_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "freq_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "docTermStartFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "skipOffset_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "nextSkipDoc_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "needsFreq_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "singletonDocID_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum = { 2, "BlockDocsEnum", "org.apache.lucene.codecs.lucene50", "Lucene50PostingsReader", 0x10, 13, methods, 24, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum;
}

@end

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum *self, OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *outer$, OrgApacheLuceneIndexFieldInfo *fieldInfo) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneIndexPostingsEnum_init(self);
  JreStrongAssignAndConsume(&self->docDeltaBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
  JreStrongAssignAndConsume(&self->freqBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
  JreStrongAssign(&self->startDocIn_, outer$->docIn_);
  JreStrongAssign(&self->docIn_, nil);
  self->indexHasFreq_ = ([((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo)) getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS)] >= 0);
  self->indexHasPos_ = ([((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([fieldInfo getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS)] >= 0);
  self->indexHasOffsets_ = ([((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([fieldInfo getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS)] >= 0);
  self->indexHasPayloads_ = [fieldInfo hasPayloads];
  JreStrongAssignAndConsume(&self->encoded_, [IOSByteArray newArrayWithLength:OrgApacheLuceneCodecsLucene50ForUtil_MAX_ENCODED_SIZE]);
}

OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum *new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *outer$, OrgApacheLuceneIndexFieldInfo *fieldInfo) {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum *self = [OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum alloc];
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, outer$, fieldInfo);
  return self;
}

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum_refillDocs(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum *self) {
  jint left = self->docFreq_ - self->docUpto_;
  JreAssert((left > 0), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:365 condition failed: assert left > 0;"));
  if (left >= OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    [((OrgApacheLuceneCodecsLucene50ForUtil *) nil_chk(self->this$0_->forUtil_)) readBlockWithOrgApacheLuceneStoreIndexInput:self->docIn_ withByteArray:self->encoded_ withIntArray:self->docDeltaBuffer_];
    if (self->indexHasFreq_) {
      if (self->needsFreq_) {
        [self->this$0_->forUtil_ readBlockWithOrgApacheLuceneStoreIndexInput:self->docIn_ withByteArray:self->encoded_ withIntArray:self->freqBuffer_];
      }
      else {
        [self->this$0_->forUtil_ skipBlockWithOrgApacheLuceneStoreIndexInput:self->docIn_];
      }
    }
  }
  else if (self->docFreq_ == 1) {
    *IOSIntArray_GetRef(nil_chk(self->docDeltaBuffer_), 0) = self->singletonDocID_;
    *IOSIntArray_GetRef(nil_chk(self->freqBuffer_), 0) = (jint) self->totalTermFreq_;
  }
  else {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_readVIntBlockWithOrgApacheLuceneStoreIndexInput_withIntArray_withIntArray_withInt_withBoolean_(self->docIn_, self->docDeltaBuffer_, self->freqBuffer_, left, self->indexHasFreq_);
  }
  self->docBufferUpto_ = 0;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockDocsEnum)

@implementation OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum

- (instancetype)initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader:(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *)outer$
                                          withOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, outer$, fieldInfo);
  return self;
}

- (jboolean)canReuseWithOrgApacheLuceneStoreIndexInput:(OrgApacheLuceneStoreIndexInput *)docIn
                     withOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo {
  return docIn == startDocIn_ && indexHasOffsets_ == ([((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo)) getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS)] >= 0) && indexHasPayloads_ == [fieldInfo hasPayloads];
}

- (OrgApacheLuceneIndexPostingsEnum *)resetWithOrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState:(OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *)termState {
  docFreq_ = ((OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *) nil_chk(termState))->docFreq_;
  docTermStartFP_ = termState->docStartFP_;
  posTermStartFP_ = termState->posStartFP_;
  payTermStartFP_ = termState->payStartFP_;
  skipOffset_ = termState->skipOffset_;
  totalTermFreq_ = termState->totalTermFreq_;
  singletonDocID_ = termState->singletonDocID_;
  if (docFreq_ > 1) {
    if (docIn_ == nil) {
      JreStrongAssign(&docIn_, [((OrgApacheLuceneStoreIndexInput *) nil_chk(startDocIn_)) clone]);
    }
    [((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn_)) seekWithLong:docTermStartFP_];
  }
  posPendingFP_ = posTermStartFP_;
  posPendingCount_ = 0;
  if (termState->totalTermFreq_ < OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    lastPosBlockFP_ = posTermStartFP_;
  }
  else if (termState->totalTermFreq_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    lastPosBlockFP_ = -1;
  }
  else {
    lastPosBlockFP_ = posTermStartFP_ + termState->lastPosBlockOffset_;
  }
  doc_ = -1;
  accum_ = 0;
  docUpto_ = 0;
  if (docFreq_ > OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    nextSkipDoc_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE - 1;
  }
  else {
    nextSkipDoc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  docBufferUpto_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
  skipped_ = false;
  return self;
}

- (jint)freq {
  return freq_;
}

- (jint)docID {
  return doc_;
}

- (void)refillDocs {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillDocs(self);
}

- (void)refillPositions {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillPositions(self);
}

- (jint)nextDoc {
  if (docUpto_ == docFreq_) {
    return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  if (docBufferUpto_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillDocs(self);
  }
  accum_ += IOSIntArray_Get(nil_chk(docDeltaBuffer_), docBufferUpto_);
  freq_ = IOSIntArray_Get(nil_chk(freqBuffer_), docBufferUpto_);
  posPendingCount_ += freq_;
  docBufferUpto_++;
  docUpto_++;
  doc_ = accum_;
  position_ = 0;
  return doc_;
}

- (jint)advanceWithInt:(jint)target {
  if (target > nextSkipDoc_) {
    if (skipper_ == nil) {
      JreStrongAssignAndConsume(&skipper_, new_OrgApacheLuceneCodecsLucene50Lucene50SkipReader_initWithOrgApacheLuceneStoreIndexInput_withInt_withBoolean_withBoolean_withBoolean_([((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn_)) clone], OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_MAX_SKIP_LEVELS, true, indexHasOffsets_, indexHasPayloads_));
    }
    if (!skipped_) {
      JreAssert((skipOffset_ != -1), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:688 condition failed: assert skipOffset != -1;"));
      [((OrgApacheLuceneCodecsLucene50Lucene50SkipReader *) nil_chk(skipper_)) init__WithLong:docTermStartFP_ + skipOffset_ withLong:docTermStartFP_ withLong:posTermStartFP_ withLong:payTermStartFP_ withInt:docFreq_];
      skipped_ = true;
    }
    jint newDocUpto = [((OrgApacheLuceneCodecsLucene50Lucene50SkipReader *) nil_chk(skipper_)) skipToWithInt:target] + 1;
    if (newDocUpto > docUpto_) {
      JreAssert((newDocUpto % OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE == 0), (JreStrcat("$I", @"got ", newDocUpto)));
      docUpto_ = newDocUpto;
      docBufferUpto_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
      accum_ = [skipper_ getDoc];
      [((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn_)) seekWithLong:[skipper_ getDocPointer]];
      posPendingFP_ = [skipper_ getPosPointer];
      posPendingCount_ = [skipper_ getPosBufferUpto];
    }
    nextSkipDoc_ = [skipper_ getNextSkipDoc];
  }
  if (docUpto_ == docFreq_) {
    return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  if (docBufferUpto_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillDocs(self);
  }
  while (true) {
    accum_ += IOSIntArray_Get(nil_chk(docDeltaBuffer_), docBufferUpto_);
    freq_ = IOSIntArray_Get(nil_chk(freqBuffer_), docBufferUpto_);
    posPendingCount_ += freq_;
    docBufferUpto_++;
    docUpto_++;
    if (accum_ >= target) {
      break;
    }
    if (docUpto_ == docFreq_) {
      return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
    }
  }
  position_ = 0;
  return doc_ = accum_;
}

- (void)skipPositions {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_skipPositions(self);
}

- (jint)nextPosition {
  JreAssert((posPendingCount_ > 0), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:768 condition failed: assert posPendingCount > 0;"));
  if (posPendingFP_ != -1) {
    [((OrgApacheLuceneStoreIndexInput *) nil_chk(posIn_)) seekWithLong:posPendingFP_];
    posPendingFP_ = -1;
    posBufferUpto_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
  }
  if (posPendingCount_ > freq_) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_skipPositions(self);
    posPendingCount_ = freq_;
  }
  if (posBufferUpto_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillPositions(self);
    posBufferUpto_ = 0;
  }
  position_ += IOSIntArray_Get(nil_chk(posDeltaBuffer_), posBufferUpto_++);
  posPendingCount_--;
  return position_;
}

- (jint)startOffset {
  return -1;
}

- (jint)endOffset {
  return -1;
}

- (OrgApacheLuceneUtilBytesRef *)getPayload {
  return nil;
}

- (jlong)cost {
  return docFreq_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(encoded_);
  RELEASE_(docDeltaBuffer_);
  RELEASE_(freqBuffer_);
  RELEASE_(posDeltaBuffer_);
  RELEASE_(skipper_);
  RELEASE_(startDocIn_);
  RELEASE_(docIn_);
  RELEASE_(posIn_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader:withOrgApacheLuceneIndexFieldInfo:", "BlockPostingsEnum", NULL, 0x1, NULL, NULL },
    { "canReuseWithOrgApacheLuceneStoreIndexInput:withOrgApacheLuceneIndexFieldInfo:", "canReuse", "Z", 0x1, NULL, NULL },
    { "resetWithOrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState:", "reset", "Lorg.apache.lucene.index.PostingsEnum;", 0x1, "Ljava.io.IOException;", NULL },
    { "freq", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "docID", NULL, "I", 0x1, NULL, NULL },
    { "refillDocs", NULL, "V", 0x2, "Ljava.io.IOException;", NULL },
    { "refillPositions", NULL, "V", 0x2, "Ljava.io.IOException;", NULL },
    { "nextDoc", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "advanceWithInt:", "advance", "I", 0x1, "Ljava.io.IOException;", NULL },
    { "skipPositions", NULL, "V", 0x2, "Ljava.io.IOException;", NULL },
    { "nextPosition", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "startOffset", NULL, "I", 0x1, NULL, NULL },
    { "endOffset", NULL, "I", 0x1, NULL, NULL },
    { "getPayload", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, NULL, NULL },
    { "cost", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.codecs.lucene50.Lucene50PostingsReader;", NULL, NULL, .constantValue.asLong = 0 },
    { "encoded_", NULL, 0x12, "[B", NULL, NULL, .constantValue.asLong = 0 },
    { "docDeltaBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "freqBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "posDeltaBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "docBufferUpto_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "posBufferUpto_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "skipper_", NULL, 0x2, "Lorg.apache.lucene.codecs.lucene50.Lucene50SkipReader;", NULL, NULL, .constantValue.asLong = 0 },
    { "skipped_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "startDocIn_", NULL, 0x10, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "docIn_", NULL, 0x0, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "posIn_", NULL, 0x10, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "indexHasOffsets_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "indexHasPayloads_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "docFreq_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "totalTermFreq_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "docUpto_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "doc_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "accum_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "freq_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "position_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "posPendingCount_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "posPendingFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "docTermStartFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "posTermStartFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "payTermStartFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "lastPosBlockFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "skipOffset_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "nextSkipDoc_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "singletonDocID_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum = { 2, "BlockPostingsEnum", "org.apache.lucene.codecs.lucene50", "Lucene50PostingsReader", 0x10, 15, methods, 30, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum;
}

@end

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *self, OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *outer$, OrgApacheLuceneIndexFieldInfo *fieldInfo) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneIndexPostingsEnum_init(self);
  JreStrongAssignAndConsume(&self->docDeltaBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
  JreStrongAssignAndConsume(&self->freqBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
  JreStrongAssignAndConsume(&self->posDeltaBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
  JreStrongAssign(&self->startDocIn_, outer$->docIn_);
  JreStrongAssign(&self->docIn_, nil);
  JreStrongAssign(&self->posIn_, [((OrgApacheLuceneStoreIndexInput *) nil_chk(outer$->posIn_)) clone]);
  JreStrongAssignAndConsume(&self->encoded_, [IOSByteArray newArrayWithLength:OrgApacheLuceneCodecsLucene50ForUtil_MAX_ENCODED_SIZE]);
  self->indexHasOffsets_ = ([((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo)) getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS)] >= 0);
  self->indexHasPayloads_ = [fieldInfo hasPayloads];
}

OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *outer$, OrgApacheLuceneIndexFieldInfo *fieldInfo) {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *self = [OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum alloc];
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, outer$, fieldInfo);
  return self;
}

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillDocs(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *self) {
  jint left = self->docFreq_ - self->docUpto_;
  JreAssert((left > 0), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:609 condition failed: assert left > 0;"));
  if (left >= OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    [((OrgApacheLuceneCodecsLucene50ForUtil *) nil_chk(self->this$0_->forUtil_)) readBlockWithOrgApacheLuceneStoreIndexInput:self->docIn_ withByteArray:self->encoded_ withIntArray:self->docDeltaBuffer_];
    [self->this$0_->forUtil_ readBlockWithOrgApacheLuceneStoreIndexInput:self->docIn_ withByteArray:self->encoded_ withIntArray:self->freqBuffer_];
  }
  else if (self->docFreq_ == 1) {
    *IOSIntArray_GetRef(nil_chk(self->docDeltaBuffer_), 0) = self->singletonDocID_;
    *IOSIntArray_GetRef(nil_chk(self->freqBuffer_), 0) = (jint) self->totalTermFreq_;
  }
  else {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_readVIntBlockWithOrgApacheLuceneStoreIndexInput_withIntArray_withIntArray_withInt_withBoolean_(self->docIn_, self->docDeltaBuffer_, self->freqBuffer_, left, true);
  }
  self->docBufferUpto_ = 0;
}

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillPositions(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *self) {
  if ([((OrgApacheLuceneStoreIndexInput *) nil_chk(self->posIn_)) getFilePointer] == self->lastPosBlockFP_) {
    jint count = (jint) (self->totalTermFreq_ % OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE);
    jint payloadLength = 0;
    for (jint i = 0; i < count; i++) {
      jint code = [self->posIn_ readVInt];
      if (self->indexHasPayloads_) {
        if ((code & 1) != 0) {
          payloadLength = [self->posIn_ readVInt];
        }
        *IOSIntArray_GetRef(nil_chk(self->posDeltaBuffer_), i) = JreURShift32(code, 1);
        if (payloadLength != 0) {
          [self->posIn_ seekWithLong:[self->posIn_ getFilePointer] + payloadLength];
        }
      }
      else {
        *IOSIntArray_GetRef(nil_chk(self->posDeltaBuffer_), i) = code;
      }
      if (self->indexHasOffsets_) {
        if (([self->posIn_ readVInt] & 1) != 0) {
          [self->posIn_ readVInt];
        }
      }
    }
  }
  else {
    [((OrgApacheLuceneCodecsLucene50ForUtil *) nil_chk(self->this$0_->forUtil_)) readBlockWithOrgApacheLuceneStoreIndexInput:self->posIn_ withByteArray:self->encoded_ withIntArray:self->posDeltaBuffer_];
  }
}

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_skipPositions(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum *self) {
  jint toSkip = self->posPendingCount_ - self->freq_;
  jint leftInBlock = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE - self->posBufferUpto_;
  if (toSkip < leftInBlock) {
    self->posBufferUpto_ += toSkip;
  }
  else {
    toSkip -= leftInBlock;
    while (toSkip >= OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
      JreAssert(([((OrgApacheLuceneStoreIndexInput *) nil_chk(self->posIn_)) getFilePointer] != self->lastPosBlockFP_), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:754 condition failed: assert posIn.getFilePointer() != lastPosBlockFP;"));
      [((OrgApacheLuceneCodecsLucene50ForUtil *) nil_chk(self->this$0_->forUtil_)) skipBlockWithOrgApacheLuceneStoreIndexInput:self->posIn_];
      toSkip -= OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
    }
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum_refillPositions(self);
    self->posBufferUpto_ = toSkip;
  }
  self->position_ = 0;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_BlockPostingsEnum)

@implementation OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum

- (instancetype)initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader:(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *)outer$
                                          withOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, outer$, fieldInfo);
  return self;
}

- (jboolean)canReuseWithOrgApacheLuceneStoreIndexInput:(OrgApacheLuceneStoreIndexInput *)docIn
                     withOrgApacheLuceneIndexFieldInfo:(OrgApacheLuceneIndexFieldInfo *)fieldInfo {
  return docIn == startDocIn_ && indexHasOffsets_ == ([((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo)) getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS)] >= 0) && indexHasPayloads_ == [fieldInfo hasPayloads];
}

- (OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *)resetWithOrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState:(OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *)termState
                                                                                                                                               withInt:(jint)flags {
  docFreq_ = ((OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState *) nil_chk(termState))->docFreq_;
  docTermStartFP_ = termState->docStartFP_;
  posTermStartFP_ = termState->posStartFP_;
  payTermStartFP_ = termState->payStartFP_;
  skipOffset_ = termState->skipOffset_;
  totalTermFreq_ = termState->totalTermFreq_;
  singletonDocID_ = termState->singletonDocID_;
  if (docFreq_ > 1) {
    if (docIn_ == nil) {
      JreStrongAssign(&docIn_, [((OrgApacheLuceneStoreIndexInput *) nil_chk(startDocIn_)) clone]);
    }
    [((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn_)) seekWithLong:docTermStartFP_];
  }
  posPendingFP_ = posTermStartFP_;
  payPendingFP_ = payTermStartFP_;
  posPendingCount_ = 0;
  if (termState->totalTermFreq_ < OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    lastPosBlockFP_ = posTermStartFP_;
  }
  else if (termState->totalTermFreq_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    lastPosBlockFP_ = -1;
  }
  else {
    lastPosBlockFP_ = posTermStartFP_ + termState->lastPosBlockOffset_;
  }
  self->needsOffsets_ = OrgApacheLuceneIndexPostingsEnum_featureRequestedWithInt_withShort_(flags, OrgApacheLuceneIndexPostingsEnum_OFFSETS);
  self->needsPayloads_ = OrgApacheLuceneIndexPostingsEnum_featureRequestedWithInt_withShort_(flags, OrgApacheLuceneIndexPostingsEnum_PAYLOADS);
  doc_ = -1;
  accum_ = 0;
  docUpto_ = 0;
  if (docFreq_ > OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    nextSkipDoc_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE - 1;
  }
  else {
    nextSkipDoc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  docBufferUpto_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
  skipped_ = false;
  return self;
}

- (jint)freq {
  return freq_;
}

- (jint)docID {
  return doc_;
}

- (void)refillDocs {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillDocs(self);
}

- (void)refillPositions {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillPositions(self);
}

- (jint)nextDoc {
  if (docUpto_ == docFreq_) {
    return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  if (docBufferUpto_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillDocs(self);
  }
  accum_ += IOSIntArray_Get(nil_chk(docDeltaBuffer_), docBufferUpto_);
  freq_ = IOSIntArray_Get(nil_chk(freqBuffer_), docBufferUpto_);
  posPendingCount_ += freq_;
  docBufferUpto_++;
  docUpto_++;
  doc_ = accum_;
  position_ = 0;
  lastStartOffset_ = 0;
  return doc_;
}

- (jint)advanceWithInt:(jint)target {
  if (target > nextSkipDoc_) {
    if (skipper_ == nil) {
      JreStrongAssignAndConsume(&skipper_, new_OrgApacheLuceneCodecsLucene50Lucene50SkipReader_initWithOrgApacheLuceneStoreIndexInput_withInt_withBoolean_withBoolean_withBoolean_([((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn_)) clone], OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_MAX_SKIP_LEVELS, true, indexHasOffsets_, indexHasPayloads_));
    }
    if (!skipped_) {
      JreAssert((skipOffset_ != -1), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:1104 condition failed: assert skipOffset != -1;"));
      [((OrgApacheLuceneCodecsLucene50Lucene50SkipReader *) nil_chk(skipper_)) init__WithLong:docTermStartFP_ + skipOffset_ withLong:docTermStartFP_ withLong:posTermStartFP_ withLong:payTermStartFP_ withInt:docFreq_];
      skipped_ = true;
    }
    jint newDocUpto = [((OrgApacheLuceneCodecsLucene50Lucene50SkipReader *) nil_chk(skipper_)) skipToWithInt:target] + 1;
    if (newDocUpto > docUpto_) {
      JreAssert((newDocUpto % OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE == 0), (JreStrcat("$I", @"got ", newDocUpto)));
      docUpto_ = newDocUpto;
      docBufferUpto_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
      accum_ = [skipper_ getDoc];
      [((OrgApacheLuceneStoreIndexInput *) nil_chk(docIn_)) seekWithLong:[skipper_ getDocPointer]];
      posPendingFP_ = [skipper_ getPosPointer];
      payPendingFP_ = [skipper_ getPayPointer];
      posPendingCount_ = [skipper_ getPosBufferUpto];
      lastStartOffset_ = 0;
      payloadByteUpto_ = [skipper_ getPayloadByteUpto];
    }
    nextSkipDoc_ = [skipper_ getNextSkipDoc];
  }
  if (docUpto_ == docFreq_) {
    return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
  }
  if (docBufferUpto_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillDocs(self);
  }
  while (true) {
    accum_ += IOSIntArray_Get(nil_chk(docDeltaBuffer_), docBufferUpto_);
    freq_ = IOSIntArray_Get(nil_chk(freqBuffer_), docBufferUpto_);
    posPendingCount_ += freq_;
    docBufferUpto_++;
    docUpto_++;
    if (accum_ >= target) {
      break;
    }
    if (docUpto_ == docFreq_) {
      return doc_ = OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS;
    }
  }
  position_ = 0;
  lastStartOffset_ = 0;
  return doc_ = accum_;
}

- (void)skipPositions {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_skipPositions(self);
}

- (jint)nextPosition {
  JreAssert((posPendingCount_ > 0), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:1216 condition failed: assert posPendingCount > 0;"));
  if (posPendingFP_ != -1) {
    [((OrgApacheLuceneStoreIndexInput *) nil_chk(posIn_)) seekWithLong:posPendingFP_];
    posPendingFP_ = -1;
    if (payPendingFP_ != -1) {
      [((OrgApacheLuceneStoreIndexInput *) nil_chk(payIn_)) seekWithLong:payPendingFP_];
      payPendingFP_ = -1;
    }
    posBufferUpto_ = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
  }
  if (posPendingCount_ > freq_) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_skipPositions(self);
    posPendingCount_ = freq_;
  }
  if (posBufferUpto_ == OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillPositions(self);
    posBufferUpto_ = 0;
  }
  position_ += IOSIntArray_Get(nil_chk(posDeltaBuffer_), posBufferUpto_);
  if (indexHasPayloads_) {
    payloadLength_ = IOSIntArray_Get(nil_chk(payloadLengthBuffer_), posBufferUpto_);
    JreStrongAssign(&((OrgApacheLuceneUtilBytesRef *) nil_chk(payload_))->bytes_, payloadBytes_);
    payload_->offset_ = payloadByteUpto_;
    payload_->length_ = payloadLength_;
    payloadByteUpto_ += payloadLength_;
  }
  if (indexHasOffsets_) {
    startOffset_ = lastStartOffset_ + IOSIntArray_Get(nil_chk(offsetStartDeltaBuffer_), posBufferUpto_);
    endOffset_ = startOffset_ + IOSIntArray_Get(nil_chk(offsetLengthBuffer_), posBufferUpto_);
    lastStartOffset_ = startOffset_;
  }
  posBufferUpto_++;
  posPendingCount_--;
  return position_;
}

- (jint)startOffset {
  return startOffset_;
}

- (jint)endOffset {
  return endOffset_;
}

- (OrgApacheLuceneUtilBytesRef *)getPayload {
  if (payloadLength_ == 0) {
    return nil;
  }
  else {
    return payload_;
  }
}

- (jlong)cost {
  return docFreq_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(encoded_);
  RELEASE_(docDeltaBuffer_);
  RELEASE_(freqBuffer_);
  RELEASE_(posDeltaBuffer_);
  RELEASE_(payloadLengthBuffer_);
  RELEASE_(offsetStartDeltaBuffer_);
  RELEASE_(offsetLengthBuffer_);
  RELEASE_(payloadBytes_);
  RELEASE_(skipper_);
  RELEASE_(startDocIn_);
  RELEASE_(docIn_);
  RELEASE_(posIn_);
  RELEASE_(payIn_);
  RELEASE_(payload_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader:withOrgApacheLuceneIndexFieldInfo:", "EverythingEnum", NULL, 0x1, NULL, NULL },
    { "canReuseWithOrgApacheLuceneStoreIndexInput:withOrgApacheLuceneIndexFieldInfo:", "canReuse", "Z", 0x1, NULL, NULL },
    { "resetWithOrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_IntBlockTermState:withInt:", "reset", "Lorg.apache.lucene.codecs.lucene50.Lucene50PostingsReader$EverythingEnum;", 0x1, "Ljava.io.IOException;", NULL },
    { "freq", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "docID", NULL, "I", 0x1, NULL, NULL },
    { "refillDocs", NULL, "V", 0x2, "Ljava.io.IOException;", NULL },
    { "refillPositions", NULL, "V", 0x2, "Ljava.io.IOException;", NULL },
    { "nextDoc", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "advanceWithInt:", "advance", "I", 0x1, "Ljava.io.IOException;", NULL },
    { "skipPositions", NULL, "V", 0x2, "Ljava.io.IOException;", NULL },
    { "nextPosition", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "startOffset", NULL, "I", 0x1, NULL, NULL },
    { "endOffset", NULL, "I", 0x1, NULL, NULL },
    { "getPayload", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, NULL, NULL },
    { "cost", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.codecs.lucene50.Lucene50PostingsReader;", NULL, NULL, .constantValue.asLong = 0 },
    { "encoded_", NULL, 0x12, "[B", NULL, NULL, .constantValue.asLong = 0 },
    { "docDeltaBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "freqBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "posDeltaBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "payloadLengthBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "offsetStartDeltaBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "offsetLengthBuffer_", NULL, 0x12, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "payloadBytes_", NULL, 0x2, "[B", NULL, NULL, .constantValue.asLong = 0 },
    { "payloadByteUpto_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "payloadLength_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "lastStartOffset_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "startOffset_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "endOffset_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "docBufferUpto_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "posBufferUpto_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "skipper_", NULL, 0x2, "Lorg.apache.lucene.codecs.lucene50.Lucene50SkipReader;", NULL, NULL, .constantValue.asLong = 0 },
    { "skipped_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "startDocIn_", NULL, 0x10, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "docIn_", NULL, 0x0, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "posIn_", NULL, 0x10, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "payIn_", NULL, 0x10, "Lorg.apache.lucene.store.IndexInput;", NULL, NULL, .constantValue.asLong = 0 },
    { "payload_", NULL, 0x10, "Lorg.apache.lucene.util.BytesRef;", NULL, NULL, .constantValue.asLong = 0 },
    { "indexHasOffsets_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "indexHasPayloads_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "docFreq_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "totalTermFreq_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "docUpto_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "doc_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "accum_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "freq_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "position_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "posPendingCount_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "posPendingFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "payPendingFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "docTermStartFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "posTermStartFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "payTermStartFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "lastPosBlockFP_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "skipOffset_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "nextSkipDoc_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "needsOffsets_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "needsPayloads_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "singletonDocID_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum = { 2, "EverythingEnum", "org.apache.lucene.codecs.lucene50", "Lucene50PostingsReader", 0x10, 15, methods, 44, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum;
}

@end

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *self, OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *outer$, OrgApacheLuceneIndexFieldInfo *fieldInfo) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneIndexPostingsEnum_init(self);
  JreStrongAssignAndConsume(&self->docDeltaBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
  JreStrongAssignAndConsume(&self->freqBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
  JreStrongAssignAndConsume(&self->posDeltaBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
  JreStrongAssign(&self->startDocIn_, outer$->docIn_);
  JreStrongAssign(&self->docIn_, nil);
  JreStrongAssign(&self->posIn_, [((OrgApacheLuceneStoreIndexInput *) nil_chk(outer$->posIn_)) clone]);
  JreStrongAssign(&self->payIn_, [((OrgApacheLuceneStoreIndexInput *) nil_chk(outer$->payIn_)) clone]);
  JreStrongAssignAndConsume(&self->encoded_, [IOSByteArray newArrayWithLength:OrgApacheLuceneCodecsLucene50ForUtil_MAX_ENCODED_SIZE]);
  self->indexHasOffsets_ = ([((OrgApacheLuceneIndexIndexOptionsEnum *) nil_chk([((OrgApacheLuceneIndexFieldInfo *) nil_chk(fieldInfo)) getIndexOptions])) compareToWithId:JreLoadStatic(OrgApacheLuceneIndexIndexOptionsEnum, DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS)] >= 0);
  if (self->indexHasOffsets_) {
    JreStrongAssignAndConsume(&self->offsetStartDeltaBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
    JreStrongAssignAndConsume(&self->offsetLengthBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
  }
  else {
    JreStrongAssign(&self->offsetStartDeltaBuffer_, nil);
    JreStrongAssign(&self->offsetLengthBuffer_, nil);
    self->startOffset_ = -1;
    self->endOffset_ = -1;
  }
  self->indexHasPayloads_ = [fieldInfo hasPayloads];
  if (self->indexHasPayloads_) {
    JreStrongAssignAndConsume(&self->payloadLengthBuffer_, [IOSIntArray newArrayWithLength:JreLoadStatic(OrgApacheLuceneCodecsLucene50ForUtil, MAX_DATA_SIZE_)]);
    JreStrongAssignAndConsume(&self->payloadBytes_, [IOSByteArray newArrayWithLength:128]);
    JreStrongAssignAndConsume(&self->payload_, new_OrgApacheLuceneUtilBytesRef_init());
  }
  else {
    JreStrongAssign(&self->payloadLengthBuffer_, nil);
    JreStrongAssign(&self->payloadBytes_, nil);
    JreStrongAssign(&self->payload_, nil);
  }
}

OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *new_OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader *outer$, OrgApacheLuceneIndexFieldInfo *fieldInfo) {
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *self = [OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum alloc];
  OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_initWithOrgApacheLuceneCodecsLucene50Lucene50PostingsReader_withOrgApacheLuceneIndexFieldInfo_(self, outer$, fieldInfo);
  return self;
}

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillDocs(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *self) {
  jint left = self->docFreq_ - self->docUpto_;
  JreAssert((left > 0), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:985 condition failed: assert left > 0;"));
  if (left >= OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
    [((OrgApacheLuceneCodecsLucene50ForUtil *) nil_chk(self->this$0_->forUtil_)) readBlockWithOrgApacheLuceneStoreIndexInput:self->docIn_ withByteArray:self->encoded_ withIntArray:self->docDeltaBuffer_];
    [self->this$0_->forUtil_ readBlockWithOrgApacheLuceneStoreIndexInput:self->docIn_ withByteArray:self->encoded_ withIntArray:self->freqBuffer_];
  }
  else if (self->docFreq_ == 1) {
    *IOSIntArray_GetRef(nil_chk(self->docDeltaBuffer_), 0) = self->singletonDocID_;
    *IOSIntArray_GetRef(nil_chk(self->freqBuffer_), 0) = (jint) self->totalTermFreq_;
  }
  else {
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_readVIntBlockWithOrgApacheLuceneStoreIndexInput_withIntArray_withIntArray_withInt_withBoolean_(self->docIn_, self->docDeltaBuffer_, self->freqBuffer_, left, true);
  }
  self->docBufferUpto_ = 0;
}

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillPositions(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *self) {
  if ([((OrgApacheLuceneStoreIndexInput *) nil_chk(self->posIn_)) getFilePointer] == self->lastPosBlockFP_) {
    jint count = (jint) (self->totalTermFreq_ % OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE);
    jint payloadLength = 0;
    jint offsetLength = 0;
    self->payloadByteUpto_ = 0;
    for (jint i = 0; i < count; i++) {
      jint code = [self->posIn_ readVInt];
      if (self->indexHasPayloads_) {
        if ((code & 1) != 0) {
          payloadLength = [self->posIn_ readVInt];
        }
        *IOSIntArray_GetRef(nil_chk(self->payloadLengthBuffer_), i) = payloadLength;
        *IOSIntArray_GetRef(nil_chk(self->posDeltaBuffer_), i) = JreURShift32(code, 1);
        if (payloadLength != 0) {
          if (self->payloadByteUpto_ + payloadLength > ((IOSByteArray *) nil_chk(self->payloadBytes_))->size_) {
            JreStrongAssign(&self->payloadBytes_, OrgApacheLuceneUtilArrayUtil_growWithByteArray_withInt_(self->payloadBytes_, self->payloadByteUpto_ + payloadLength));
          }
          [self->posIn_ readBytesWithByteArray:self->payloadBytes_ withInt:self->payloadByteUpto_ withInt:payloadLength];
          self->payloadByteUpto_ += payloadLength;
        }
      }
      else {
        *IOSIntArray_GetRef(nil_chk(self->posDeltaBuffer_), i) = code;
      }
      if (self->indexHasOffsets_) {
        jint deltaCode = [self->posIn_ readVInt];
        if ((deltaCode & 1) != 0) {
          offsetLength = [self->posIn_ readVInt];
        }
        *IOSIntArray_GetRef(nil_chk(self->offsetStartDeltaBuffer_), i) = JreURShift32(deltaCode, 1);
        *IOSIntArray_GetRef(nil_chk(self->offsetLengthBuffer_), i) = offsetLength;
      }
    }
    self->payloadByteUpto_ = 0;
  }
  else {
    [((OrgApacheLuceneCodecsLucene50ForUtil *) nil_chk(self->this$0_->forUtil_)) readBlockWithOrgApacheLuceneStoreIndexInput:self->posIn_ withByteArray:self->encoded_ withIntArray:self->posDeltaBuffer_];
    if (self->indexHasPayloads_) {
      if (self->needsPayloads_) {
        [self->this$0_->forUtil_ readBlockWithOrgApacheLuceneStoreIndexInput:self->payIn_ withByteArray:self->encoded_ withIntArray:self->payloadLengthBuffer_];
        jint numBytes = [((OrgApacheLuceneStoreIndexInput *) nil_chk(self->payIn_)) readVInt];
        if (numBytes > ((IOSByteArray *) nil_chk(self->payloadBytes_))->size_) {
          JreStrongAssign(&self->payloadBytes_, OrgApacheLuceneUtilArrayUtil_growWithByteArray_withInt_(self->payloadBytes_, numBytes));
        }
        [self->payIn_ readBytesWithByteArray:self->payloadBytes_ withInt:0 withInt:numBytes];
      }
      else {
        [self->this$0_->forUtil_ skipBlockWithOrgApacheLuceneStoreIndexInput:self->payIn_];
        jint numBytes = [((OrgApacheLuceneStoreIndexInput *) nil_chk(self->payIn_)) readVInt];
        [self->payIn_ seekWithLong:[self->payIn_ getFilePointer] + numBytes];
      }
      self->payloadByteUpto_ = 0;
    }
    if (self->indexHasOffsets_) {
      if (self->needsOffsets_) {
        [self->this$0_->forUtil_ readBlockWithOrgApacheLuceneStoreIndexInput:self->payIn_ withByteArray:self->encoded_ withIntArray:self->offsetStartDeltaBuffer_];
        [self->this$0_->forUtil_ readBlockWithOrgApacheLuceneStoreIndexInput:self->payIn_ withByteArray:self->encoded_ withIntArray:self->offsetLengthBuffer_];
      }
      else {
        [self->this$0_->forUtil_ skipBlockWithOrgApacheLuceneStoreIndexInput:self->payIn_];
        [self->this$0_->forUtil_ skipBlockWithOrgApacheLuceneStoreIndexInput:self->payIn_];
      }
    }
  }
}

void OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_skipPositions(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum *self) {
  jint toSkip = self->posPendingCount_ - self->freq_;
  jint leftInBlock = OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE - self->posBufferUpto_;
  if (toSkip < leftInBlock) {
    jint end = self->posBufferUpto_ + toSkip;
    while (self->posBufferUpto_ < end) {
      if (self->indexHasPayloads_) {
        self->payloadByteUpto_ += IOSIntArray_Get(nil_chk(self->payloadLengthBuffer_), self->posBufferUpto_);
      }
      self->posBufferUpto_++;
    }
  }
  else {
    toSkip -= leftInBlock;
    while (toSkip >= OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE) {
      JreAssert(([((OrgApacheLuceneStoreIndexInput *) nil_chk(self->posIn_)) getFilePointer] != self->lastPosBlockFP_), (@"org/apache/lucene/codecs/lucene50/Lucene50PostingsReader.java:1181 condition failed: assert posIn.getFilePointer() != lastPosBlockFP;"));
      [((OrgApacheLuceneCodecsLucene50ForUtil *) nil_chk(self->this$0_->forUtil_)) skipBlockWithOrgApacheLuceneStoreIndexInput:self->posIn_];
      if (self->indexHasPayloads_) {
        [self->this$0_->forUtil_ skipBlockWithOrgApacheLuceneStoreIndexInput:self->payIn_];
        jint numBytes = [((OrgApacheLuceneStoreIndexInput *) nil_chk(self->payIn_)) readVInt];
        [self->payIn_ seekWithLong:[self->payIn_ getFilePointer] + numBytes];
      }
      if (self->indexHasOffsets_) {
        [self->this$0_->forUtil_ skipBlockWithOrgApacheLuceneStoreIndexInput:self->payIn_];
        [self->this$0_->forUtil_ skipBlockWithOrgApacheLuceneStoreIndexInput:self->payIn_];
      }
      toSkip -= OrgApacheLuceneCodecsLucene50Lucene50PostingsFormat_BLOCK_SIZE;
    }
    OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum_refillPositions(self);
    self->payloadByteUpto_ = 0;
    self->posBufferUpto_ = 0;
    while (self->posBufferUpto_ < toSkip) {
      if (self->indexHasPayloads_) {
        self->payloadByteUpto_ += IOSIntArray_Get(nil_chk(self->payloadLengthBuffer_), self->posBufferUpto_);
      }
      self->posBufferUpto_++;
    }
  }
  self->position_ = 0;
  self->lastStartOffset_ = 0;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneCodecsLucene50Lucene50PostingsReader_EverythingEnum)
