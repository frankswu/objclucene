//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/index/CoalescedUpdates.java
//

#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Integer.h"
#include "java/lang/Iterable.h"
#include "java/lang/Long.h"
#include "java/lang/UnsupportedOperationException.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "org/apache/lucene/index/BufferedUpdates.h"
#include "org/apache/lucene/index/BufferedUpdatesStream.h"
#include "org/apache/lucene/index/CoalescedUpdates.h"
#include "org/apache/lucene/index/DocValuesUpdate.h"
#include "org/apache/lucene/index/FieldTermIterator.h"
#include "org/apache/lucene/index/FrozenBufferedUpdates.h"
#include "org/apache/lucene/index/MergedPrefixCodedTermsIterator.h"
#include "org/apache/lucene/index/PrefixCodedTerms.h"
#include "org/apache/lucene/index/Term.h"
#include "org/apache/lucene/search/Query.h"
#include "org/apache/lucene/util/BytesRef.h"

@interface OrgApacheLuceneIndexCoalescedUpdates_$1 : NSObject < JavaLangIterable > {
 @public
  OrgApacheLuceneIndexCoalescedUpdates *this$0_;
}

- (id<JavaUtilIterator>)iterator;

- (instancetype)initWithOrgApacheLuceneIndexCoalescedUpdates:(OrgApacheLuceneIndexCoalescedUpdates *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneIndexCoalescedUpdates_$1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexCoalescedUpdates_$1, this$0_, OrgApacheLuceneIndexCoalescedUpdates *)

__attribute__((unused)) static void OrgApacheLuceneIndexCoalescedUpdates_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_(OrgApacheLuceneIndexCoalescedUpdates_$1 *self, OrgApacheLuceneIndexCoalescedUpdates *outer$);

__attribute__((unused)) static OrgApacheLuceneIndexCoalescedUpdates_$1 *new_OrgApacheLuceneIndexCoalescedUpdates_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_(OrgApacheLuceneIndexCoalescedUpdates *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneIndexCoalescedUpdates_$1 *create_OrgApacheLuceneIndexCoalescedUpdates_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_(OrgApacheLuceneIndexCoalescedUpdates *outer$);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneIndexCoalescedUpdates_$1)

@interface OrgApacheLuceneIndexCoalescedUpdates_$1_$1 : NSObject < JavaUtilIterator > {
 @public
  id<JavaUtilIterator> iter_;
}

- (jboolean)hasNext;

- (OrgApacheLuceneIndexBufferedUpdatesStream_QueryAndLimit *)next;

- (void)remove;

- (instancetype)initWithOrgApacheLuceneIndexCoalescedUpdates_$1:(OrgApacheLuceneIndexCoalescedUpdates_$1 *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneIndexCoalescedUpdates_$1_$1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexCoalescedUpdates_$1_$1, iter_, id<JavaUtilIterator>)

__attribute__((unused)) static void OrgApacheLuceneIndexCoalescedUpdates_$1_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_$1_(OrgApacheLuceneIndexCoalescedUpdates_$1_$1 *self, OrgApacheLuceneIndexCoalescedUpdates_$1 *outer$);

__attribute__((unused)) static OrgApacheLuceneIndexCoalescedUpdates_$1_$1 *new_OrgApacheLuceneIndexCoalescedUpdates_$1_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_$1_(OrgApacheLuceneIndexCoalescedUpdates_$1 *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneIndexCoalescedUpdates_$1_$1 *create_OrgApacheLuceneIndexCoalescedUpdates_$1_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_$1_(OrgApacheLuceneIndexCoalescedUpdates_$1 *outer$);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneIndexCoalescedUpdates_$1_$1)

@implementation OrgApacheLuceneIndexCoalescedUpdates

- (NSString *)description {
  return JreStrcat("$I$J$I$I$IC", @"CoalescedUpdates(termSets=", [((id<JavaUtilList>) nil_chk(terms_)) size], @",totalTermCount=", totalTermCount_, @",queries=", [((id<JavaUtilMap>) nil_chk(queries_)) size], @",numericDVUpdates=", [((id<JavaUtilList>) nil_chk(numericDVUpdates_)) size], @",binaryDVUpdates=", [((id<JavaUtilList>) nil_chk(binaryDVUpdates_)) size], ')');
}

- (void)updateWithOrgApacheLuceneIndexFrozenBufferedUpdates:(OrgApacheLuceneIndexFrozenBufferedUpdates *)inArg {
  totalTermCount_ += [((OrgApacheLuceneIndexPrefixCodedTerms *) nil_chk(((OrgApacheLuceneIndexFrozenBufferedUpdates *) nil_chk(inArg))->terms_)) size];
  [((id<JavaUtilList>) nil_chk(terms_)) addWithId:inArg->terms_];
  for (jint queryIdx = 0; queryIdx < ((IOSObjectArray *) nil_chk(inArg->queries_))->size_; queryIdx++) {
    OrgApacheLuceneSearchQuery *query = IOSObjectArray_Get(inArg->queries_, queryIdx);
    [((id<JavaUtilMap>) nil_chk(queries_)) putWithId:query withId:JreLoadStatic(OrgApacheLuceneIndexBufferedUpdates, MAX_INT)];
  }
  {
    IOSObjectArray *a__ = inArg->numericDVUpdates_;
    OrgApacheLuceneIndexDocValuesUpdate_NumericDocValuesUpdate * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    OrgApacheLuceneIndexDocValuesUpdate_NumericDocValuesUpdate * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      OrgApacheLuceneIndexDocValuesUpdate_NumericDocValuesUpdate *nu = *b__++;
      OrgApacheLuceneIndexDocValuesUpdate_NumericDocValuesUpdate *clone = create_OrgApacheLuceneIndexDocValuesUpdate_NumericDocValuesUpdate_initWithOrgApacheLuceneIndexTerm_withNSString_withJavaLangLong_(((OrgApacheLuceneIndexDocValuesUpdate_NumericDocValuesUpdate *) nil_chk(nu))->term_, nu->field_, (JavaLangLong *) cast_chk(nu->value_, [JavaLangLong class]));
      clone->docIDUpto_ = JavaLangInteger_MAX_VALUE;
      [((id<JavaUtilList>) nil_chk(numericDVUpdates_)) addWithId:clone];
    }
  }
  {
    IOSObjectArray *a__ = inArg->binaryDVUpdates_;
    OrgApacheLuceneIndexDocValuesUpdate_BinaryDocValuesUpdate * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    OrgApacheLuceneIndexDocValuesUpdate_BinaryDocValuesUpdate * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      OrgApacheLuceneIndexDocValuesUpdate_BinaryDocValuesUpdate *bu = *b__++;
      OrgApacheLuceneIndexDocValuesUpdate_BinaryDocValuesUpdate *clone = create_OrgApacheLuceneIndexDocValuesUpdate_BinaryDocValuesUpdate_initWithOrgApacheLuceneIndexTerm_withNSString_withOrgApacheLuceneUtilBytesRef_(((OrgApacheLuceneIndexDocValuesUpdate_BinaryDocValuesUpdate *) nil_chk(bu))->term_, bu->field_, (OrgApacheLuceneUtilBytesRef *) cast_chk(bu->value_, [OrgApacheLuceneUtilBytesRef class]));
      clone->docIDUpto_ = JavaLangInteger_MAX_VALUE;
      [((id<JavaUtilList>) nil_chk(binaryDVUpdates_)) addWithId:clone];
    }
  }
}

- (OrgApacheLuceneIndexFieldTermIterator *)termIterator {
  if ([((id<JavaUtilList>) nil_chk(terms_)) size] == 1) {
    return [((OrgApacheLuceneIndexPrefixCodedTerms *) nil_chk([terms_ getWithInt:0])) iterator];
  }
  else {
    return create_OrgApacheLuceneIndexMergedPrefixCodedTermsIterator_initWithJavaUtilList_(terms_);
  }
}

- (id<JavaLangIterable>)queriesIterable {
  return create_OrgApacheLuceneIndexCoalescedUpdates_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_(self);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgApacheLuceneIndexCoalescedUpdates_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)dealloc {
  RELEASE_(queries_);
  RELEASE_(terms_);
  RELEASE_(numericDVUpdates_);
  RELEASE_(binaryDVUpdates_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "updateWithOrgApacheLuceneIndexFrozenBufferedUpdates:", "update", "V", 0x0, NULL, NULL },
    { "termIterator", NULL, "Lorg.apache.lucene.index.FieldTermIterator;", 0x1, NULL, NULL },
    { "queriesIterable", NULL, "Ljava.lang.Iterable;", 0x1, NULL, "()Ljava/lang/Iterable<Lorg/apache/lucene/index/BufferedUpdatesStream$QueryAndLimit;>;" },
    { "init", "CoalescedUpdates", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "queries_", NULL, 0x10, "Ljava.util.Map;", NULL, "Ljava/util/Map<Lorg/apache/lucene/search/Query;Ljava/lang/Integer;>;", .constantValue.asLong = 0 },
    { "terms_", NULL, 0x10, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/apache/lucene/index/PrefixCodedTerms;>;", .constantValue.asLong = 0 },
    { "numericDVUpdates_", NULL, 0x10, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/apache/lucene/index/DocValuesUpdate$NumericDocValuesUpdate;>;", .constantValue.asLong = 0 },
    { "binaryDVUpdates_", NULL, 0x10, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/apache/lucene/index/DocValuesUpdate$BinaryDocValuesUpdate;>;", .constantValue.asLong = 0 },
    { "totalTermCount_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneIndexCoalescedUpdates = { 2, "CoalescedUpdates", "org.apache.lucene.index", NULL, 0x0, 5, methods, 5, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneIndexCoalescedUpdates;
}

@end

void OrgApacheLuceneIndexCoalescedUpdates_init(OrgApacheLuceneIndexCoalescedUpdates *self) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->queries_, new_JavaUtilHashMap_init());
  JreStrongAssignAndConsume(&self->terms_, new_JavaUtilArrayList_init());
  JreStrongAssignAndConsume(&self->numericDVUpdates_, new_JavaUtilArrayList_init());
  JreStrongAssignAndConsume(&self->binaryDVUpdates_, new_JavaUtilArrayList_init());
}

OrgApacheLuceneIndexCoalescedUpdates *new_OrgApacheLuceneIndexCoalescedUpdates_init() {
  J2OBJC_NEW_IMPL(OrgApacheLuceneIndexCoalescedUpdates, init)
}

OrgApacheLuceneIndexCoalescedUpdates *create_OrgApacheLuceneIndexCoalescedUpdates_init() {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneIndexCoalescedUpdates, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexCoalescedUpdates)

@implementation OrgApacheLuceneIndexCoalescedUpdates_$1

- (id<JavaUtilIterator>)iterator {
  return create_OrgApacheLuceneIndexCoalescedUpdates_$1_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_$1_(self);
}

- (instancetype)initWithOrgApacheLuceneIndexCoalescedUpdates:(OrgApacheLuceneIndexCoalescedUpdates *)outer$ {
  OrgApacheLuceneIndexCoalescedUpdates_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_(self, outer$);
  return self;
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "iterator", NULL, "Ljava.util.Iterator;", 0x1, NULL, "()Ljava/util/Iterator<Lorg/apache/lucene/index/BufferedUpdatesStream$QueryAndLimit;>;" },
    { "initWithOrgApacheLuceneIndexCoalescedUpdates:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.index.CoalescedUpdates;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgApacheLuceneIndexCoalescedUpdates", "queriesIterable" };
  static const J2ObjcClassInfo _OrgApacheLuceneIndexCoalescedUpdates_$1 = { 2, "", "org.apache.lucene.index", "CoalescedUpdates", 0x8008, 2, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Ljava/lang/Iterable<Lorg/apache/lucene/index/BufferedUpdatesStream$QueryAndLimit;>;" };
  return &_OrgApacheLuceneIndexCoalescedUpdates_$1;
}

@end

void OrgApacheLuceneIndexCoalescedUpdates_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_(OrgApacheLuceneIndexCoalescedUpdates_$1 *self, OrgApacheLuceneIndexCoalescedUpdates *outer$) {
  JreStrongAssign(&self->this$0_, outer$);
  NSObject_init(self);
}

OrgApacheLuceneIndexCoalescedUpdates_$1 *new_OrgApacheLuceneIndexCoalescedUpdates_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_(OrgApacheLuceneIndexCoalescedUpdates *outer$) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneIndexCoalescedUpdates_$1, initWithOrgApacheLuceneIndexCoalescedUpdates_, outer$)
}

OrgApacheLuceneIndexCoalescedUpdates_$1 *create_OrgApacheLuceneIndexCoalescedUpdates_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_(OrgApacheLuceneIndexCoalescedUpdates *outer$) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneIndexCoalescedUpdates_$1, initWithOrgApacheLuceneIndexCoalescedUpdates_, outer$)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexCoalescedUpdates_$1)

@implementation OrgApacheLuceneIndexCoalescedUpdates_$1_$1

- (jboolean)hasNext {
  return [((id<JavaUtilIterator>) nil_chk(iter_)) hasNext];
}

- (OrgApacheLuceneIndexBufferedUpdatesStream_QueryAndLimit *)next {
  id<JavaUtilMap_Entry> ent = [((id<JavaUtilIterator>) nil_chk(iter_)) next];
  return create_OrgApacheLuceneIndexBufferedUpdatesStream_QueryAndLimit_initWithOrgApacheLuceneSearchQuery_withInt_([((id<JavaUtilMap_Entry>) nil_chk(ent)) getKey], [((JavaLangInteger *) nil_chk([ent getValue])) intValue]);
}

- (void)remove {
  @throw create_JavaLangUnsupportedOperationException_init();
}

- (instancetype)initWithOrgApacheLuceneIndexCoalescedUpdates_$1:(OrgApacheLuceneIndexCoalescedUpdates_$1 *)outer$ {
  OrgApacheLuceneIndexCoalescedUpdates_$1_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_$1_(self, outer$);
  return self;
}

- (void)dealloc {
  RELEASE_(iter_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "hasNext", NULL, "Z", 0x1, NULL, NULL },
    { "next", NULL, "Lorg.apache.lucene.index.BufferedUpdatesStream$QueryAndLimit;", 0x1, NULL, NULL },
    { "remove", NULL, "V", 0x1, NULL, NULL },
    { "initWithOrgApacheLuceneIndexCoalescedUpdates_$1:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "iter_", NULL, 0x12, "Ljava.util.Iterator;", NULL, "Ljava/util/Iterator<Ljava/util/Map$Entry<Lorg/apache/lucene/search/Query;Ljava/lang/Integer;>;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgApacheLuceneIndexCoalescedUpdates_$1", "iterator" };
  static const J2ObjcClassInfo _OrgApacheLuceneIndexCoalescedUpdates_$1_$1 = { 2, "", "org.apache.lucene.index", "CoalescedUpdates$", 0x8008, 4, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Ljava/util/Iterator<Lorg/apache/lucene/index/BufferedUpdatesStream$QueryAndLimit;>;" };
  return &_OrgApacheLuceneIndexCoalescedUpdates_$1_$1;
}

@end

void OrgApacheLuceneIndexCoalescedUpdates_$1_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_$1_(OrgApacheLuceneIndexCoalescedUpdates_$1_$1 *self, OrgApacheLuceneIndexCoalescedUpdates_$1 *outer$) {
  NSObject_init(self);
  JreStrongAssign(&self->iter_, [((id<JavaUtilSet>) nil_chk([((id<JavaUtilMap>) nil_chk(outer$->this$0_->queries_)) entrySet])) iterator]);
}

OrgApacheLuceneIndexCoalescedUpdates_$1_$1 *new_OrgApacheLuceneIndexCoalescedUpdates_$1_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_$1_(OrgApacheLuceneIndexCoalescedUpdates_$1 *outer$) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneIndexCoalescedUpdates_$1_$1, initWithOrgApacheLuceneIndexCoalescedUpdates_$1_, outer$)
}

OrgApacheLuceneIndexCoalescedUpdates_$1_$1 *create_OrgApacheLuceneIndexCoalescedUpdates_$1_$1_initWithOrgApacheLuceneIndexCoalescedUpdates_$1_(OrgApacheLuceneIndexCoalescedUpdates_$1 *outer$) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneIndexCoalescedUpdates_$1_$1, initWithOrgApacheLuceneIndexCoalescedUpdates_$1_, outer$)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexCoalescedUpdates_$1_$1)
