//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/index/DocumentsWriterDeleteQueue.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/Integer.h"
#include "java/util/concurrent/atomic/AtomicInteger.h"
#include "java/util/concurrent/atomic/AtomicLong.h"
#include "java/util/concurrent/atomic/AtomicReferenceFieldUpdater.h"
#include "java/util/concurrent/locks/ReentrantLock.h"
#include "org/apache/lucene/index/BufferedUpdates.h"
#include "org/apache/lucene/index/DocumentsWriterDeleteQueue.h"
#include "org/apache/lucene/index/FrozenBufferedUpdates.h"
#include "org/apache/lucene/index/Term.h"

#pragma clang diagnostic ignored "-Wprotocol"

@interface OrgApacheLuceneIndexDocumentsWriterDeleteQueue () {
 @public
  volatile_id tail_;
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *globalSlice_;
  OrgApacheLuceneIndexBufferedUpdates *globalBufferedUpdates_;
  JavaUtilConcurrentLocksReentrantLock *globalBufferLock_;
}

@end

J2OBJC_VOLATILE_FIELD_SETTER(OrgApacheLuceneIndexDocumentsWriterDeleteQueue, tail_, OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexDocumentsWriterDeleteQueue, globalSlice_, OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexDocumentsWriterDeleteQueue, globalBufferedUpdates_, OrgApacheLuceneIndexBufferedUpdates *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneIndexDocumentsWriterDeleteQueue, globalBufferLock_, JavaUtilConcurrentLocksReentrantLock *)

static JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *OrgApacheLuceneIndexDocumentsWriterDeleteQueue_tailUpdater_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneIndexDocumentsWriterDeleteQueue, tailUpdater_, JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *)

@interface OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode : OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node

- (instancetype)initWithOrgApacheLuceneIndexTerm:(OrgApacheLuceneIndexTerm *)term;

- (void)applyWithOrgApacheLuceneIndexBufferedUpdates:(OrgApacheLuceneIndexBufferedUpdates *)bufferedDeletes
                                             withInt:(jint)docIDUpto;

- (NSString *)description;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode)

__attribute__((unused)) static void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode_initWithOrgApacheLuceneIndexTerm_(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode *self, OrgApacheLuceneIndexTerm *term);

__attribute__((unused)) static OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode_initWithOrgApacheLuceneIndexTerm_(OrgApacheLuceneIndexTerm *term) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode)

@interface OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode : OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode)

__attribute__((unused)) static void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode_init(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode *self);

__attribute__((unused)) static OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode)

@interface OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode : OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode)

__attribute__((unused)) static void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode_init(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode *self);

__attribute__((unused)) static OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode)

@interface OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode : OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode)

__attribute__((unused)) static void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode_init(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode *self);

__attribute__((unused)) static OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode)

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneIndexDocumentsWriterDeleteQueue)

@implementation OrgApacheLuceneIndexDocumentsWriterDeleteQueue

- (instancetype)init {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_init(self);
  return self;
}

- (instancetype)initWithLong:(jlong)generation {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithLong_(self, generation);
  return self;
}

- (instancetype)initWithOrgApacheLuceneIndexBufferedUpdates:(OrgApacheLuceneIndexBufferedUpdates *)globalBufferedUpdates
                                                   withLong:(jlong)generation {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithOrgApacheLuceneIndexBufferedUpdates_withLong_(self, globalBufferedUpdates, generation);
  return self;
}

- (void)addWithOrgApacheLuceneIndexTerm:(OrgApacheLuceneIndexTerm *)term
withOrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice:(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *)slice {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode *termNode = [new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode_initWithOrgApacheLuceneIndexTerm_(term) autorelease];
  [self addWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:termNode];
  JreStrongAssign(&((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *) nil_chk(slice))->sliceTail_, termNode);
  JreAssert((slice->sliceHead_ != slice->sliceTail_), (@"slice head and tail must differ after add"));
  [self tryApplyGlobalSlice];
}

- (void)addWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *)item {
  while (YES) {
    OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *currentTail = JreLoadVolatileId(&self->tail_);
    OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *tailNext = JreLoadVolatileId(&((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *) nil_chk(currentTail))->next_);
    if (JreLoadVolatileId(&tail_) == currentTail) {
      if (tailNext != nil) {
        [((JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *) nil_chk(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_tailUpdater_)) compareAndSetWithId:self withId:currentTail withId:tailNext];
      }
      else {
        if ([currentTail casNextWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:nil withOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:item]) {
          [((JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *) nil_chk(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_tailUpdater_)) compareAndSetWithId:self withId:currentTail withId:item];
          return;
        }
      }
    }
  }
}

- (jboolean)anyChanges {
  [((JavaUtilConcurrentLocksReentrantLock *) nil_chk(globalBufferLock_)) lock];
  @try {
    return [((OrgApacheLuceneIndexBufferedUpdates *) nil_chk(globalBufferedUpdates_)) any] || ![((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *) nil_chk(globalSlice_)) isEmpty] || globalSlice_->sliceTail_ != JreLoadVolatileId(&tail_) || JreLoadVolatileId(&((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *) nil_chk(JreLoadVolatileId(&tail_)))->next_) != nil;
  }
  @finally {
    [globalBufferLock_ unlock];
  }
}

- (void)tryApplyGlobalSlice {
  if ([((JavaUtilConcurrentLocksReentrantLock *) nil_chk(globalBufferLock_)) tryLock]) {
    @try {
      if ([self updateSliceWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice:globalSlice_]) {
        [((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *) nil_chk(globalSlice_)) applyWithOrgApacheLuceneIndexBufferedUpdates:globalBufferedUpdates_ withInt:[((JavaLangInteger *) nil_chk(JreLoadStatic(OrgApacheLuceneIndexBufferedUpdates, MAX_INT_))) intValue]];
      }
    }
    @finally {
      [globalBufferLock_ unlock];
    }
  }
}

- (OrgApacheLuceneIndexFrozenBufferedUpdates *)freezeGlobalBufferWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice:(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *)callerSlice {
  [((JavaUtilConcurrentLocksReentrantLock *) nil_chk(globalBufferLock_)) lock];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *currentTail = JreLoadVolatileId(&tail_);
  if (callerSlice != nil) {
    JreStrongAssign(&callerSlice->sliceTail_, currentTail);
  }
  @try {
    if (((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *) nil_chk(globalSlice_))->sliceTail_ != currentTail) {
      JreStrongAssign(&globalSlice_->sliceTail_, currentTail);
      [globalSlice_ applyWithOrgApacheLuceneIndexBufferedUpdates:globalBufferedUpdates_ withInt:[((JavaLangInteger *) nil_chk(JreLoadStatic(OrgApacheLuceneIndexBufferedUpdates, MAX_INT_))) intValue]];
    }
    OrgApacheLuceneIndexFrozenBufferedUpdates *packet = [new_OrgApacheLuceneIndexFrozenBufferedUpdates_initWithOrgApacheLuceneIndexBufferedUpdates_withBoolean_(globalBufferedUpdates_, NO) autorelease];
    [((OrgApacheLuceneIndexBufferedUpdates *) nil_chk(globalBufferedUpdates_)) clear];
    return packet;
  }
  @finally {
    [globalBufferLock_ unlock];
  }
}

- (OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *)newSlice {
  return [new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice_initWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_(JreLoadVolatileId(&tail_)) autorelease];
}

- (jboolean)updateSliceWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice:(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *)slice {
  if (((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *) nil_chk(slice))->sliceTail_ != JreLoadVolatileId(&tail_)) {
    JreStrongAssign(&slice->sliceTail_, JreLoadVolatileId(&tail_));
    return YES;
  }
  return NO;
}

- (jint)numGlobalTermDeletes {
  return [((JavaUtilConcurrentAtomicAtomicInteger *) nil_chk(((OrgApacheLuceneIndexBufferedUpdates *) nil_chk(globalBufferedUpdates_))->numTermDeletes_)) get];
}

- (void)clear {
  [((JavaUtilConcurrentLocksReentrantLock *) nil_chk(globalBufferLock_)) lock];
  @try {
    OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *currentTail = JreLoadVolatileId(&tail_);
    JreStrongAssign(&((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *) nil_chk(globalSlice_))->sliceHead_, JreStrongAssign(&globalSlice_->sliceTail_, currentTail));
    [((OrgApacheLuceneIndexBufferedUpdates *) nil_chk(globalBufferedUpdates_)) clear];
  }
  @finally {
    [globalBufferLock_ unlock];
  }
}

- (jlong)ramBytesUsed {
  return [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(((OrgApacheLuceneIndexBufferedUpdates *) nil_chk(globalBufferedUpdates_))->bytesUsed_)) get];
}

- (NSString *)description {
  return JreStrcat("$J$", @"DWDQ: [ generation: ", generation_, @" ]");
}

- (void)dealloc {
  JreReleaseVolatile(&tail_);
  RELEASE_(globalSlice_);
  RELEASE_(globalBufferedUpdates_);
  RELEASE_(globalBufferLock_);
  [super dealloc];
}

- (void)__javaClone {
  [super __javaClone];
  JreRetainVolatile(&tail_);
}

+ (void)initialize {
  if (self == [OrgApacheLuceneIndexDocumentsWriterDeleteQueue class]) {
    JreStrongAssign(&OrgApacheLuceneIndexDocumentsWriterDeleteQueue_tailUpdater_, JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater_newUpdaterWithIOSClass_withIOSClass_withNSString_(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_class_(), OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_class_(), @"tail"));
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneIndexDocumentsWriterDeleteQueue)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "DocumentsWriterDeleteQueue", NULL, 0x0, NULL, NULL },
    { "initWithLong:", "DocumentsWriterDeleteQueue", NULL, 0x0, NULL, NULL },
    { "initWithOrgApacheLuceneIndexBufferedUpdates:withLong:", "DocumentsWriterDeleteQueue", NULL, 0x0, NULL, NULL },
    { "addWithOrgApacheLuceneIndexTerm:withOrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice:", "add", "V", 0x0, NULL, NULL },
    { "addWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:", "add", "V", 0x0, NULL, NULL },
    { "anyChanges", NULL, "Z", 0x0, NULL, NULL },
    { "tryApplyGlobalSlice", NULL, "V", 0x0, NULL, NULL },
    { "freezeGlobalBufferWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice:", "freezeGlobalBuffer", "Lorg.apache.lucene.index.FrozenBufferedUpdates;", 0x0, NULL, NULL },
    { "newSlice", NULL, "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$DeleteSlice;", 0x0, NULL, NULL },
    { "updateSliceWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice:", "updateSlice", "Z", 0x0, NULL, NULL },
    { "numGlobalTermDeletes", NULL, "I", 0x1, NULL, NULL },
    { "clear", NULL, "V", 0x0, NULL, NULL },
    { "ramBytesUsed", NULL, "J", 0x1, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "tail_", NULL, 0x42, "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$Node;", NULL, "Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node<*>;", .constantValue.asLong = 0 },
    { "tailUpdater_", NULL, 0x1a, "Ljava.util.concurrent.atomic.AtomicReferenceFieldUpdater;", &OrgApacheLuceneIndexDocumentsWriterDeleteQueue_tailUpdater_, "Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater<Lorg/apache/lucene/index/DocumentsWriterDeleteQueue;Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node;>;", .constantValue.asLong = 0 },
    { "globalSlice_", NULL, 0x12, "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$DeleteSlice;", NULL, NULL, .constantValue.asLong = 0 },
    { "globalBufferedUpdates_", NULL, 0x12, "Lorg.apache.lucene.index.BufferedUpdates;", NULL, NULL, .constantValue.asLong = 0 },
    { "globalBufferLock_", NULL, 0x12, "Ljava.util.concurrent.locks.ReentrantLock;", NULL, NULL, .constantValue.asLong = 0 },
    { "generation_", NULL, 0x10, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$DeleteSlice;", "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$Node;", "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$TermNode;", "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$QueryArrayNode;", "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$TermArrayNode;", "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$DocValuesUpdatesNode;"};
  static const J2ObjcClassInfo _OrgApacheLuceneIndexDocumentsWriterDeleteQueue = { 2, "DocumentsWriterDeleteQueue", "org.apache.lucene.index", NULL, 0x10, 14, methods, 6, fields, 0, NULL, 6, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneIndexDocumentsWriterDeleteQueue;
}

@end

void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_init(OrgApacheLuceneIndexDocumentsWriterDeleteQueue *self) {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithLong_(self, 0);
}

OrgApacheLuceneIndexDocumentsWriterDeleteQueue *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_init() {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue *self = [OrgApacheLuceneIndexDocumentsWriterDeleteQueue alloc];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_init(self);
  return self;
}

void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithLong_(OrgApacheLuceneIndexDocumentsWriterDeleteQueue *self, jlong generation) {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithOrgApacheLuceneIndexBufferedUpdates_withLong_(self, [new_OrgApacheLuceneIndexBufferedUpdates_init() autorelease], generation);
}

OrgApacheLuceneIndexDocumentsWriterDeleteQueue *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithLong_(jlong generation) {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue *self = [OrgApacheLuceneIndexDocumentsWriterDeleteQueue alloc];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithLong_(self, generation);
  return self;
}

void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithOrgApacheLuceneIndexBufferedUpdates_withLong_(OrgApacheLuceneIndexDocumentsWriterDeleteQueue *self, OrgApacheLuceneIndexBufferedUpdates *globalBufferedUpdates, jlong generation) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->globalBufferLock_, new_JavaUtilConcurrentLocksReentrantLock_init());
  JreStrongAssign(&self->globalBufferedUpdates_, globalBufferedUpdates);
  self->generation_ = generation;
  JreVolatileStrongAssignAndConsume(&self->tail_, new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_initWithId_(nil));
  JreStrongAssignAndConsume(&self->globalSlice_, new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice_initWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_(JreLoadVolatileId(&self->tail_)));
}

OrgApacheLuceneIndexDocumentsWriterDeleteQueue *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithOrgApacheLuceneIndexBufferedUpdates_withLong_(OrgApacheLuceneIndexBufferedUpdates *globalBufferedUpdates, jlong generation) {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue *self = [OrgApacheLuceneIndexDocumentsWriterDeleteQueue alloc];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_initWithOrgApacheLuceneIndexBufferedUpdates_withLong_(self, globalBufferedUpdates, generation);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexDocumentsWriterDeleteQueue)

@implementation OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice

- (instancetype)initWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *)currentTail {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice_initWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_(self, currentTail);
  return self;
}

- (void)applyWithOrgApacheLuceneIndexBufferedUpdates:(OrgApacheLuceneIndexBufferedUpdates *)del
                                             withInt:(jint)docIDUpto {
  if (sliceHead_ == sliceTail_) {
    return;
  }
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *current = sliceHead_;
  do {
    current = JreLoadVolatileId(&((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *) nil_chk(current))->next_);
    JreAssert((current != nil), (@"slice property violated between the head on the tail must not be a null node"));
    [((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *) nil_chk(current)) applyWithOrgApacheLuceneIndexBufferedUpdates:del withInt:docIDUpto];
  }
  while (current != sliceTail_);
  [self reset];
}

- (void)reset {
  JreStrongAssign(&sliceHead_, sliceTail_);
}

- (jboolean)isTailItemWithId:(id)item {
  return ((OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *) nil_chk(sliceTail_))->item_ == item;
}

- (jboolean)isEmpty {
  return sliceHead_ == sliceTail_;
}

- (void)dealloc {
  RELEASE_(sliceHead_);
  RELEASE_(sliceTail_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:", "DeleteSlice", NULL, 0x0, NULL, NULL },
    { "applyWithOrgApacheLuceneIndexBufferedUpdates:withInt:", "apply", "V", 0x0, NULL, NULL },
    { "reset", NULL, "V", 0x0, NULL, NULL },
    { "isTailItemWithId:", "isTailItem", "Z", 0x0, NULL, NULL },
    { "isEmpty", NULL, "Z", 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "sliceHead_", NULL, 0x0, "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$Node;", NULL, "Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node<*>;", .constantValue.asLong = 0 },
    { "sliceTail_", NULL, 0x0, "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$Node;", NULL, "Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node<*>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice = { 2, "DeleteSlice", "org.apache.lucene.index", "DocumentsWriterDeleteQueue", 0x8, 5, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice;
}

@end

void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice_initWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *self, OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *currentTail) {
  NSObject_init(self);
  JreAssert((currentTail != nil), (@"org/apache/lucene/index/DocumentsWriterDeleteQueue.java:262 condition failed: assert currentTail != null;"));
  JreStrongAssign(&self->sliceHead_, JreStrongAssign(&self->sliceTail_, currentTail));
}

OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice_initWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *currentTail) {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice *self = [OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice alloc];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice_initWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_(self, currentTail);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DeleteSlice)

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node)

JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_nextUpdater_;

@implementation OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node

- (instancetype)initWithId:(id)item {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_initWithId_(self, item);
  return self;
}

- (void)applyWithOrgApacheLuceneIndexBufferedUpdates:(OrgApacheLuceneIndexBufferedUpdates *)bufferedDeletes
                                             withInt:(jint)docIDUpto {
  @throw [new_JavaLangIllegalStateException_initWithNSString_(@"sentinel item must never be applied") autorelease];
}

- (jboolean)casNextWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *)cmp
                   withOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *)val {
  return [((JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *) nil_chk(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_nextUpdater_)) compareAndSetWithId:self withId:cmp withId:val];
}

- (void)dealloc {
  JreReleaseVolatile(&next_);
  RELEASE_(item_);
  [super dealloc];
}

- (void)__javaClone {
  [super __javaClone];
  JreRetainVolatile(&next_);
}

+ (void)initialize {
  if (self == [OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node class]) {
    JreStrongAssign(&OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_nextUpdater_, JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater_newUpdaterWithIOSClass_withIOSClass_withNSString_(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_class_(), OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_class_(), @"next"));
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithId:", "Node", NULL, 0x0, NULL, "(TT;)V" },
    { "applyWithOrgApacheLuceneIndexBufferedUpdates:withInt:", "apply", "V", 0x0, NULL, NULL },
    { "casNextWithOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:withOrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node:", "casNext", "Z", 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "next_", NULL, 0x40, "Lorg.apache.lucene.index.DocumentsWriterDeleteQueue$Node;", NULL, "Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node<*>;", .constantValue.asLong = 0 },
    { "item_", NULL, 0x10, "TT;", NULL, "TT;", .constantValue.asLong = 0 },
    { "nextUpdater_", NULL, 0x18, "Ljava.util.concurrent.atomic.AtomicReferenceFieldUpdater;", &OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_nextUpdater_, "Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater<Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node;Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node = { 2, "Node", "org.apache.lucene.index", "DocumentsWriterDeleteQueue", 0xa, 3, methods, 3, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;" };
  return &_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node;
}

@end

void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_initWithId_(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *self, id item) {
  NSObject_init(self);
  JreStrongAssign(&self->item_, item);
}

OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_initWithId_(id item) {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node *self = [OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node alloc];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_initWithId_(self, item);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node)

@implementation OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode

- (instancetype)initWithOrgApacheLuceneIndexTerm:(OrgApacheLuceneIndexTerm *)term {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode_initWithOrgApacheLuceneIndexTerm_(self, term);
  return self;
}

- (void)applyWithOrgApacheLuceneIndexBufferedUpdates:(OrgApacheLuceneIndexBufferedUpdates *)bufferedDeletes
                                             withInt:(jint)docIDUpto {
  [((OrgApacheLuceneIndexBufferedUpdates *) nil_chk(bufferedDeletes)) addTermWithOrgApacheLuceneIndexTerm:item_ withInt:docIDUpto];
}

- (NSString *)description {
  return JreStrcat("$@", @"del=", item_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneIndexTerm:", "TermNode", NULL, 0x0, NULL, NULL },
    { "applyWithOrgApacheLuceneIndexBufferedUpdates:withInt:", "apply", "V", 0x0, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.index.Term;"};
  static const J2ObjcClassInfo _OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode = { 2, "TermNode", "org.apache.lucene.index", "DocumentsWriterDeleteQueue", 0x1a, 3, methods, 0, NULL, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node<Lorg/apache/lucene/index/Term;>;" };
  return &_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode;
}

@end

void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode_initWithOrgApacheLuceneIndexTerm_(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode *self, OrgApacheLuceneIndexTerm *term) {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_Node_initWithId_(self, term);
}

OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode_initWithOrgApacheLuceneIndexTerm_(OrgApacheLuceneIndexTerm *term) {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode *self = [OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode alloc];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode_initWithOrgApacheLuceneIndexTerm_(self, term);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermNode)

@implementation OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode

- (instancetype)init {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const char *superclass_type_args[] = {"[Lorg.apache.lucene.search.Query;"};
  static const J2ObjcClassInfo _OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode = { 2, "QueryArrayNode", "org.apache.lucene.index", "DocumentsWriterDeleteQueue", 0x1a, 1, methods, 0, NULL, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node<L[Lorg/apache/lucene/search/Query;;>;" };
  return &_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode;
}

@end

void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode_init(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode *self) {
  NSObject_init(self);
}

OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode_init() {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode *self = [OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode alloc];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_QueryArrayNode)

@implementation OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode

- (instancetype)init {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const char *superclass_type_args[] = {"[Lorg.apache.lucene.index.Term;"};
  static const J2ObjcClassInfo _OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode = { 2, "TermArrayNode", "org.apache.lucene.index", "DocumentsWriterDeleteQueue", 0x1a, 1, methods, 0, NULL, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node<L[Lorg/apache/lucene/index/Term;;>;" };
  return &_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode;
}

@end

void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode_init(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode *self) {
  NSObject_init(self);
}

OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode_init() {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode *self = [OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode alloc];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_TermArrayNode)

@implementation OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode

- (instancetype)init {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const char *superclass_type_args[] = {"[Lorg.apache.lucene.index.DocValuesUpdate;"};
  static const J2ObjcClassInfo _OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode = { 2, "DocValuesUpdatesNode", "org.apache.lucene.index", "DocumentsWriterDeleteQueue", 0x1a, 1, methods, 0, NULL, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/index/DocumentsWriterDeleteQueue$Node<L[Lorg/apache/lucene/index/DocValuesUpdate;;>;" };
  return &_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode;
}

@end

void OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode_init(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode *self) {
  NSObject_init(self);
}

OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode *new_OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode_init() {
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode *self = [OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode alloc];
  OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneIndexDocumentsWriterDeleteQueue_DocValuesUpdatesNode)
