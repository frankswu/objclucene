//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/analysis/ReusableStringReader.java
//

#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/Reader.h"
#include "java/lang/Math.h"
#include "org/apache/lucene/analysis/ReusableStringReader.h"

@interface OrgApacheLuceneAnalysisReusableStringReader () {
 @public
  jint pos_, size_;
  NSString *s_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneAnalysisReusableStringReader, s_, NSString *)

@implementation OrgApacheLuceneAnalysisReusableStringReader

- (void)setValueWithNSString:(NSString *)s {
  JreStrongAssign(&self->s_, s);
  self->size_ = ((jint) [((NSString *) nil_chk(s)) length]);
  self->pos_ = 0;
}

- (jint)read {
  if (pos_ < size_) {
    return [((NSString *) nil_chk(s_)) charAtWithInt:pos_++];
  }
  else {
    JreStrongAssign(&s_, nil);
    return -1;
  }
}

- (jint)readWithCharArray:(IOSCharArray *)c
                  withInt:(jint)off
                  withInt:(jint)len {
  if (pos_ < size_) {
    len = JavaLangMath_minWithInt_withInt_(len, size_ - pos_);
    [((NSString *) nil_chk(s_)) getChars:pos_ sourceEnd:pos_ + len destination:c destinationBegin:off];
    pos_ += len;
    return len;
  }
  else {
    JreStrongAssign(&s_, nil);
    return -1;
  }
}

- (void)close {
  pos_ = size_;
  JreStrongAssign(&s_, nil);
}

- (instancetype)init {
  OrgApacheLuceneAnalysisReusableStringReader_init(self);
  return self;
}

- (void)dealloc {
  RELEASE_(s_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "setValueWithNSString:", "setValue", "V", 0x0, NULL, NULL },
    { "read", NULL, "I", 0x1, NULL, NULL },
    { "readWithCharArray:withInt:withInt:", "read", "I", 0x1, NULL, NULL },
    { "close", NULL, "V", 0x1, NULL, NULL },
    { "init", NULL, NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "pos_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "size_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "s_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneAnalysisReusableStringReader = { 2, "ReusableStringReader", "org.apache.lucene.analysis", NULL, 0x10, 5, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneAnalysisReusableStringReader;
}

@end

void OrgApacheLuceneAnalysisReusableStringReader_init(OrgApacheLuceneAnalysisReusableStringReader *self) {
  JavaIoReader_init(self);
  self->pos_ = 0;
  self->size_ = 0;
  JreStrongAssign(&self->s_, nil);
}

OrgApacheLuceneAnalysisReusableStringReader *new_OrgApacheLuceneAnalysisReusableStringReader_init() {
  OrgApacheLuceneAnalysisReusableStringReader *self = [OrgApacheLuceneAnalysisReusableStringReader alloc];
  OrgApacheLuceneAnalysisReusableStringReader_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneAnalysisReusableStringReader)
