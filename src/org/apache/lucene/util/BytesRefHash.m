//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/util/BytesRefHash.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Integer.h"
#include "java/lang/RuntimeException.h"
#include "java/lang/System.h"
#include "java/util/Arrays.h"
#include "java/util/Comparator.h"
#include "org/apache/lucene/util/ArrayUtil.h"
#include "org/apache/lucene/util/ByteBlockPool.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/BytesRefHash.h"
#include "org/apache/lucene/util/Counter.h"
#include "org/apache/lucene/util/IntroSorter.h"
#include "org/apache/lucene/util/RamUsageEstimator.h"
#include "org/apache/lucene/util/StringHelper.h"

@interface OrgApacheLuceneUtilBytesRefHash () {
 @public
  OrgApacheLuceneUtilBytesRef *scratch1_;
  jint hashSize_;
  jint hashHalfSize_;
  jint hashMask_;
  jint count_;
  jint lastCount_;
  IOSIntArray *ids_;
  OrgApacheLuceneUtilBytesRefHash_BytesStartArray *bytesStartArray_;
  OrgApacheLuceneUtilCounter *bytesUsed_;
}

- (jboolean)equalsWithInt:(jint)id_
withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)b;

- (jboolean)shrinkWithInt:(jint)targetSize;

- (jint)findHashWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)bytes;

/*!
 @brief Called when hash is too small (<code>> 50%</code> occupied) or too large (<code>< 20%</code>
 occupied).
 */
- (void)rehashWithInt:(jint)newSize
          withBoolean:(jboolean)hashOnData;

- (jint)doHashWithByteArray:(IOSByteArray *)bytes
                    withInt:(jint)offset
                    withInt:(jint)length;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash, scratch1_, OrgApacheLuceneUtilBytesRef *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash, ids_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash, bytesStartArray_, OrgApacheLuceneUtilBytesRefHash_BytesStartArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash, bytesUsed_, OrgApacheLuceneUtilCounter *)

__attribute__((unused)) static jboolean OrgApacheLuceneUtilBytesRefHash_equalsWithInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneUtilBytesRefHash *self, jint id_, OrgApacheLuceneUtilBytesRef *b);

__attribute__((unused)) static jboolean OrgApacheLuceneUtilBytesRefHash_shrinkWithInt_(OrgApacheLuceneUtilBytesRefHash *self, jint targetSize);

__attribute__((unused)) static jint OrgApacheLuceneUtilBytesRefHash_findHashWithOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneUtilBytesRefHash *self, OrgApacheLuceneUtilBytesRef *bytes);

__attribute__((unused)) static void OrgApacheLuceneUtilBytesRefHash_rehashWithInt_withBoolean_(OrgApacheLuceneUtilBytesRefHash *self, jint newSize, jboolean hashOnData);

__attribute__((unused)) static jint OrgApacheLuceneUtilBytesRefHash_doHashWithByteArray_withInt_withInt_(OrgApacheLuceneUtilBytesRefHash *self, IOSByteArray *bytes, jint offset, jint length);

@interface OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray () {
 @public
  IOSIntArray *bytesStart_;
  OrgApacheLuceneUtilCounter *bytesUsed_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray, bytesStart_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray, bytesUsed_, OrgApacheLuceneUtilCounter *)

@interface OrgApacheLuceneUtilBytesRefHash_$1 : OrgApacheLuceneUtilIntroSorter {
 @public
  OrgApacheLuceneUtilBytesRefHash *this$0_;
  OrgApacheLuceneUtilBytesRef *pivot_, *scratch1_, *scratch2_;
  IOSIntArray *val$compact_;
  id<JavaUtilComparator> val$comp_;
}

- (void)swapWithInt:(jint)i
            withInt:(jint)j;

- (jint)compareWithInt:(jint)i
               withInt:(jint)j;

- (void)setPivotWithInt:(jint)i;

- (jint)comparePivotWithInt:(jint)j;

- (instancetype)initWithOrgApacheLuceneUtilBytesRefHash:(OrgApacheLuceneUtilBytesRefHash *)outer$
                                           withIntArray:(IOSIntArray *)capture$0
                                 withJavaUtilComparator:(id<JavaUtilComparator>)capture$1;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneUtilBytesRefHash_$1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash_$1, this$0_, OrgApacheLuceneUtilBytesRefHash *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash_$1, pivot_, OrgApacheLuceneUtilBytesRef *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash_$1, scratch1_, OrgApacheLuceneUtilBytesRef *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash_$1, scratch2_, OrgApacheLuceneUtilBytesRef *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash_$1, val$compact_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilBytesRefHash_$1, val$comp_, id<JavaUtilComparator>)

__attribute__((unused)) static void OrgApacheLuceneUtilBytesRefHash_$1_initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_(OrgApacheLuceneUtilBytesRefHash_$1 *self, OrgApacheLuceneUtilBytesRefHash *outer$, IOSIntArray *capture$0, id<JavaUtilComparator> capture$1);

__attribute__((unused)) static OrgApacheLuceneUtilBytesRefHash_$1 *new_OrgApacheLuceneUtilBytesRefHash_$1_initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_(OrgApacheLuceneUtilBytesRefHash *outer$, IOSIntArray *capture$0, id<JavaUtilComparator> capture$1) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneUtilBytesRefHash_$1 *create_OrgApacheLuceneUtilBytesRefHash_$1_initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_(OrgApacheLuceneUtilBytesRefHash *outer$, IOSIntArray *capture$0, id<JavaUtilComparator> capture$1);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneUtilBytesRefHash_$1)

@implementation OrgApacheLuceneUtilBytesRefHash

+ (jint)DEFAULT_CAPACITY {
  return OrgApacheLuceneUtilBytesRefHash_DEFAULT_CAPACITY;
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgApacheLuceneUtilBytesRefHash_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (instancetype)initWithOrgApacheLuceneUtilByteBlockPool:(OrgApacheLuceneUtilByteBlockPool *)pool {
  OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_(self, pool);
  return self;
}

- (instancetype)initWithOrgApacheLuceneUtilByteBlockPool:(OrgApacheLuceneUtilByteBlockPool *)pool
                                                 withInt:(jint)capacity
     withOrgApacheLuceneUtilBytesRefHash_BytesStartArray:(OrgApacheLuceneUtilBytesRefHash_BytesStartArray *)bytesStartArray {
  OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_withInt_withOrgApacheLuceneUtilBytesRefHash_BytesStartArray_(self, pool, capacity, bytesStartArray);
  return self;
}

- (jint)size {
  return count_;
}

- (OrgApacheLuceneUtilBytesRef *)getWithInt:(jint)bytesID
            withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)ref {
  JreAssert((bytesStart_ != nil), (@"bytesStart is null - not initialized"));
  JreAssert((bytesID < ((IOSIntArray *) nil_chk(bytesStart_))->size_), (JreStrcat("$I", @"bytesID exceeds byteStart len: ", bytesStart_->size_)));
  [((OrgApacheLuceneUtilByteBlockPool *) nil_chk(pool_)) setBytesRefWithOrgApacheLuceneUtilBytesRef:ref withInt:IOSIntArray_Get(bytesStart_, bytesID)];
  return ref;
}

- (IOSIntArray *)compact {
  JreAssert((bytesStart_ != nil), (@"bytesStart is null - not initialized"));
  jint upto = 0;
  for (jint i = 0; i < hashSize_; i++) {
    if (IOSIntArray_Get(nil_chk(ids_), i) != -1) {
      if (upto < i) {
        *IOSIntArray_GetRef(ids_, upto) = IOSIntArray_Get(ids_, i);
        *IOSIntArray_GetRef(ids_, i) = -1;
      }
      upto++;
    }
  }
  JreAssert((upto == count_), (@"org/apache/lucene/util/BytesRefHash.java:148 condition failed: assert upto == count;"));
  lastCount_ = count_;
  return ids_;
}

- (IOSIntArray *)sortWithJavaUtilComparator:(id<JavaUtilComparator>)comp {
  IOSIntArray *compact = [self compact];
  [create_OrgApacheLuceneUtilBytesRefHash_$1_initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_(self, compact, comp) sortWithInt:0 withInt:count_];
  return compact;
}

- (jboolean)equalsWithInt:(jint)id_
withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)b {
  return OrgApacheLuceneUtilBytesRefHash_equalsWithInt_withOrgApacheLuceneUtilBytesRef_(self, id_, b);
}

- (jboolean)shrinkWithInt:(jint)targetSize {
  return OrgApacheLuceneUtilBytesRefHash_shrinkWithInt_(self, targetSize);
}

- (void)clearWithBoolean:(jboolean)resetPool {
  lastCount_ = count_;
  count_ = 0;
  if (resetPool) {
    [((OrgApacheLuceneUtilByteBlockPool *) nil_chk(pool_)) resetWithBoolean:false withBoolean:false];
  }
  JreStrongAssign(&bytesStart_, [((OrgApacheLuceneUtilBytesRefHash_BytesStartArray *) nil_chk(bytesStartArray_)) clear]);
  if (lastCount_ != -1 && OrgApacheLuceneUtilBytesRefHash_shrinkWithInt_(self, lastCount_)) {
    return;
  }
  JavaUtilArrays_fillWithIntArray_withInt_(ids_, -1);
}

- (void)clear {
  [self clearWithBoolean:true];
}

- (void)close {
  [self clearWithBoolean:true];
  JreStrongAssign(&ids_, nil);
  [((OrgApacheLuceneUtilCounter *) nil_chk(bytesUsed_)) addAndGetWithLong:OrgApacheLuceneUtilRamUsageEstimator_NUM_BYTES_INT * -hashSize_];
}

- (jint)addWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)bytes {
  JreAssert((bytesStart_ != nil), (@"Bytesstart is null - not initialized"));
  jint length = ((OrgApacheLuceneUtilBytesRef *) nil_chk(bytes))->length_;
  jint hashPos = OrgApacheLuceneUtilBytesRefHash_findHashWithOrgApacheLuceneUtilBytesRef_(self, bytes);
  jint e = IOSIntArray_Get(nil_chk(ids_), hashPos);
  if (e == -1) {
    jint len2 = 2 + bytes->length_;
    if (len2 + ((OrgApacheLuceneUtilByteBlockPool *) nil_chk(pool_))->byteUpto_ > OrgApacheLuceneUtilByteBlockPool_BYTE_BLOCK_SIZE) {
      if (len2 > OrgApacheLuceneUtilByteBlockPool_BYTE_BLOCK_SIZE) {
        @throw create_OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException_initWithNSString_(JreStrcat("$I$I", @"bytes can be at most ", (OrgApacheLuceneUtilByteBlockPool_BYTE_BLOCK_SIZE - 2), @" in length; got ", bytes->length_));
      }
      [pool_ nextBuffer];
    }
    IOSByteArray *buffer = pool_->buffer_;
    jint bufferUpto = pool_->byteUpto_;
    if (count_ >= ((IOSIntArray *) nil_chk(bytesStart_))->size_) {
      JreStrongAssign(&bytesStart_, [((OrgApacheLuceneUtilBytesRefHash_BytesStartArray *) nil_chk(bytesStartArray_)) grow]);
      JreAssert((count_ < ((IOSIntArray *) nil_chk(bytesStart_))->size_ + 1), (JreStrcat("$I$I", @"count: ", count_, @" len: ", bytesStart_->size_)));
    }
    e = count_++;
    *IOSIntArray_GetRef(bytesStart_, e) = bufferUpto + pool_->byteOffset_;
    if (length < 128) {
      *IOSByteArray_GetRef(nil_chk(buffer), bufferUpto) = (jbyte) length;
      pool_->byteUpto_ += length + 1;
      JreAssert((length >= 0), (JreStrcat("$I", @"Length must be positive: ", length)));
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(bytes->bytes_, bytes->offset_, buffer, bufferUpto + 1, length);
    }
    else {
      *IOSByteArray_GetRef(nil_chk(buffer), bufferUpto) = (jbyte) ((jint) 0x80 | (length & (jint) 0x7f));
      *IOSByteArray_GetRef(buffer, bufferUpto + 1) = (jbyte) ((JreRShift32(length, 7)) & (jint) 0xff);
      pool_->byteUpto_ += length + 2;
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(bytes->bytes_, bytes->offset_, buffer, bufferUpto + 2, length);
    }
    JreAssert((IOSIntArray_Get(nil_chk(ids_), hashPos) == -1), (@"org/apache/lucene/util/BytesRefHash.java:319 condition failed: assert ids[hashPos] == -1;"));
    *IOSIntArray_GetRef(ids_, hashPos) = e;
    if (count_ == hashHalfSize_) {
      OrgApacheLuceneUtilBytesRefHash_rehashWithInt_withBoolean_(self, 2 * hashSize_, true);
    }
    return e;
  }
  return -(e + 1);
}

- (jint)findWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)bytes {
  return IOSIntArray_Get(nil_chk(ids_), OrgApacheLuceneUtilBytesRefHash_findHashWithOrgApacheLuceneUtilBytesRef_(self, bytes));
}

- (jint)findHashWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)bytes {
  return OrgApacheLuceneUtilBytesRefHash_findHashWithOrgApacheLuceneUtilBytesRef_(self, bytes);
}

- (jint)addByPoolOffsetWithInt:(jint)offset {
  JreAssert((bytesStart_ != nil), (@"Bytesstart is null - not initialized"));
  jint code = offset;
  jint hashPos = offset & hashMask_;
  jint e = IOSIntArray_Get(nil_chk(ids_), hashPos);
  if (e != -1 && IOSIntArray_Get(nil_chk(bytesStart_), e) != offset) {
    do {
      code++;
      hashPos = code & hashMask_;
      e = IOSIntArray_Get(ids_, hashPos);
    }
    while (e != -1 && IOSIntArray_Get(nil_chk(bytesStart_), e) != offset);
  }
  if (e == -1) {
    if (count_ >= ((IOSIntArray *) nil_chk(bytesStart_))->size_) {
      JreStrongAssign(&bytesStart_, [((OrgApacheLuceneUtilBytesRefHash_BytesStartArray *) nil_chk(bytesStartArray_)) grow]);
      JreAssert((count_ < ((IOSIntArray *) nil_chk(bytesStart_))->size_ + 1), (JreStrcat("$I$I", @"count: ", count_, @" len: ", bytesStart_->size_)));
    }
    e = count_++;
    *IOSIntArray_GetRef(bytesStart_, e) = offset;
    JreAssert((IOSIntArray_Get(nil_chk(ids_), hashPos) == -1), (@"org/apache/lucene/util/BytesRefHash.java:394 condition failed: assert ids[hashPos] == -1;"));
    *IOSIntArray_GetRef(ids_, hashPos) = e;
    if (count_ == hashHalfSize_) {
      OrgApacheLuceneUtilBytesRefHash_rehashWithInt_withBoolean_(self, 2 * hashSize_, false);
    }
    return e;
  }
  return -(e + 1);
}

- (void)rehashWithInt:(jint)newSize
          withBoolean:(jboolean)hashOnData {
  OrgApacheLuceneUtilBytesRefHash_rehashWithInt_withBoolean_(self, newSize, hashOnData);
}

- (jint)doHashWithByteArray:(IOSByteArray *)bytes
                    withInt:(jint)offset
                    withInt:(jint)length {
  return OrgApacheLuceneUtilBytesRefHash_doHashWithByteArray_withInt_withInt_(self, bytes, offset, length);
}

- (void)reinit {
  if (bytesStart_ == nil) {
    JreStrongAssign(&bytesStart_, [((OrgApacheLuceneUtilBytesRefHash_BytesStartArray *) nil_chk(bytesStartArray_)) init__]);
  }
  if (ids_ == nil) {
    JreStrongAssignAndConsume(&ids_, [IOSIntArray newArrayWithLength:hashSize_]);
    [((OrgApacheLuceneUtilCounter *) nil_chk(bytesUsed_)) addAndGetWithLong:OrgApacheLuceneUtilRamUsageEstimator_NUM_BYTES_INT * hashSize_];
  }
}

- (jint)byteStartWithInt:(jint)bytesID {
  JreAssert((bytesStart_ != nil), (@"bytesStart is null - not initialized"));
  JreAssert((bytesID >= 0 && bytesID < count_), (JavaLangInteger_valueOfWithInt_(bytesID)));
  return IOSIntArray_Get(nil_chk(bytesStart_), bytesID);
}

- (void)dealloc {
  RELEASE_(pool_);
  RELEASE_(bytesStart_);
  RELEASE_(scratch1_);
  RELEASE_(ids_);
  RELEASE_(bytesStartArray_);
  RELEASE_(bytesUsed_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "BytesRefHash", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheLuceneUtilByteBlockPool:", "BytesRefHash", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheLuceneUtilByteBlockPool:withInt:withOrgApacheLuceneUtilBytesRefHash_BytesStartArray:", "BytesRefHash", NULL, 0x1, NULL, NULL },
    { "size", NULL, "I", 0x1, NULL, NULL },
    { "getWithInt:withOrgApacheLuceneUtilBytesRef:", "get", "Lorg.apache.lucene.util.BytesRef;", 0x1, NULL, NULL },
    { "compact", NULL, "[I", 0x0, NULL, NULL },
    { "sortWithJavaUtilComparator:", "sort", "[I", 0x1, NULL, "(Ljava/util/Comparator<Lorg/apache/lucene/util/BytesRef;>;)[I" },
    { "equalsWithInt:withOrgApacheLuceneUtilBytesRef:", "equals", "Z", 0x2, NULL, NULL },
    { "shrinkWithInt:", "shrink", "Z", 0x2, NULL, NULL },
    { "clearWithBoolean:", "clear", "V", 0x1, NULL, NULL },
    { "clear", NULL, "V", 0x1, NULL, NULL },
    { "close", NULL, "V", 0x1, NULL, NULL },
    { "addWithOrgApacheLuceneUtilBytesRef:", "add", "I", 0x1, NULL, NULL },
    { "findWithOrgApacheLuceneUtilBytesRef:", "find", "I", 0x1, NULL, NULL },
    { "findHashWithOrgApacheLuceneUtilBytesRef:", "findHash", "I", 0x2, NULL, NULL },
    { "addByPoolOffsetWithInt:", "addByPoolOffset", "I", 0x1, NULL, NULL },
    { "rehashWithInt:withBoolean:", "rehash", "V", 0x2, NULL, NULL },
    { "doHashWithByteArray:withInt:withInt:", "doHash", "I", 0x2, NULL, NULL },
    { "reinit", NULL, "V", 0x1, NULL, NULL },
    { "byteStartWithInt:", "byteStart", "I", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "DEFAULT_CAPACITY", "DEFAULT_CAPACITY", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilBytesRefHash_DEFAULT_CAPACITY },
    { "pool_", NULL, 0x10, "Lorg.apache.lucene.util.ByteBlockPool;", NULL, NULL, .constantValue.asLong = 0 },
    { "bytesStart_", NULL, 0x0, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "scratch1_", NULL, 0x12, "Lorg.apache.lucene.util.BytesRef;", NULL, NULL, .constantValue.asLong = 0 },
    { "hashSize_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "hashHalfSize_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "hashMask_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "count_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "lastCount_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "ids_", NULL, 0x2, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "bytesStartArray_", NULL, 0x12, "Lorg.apache.lucene.util.BytesRefHash$BytesStartArray;", NULL, NULL, .constantValue.asLong = 0 },
    { "bytesUsed_", NULL, 0x2, "Lorg.apache.lucene.util.Counter;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.util.BytesRefHash$MaxBytesLengthExceededException;", "Lorg.apache.lucene.util.BytesRefHash$BytesStartArray;", "Lorg.apache.lucene.util.BytesRefHash$DirectBytesStartArray;"};
  static const J2ObjcClassInfo _OrgApacheLuceneUtilBytesRefHash = { 2, "BytesRefHash", "org.apache.lucene.util", NULL, 0x11, 20, methods, 12, fields, 0, NULL, 3, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneUtilBytesRefHash;
}

@end

void OrgApacheLuceneUtilBytesRefHash_init(OrgApacheLuceneUtilBytesRefHash *self) {
  OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_(self, create_OrgApacheLuceneUtilByteBlockPool_initWithOrgApacheLuceneUtilByteBlockPool_Allocator_(create_OrgApacheLuceneUtilByteBlockPool_DirectAllocator_init()));
}

OrgApacheLuceneUtilBytesRefHash *new_OrgApacheLuceneUtilBytesRefHash_init() {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilBytesRefHash, init)
}

OrgApacheLuceneUtilBytesRefHash *create_OrgApacheLuceneUtilBytesRefHash_init() {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilBytesRefHash, init)
}

void OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_(OrgApacheLuceneUtilBytesRefHash *self, OrgApacheLuceneUtilByteBlockPool *pool) {
  OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_withInt_withOrgApacheLuceneUtilBytesRefHash_BytesStartArray_(self, pool, OrgApacheLuceneUtilBytesRefHash_DEFAULT_CAPACITY, create_OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_(OrgApacheLuceneUtilBytesRefHash_DEFAULT_CAPACITY));
}

OrgApacheLuceneUtilBytesRefHash *new_OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_(OrgApacheLuceneUtilByteBlockPool *pool) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilBytesRefHash, initWithOrgApacheLuceneUtilByteBlockPool_, pool)
}

OrgApacheLuceneUtilBytesRefHash *create_OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_(OrgApacheLuceneUtilByteBlockPool *pool) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilBytesRefHash, initWithOrgApacheLuceneUtilByteBlockPool_, pool)
}

void OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_withInt_withOrgApacheLuceneUtilBytesRefHash_BytesStartArray_(OrgApacheLuceneUtilBytesRefHash *self, OrgApacheLuceneUtilByteBlockPool *pool, jint capacity, OrgApacheLuceneUtilBytesRefHash_BytesStartArray *bytesStartArray) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->scratch1_, new_OrgApacheLuceneUtilBytesRef_init());
  self->lastCount_ = -1;
  self->hashSize_ = capacity;
  self->hashHalfSize_ = JreRShift32(self->hashSize_, 1);
  self->hashMask_ = self->hashSize_ - 1;
  JreStrongAssign(&self->pool_, pool);
  JreStrongAssignAndConsume(&self->ids_, [IOSIntArray newArrayWithLength:self->hashSize_]);
  JavaUtilArrays_fillWithIntArray_withInt_(self->ids_, -1);
  JreStrongAssign(&self->bytesStartArray_, bytesStartArray);
  JreStrongAssign(&self->bytesStart_, [((OrgApacheLuceneUtilBytesRefHash_BytesStartArray *) nil_chk(bytesStartArray)) init__]);
  JreStrongAssign(&self->bytesUsed_, [bytesStartArray bytesUsed] == nil ? OrgApacheLuceneUtilCounter_newCounter() : [bytesStartArray bytesUsed]);
  [self->bytesUsed_ addAndGetWithLong:self->hashSize_ * OrgApacheLuceneUtilRamUsageEstimator_NUM_BYTES_INT];
}

OrgApacheLuceneUtilBytesRefHash *new_OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_withInt_withOrgApacheLuceneUtilBytesRefHash_BytesStartArray_(OrgApacheLuceneUtilByteBlockPool *pool, jint capacity, OrgApacheLuceneUtilBytesRefHash_BytesStartArray *bytesStartArray) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilBytesRefHash, initWithOrgApacheLuceneUtilByteBlockPool_withInt_withOrgApacheLuceneUtilBytesRefHash_BytesStartArray_, pool, capacity, bytesStartArray)
}

OrgApacheLuceneUtilBytesRefHash *create_OrgApacheLuceneUtilBytesRefHash_initWithOrgApacheLuceneUtilByteBlockPool_withInt_withOrgApacheLuceneUtilBytesRefHash_BytesStartArray_(OrgApacheLuceneUtilByteBlockPool *pool, jint capacity, OrgApacheLuceneUtilBytesRefHash_BytesStartArray *bytesStartArray) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilBytesRefHash, initWithOrgApacheLuceneUtilByteBlockPool_withInt_withOrgApacheLuceneUtilBytesRefHash_BytesStartArray_, pool, capacity, bytesStartArray)
}

jboolean OrgApacheLuceneUtilBytesRefHash_equalsWithInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneUtilBytesRefHash *self, jint id_, OrgApacheLuceneUtilBytesRef *b) {
  [((OrgApacheLuceneUtilByteBlockPool *) nil_chk(self->pool_)) setBytesRefWithOrgApacheLuceneUtilBytesRef:self->scratch1_ withInt:IOSIntArray_Get(nil_chk(self->bytesStart_), id_)];
  return [((OrgApacheLuceneUtilBytesRef *) nil_chk(self->scratch1_)) bytesEqualsWithOrgApacheLuceneUtilBytesRef:b];
}

jboolean OrgApacheLuceneUtilBytesRefHash_shrinkWithInt_(OrgApacheLuceneUtilBytesRefHash *self, jint targetSize) {
  jint newSize = self->hashSize_;
  while (newSize >= 8 && newSize / 4 > targetSize) {
    newSize /= 2;
  }
  if (newSize != self->hashSize_) {
    [((OrgApacheLuceneUtilCounter *) nil_chk(self->bytesUsed_)) addAndGetWithLong:OrgApacheLuceneUtilRamUsageEstimator_NUM_BYTES_INT * -(self->hashSize_ - newSize)];
    self->hashSize_ = newSize;
    JreStrongAssignAndConsume(&self->ids_, [IOSIntArray newArrayWithLength:self->hashSize_]);
    JavaUtilArrays_fillWithIntArray_withInt_(self->ids_, -1);
    self->hashHalfSize_ = newSize / 2;
    self->hashMask_ = newSize - 1;
    return true;
  }
  else {
    return false;
  }
}

jint OrgApacheLuceneUtilBytesRefHash_findHashWithOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneUtilBytesRefHash *self, OrgApacheLuceneUtilBytesRef *bytes) {
  JreAssert((self->bytesStart_ != nil), (@"bytesStart is null - not initialized"));
  jint code = OrgApacheLuceneUtilBytesRefHash_doHashWithByteArray_withInt_withInt_(self, ((OrgApacheLuceneUtilBytesRef *) nil_chk(bytes))->bytes_, bytes->offset_, bytes->length_);
  jint hashPos = code & self->hashMask_;
  jint e = IOSIntArray_Get(nil_chk(self->ids_), hashPos);
  if (e != -1 && !OrgApacheLuceneUtilBytesRefHash_equalsWithInt_withOrgApacheLuceneUtilBytesRef_(self, e, bytes)) {
    do {
      code++;
      hashPos = code & self->hashMask_;
      e = IOSIntArray_Get(nil_chk(self->ids_), hashPos);
    }
    while (e != -1 && !OrgApacheLuceneUtilBytesRefHash_equalsWithInt_withOrgApacheLuceneUtilBytesRef_(self, e, bytes));
  }
  return hashPos;
}

void OrgApacheLuceneUtilBytesRefHash_rehashWithInt_withBoolean_(OrgApacheLuceneUtilBytesRefHash *self, jint newSize, jboolean hashOnData) {
  jint newMask = newSize - 1;
  [((OrgApacheLuceneUtilCounter *) nil_chk(self->bytesUsed_)) addAndGetWithLong:OrgApacheLuceneUtilRamUsageEstimator_NUM_BYTES_INT * (newSize)];
  IOSIntArray *newHash = [IOSIntArray arrayWithLength:newSize];
  JavaUtilArrays_fillWithIntArray_withInt_(newHash, -1);
  for (jint i = 0; i < self->hashSize_; i++) {
    jint e0 = IOSIntArray_Get(nil_chk(self->ids_), i);
    if (e0 != -1) {
      jint code;
      if (hashOnData) {
        jint off = IOSIntArray_Get(nil_chk(self->bytesStart_), e0);
        jint start = off & OrgApacheLuceneUtilByteBlockPool_BYTE_BLOCK_MASK;
        IOSByteArray *bytes = IOSObjectArray_Get(nil_chk(((OrgApacheLuceneUtilByteBlockPool *) nil_chk(self->pool_))->buffers_), JreRShift32(off, OrgApacheLuceneUtilByteBlockPool_BYTE_BLOCK_SHIFT));
        jint len;
        jint pos;
        if ((IOSByteArray_Get(nil_chk(bytes), start) & (jint) 0x80) == 0) {
          len = IOSByteArray_Get(bytes, start);
          pos = start + 1;
        }
        else {
          len = (IOSByteArray_Get(bytes, start) & (jint) 0x7f) + (JreLShift32((IOSByteArray_Get(bytes, start + 1) & (jint) 0xff), 7));
          pos = start + 2;
        }
        code = OrgApacheLuceneUtilBytesRefHash_doHashWithByteArray_withInt_withInt_(self, bytes, pos, len);
      }
      else {
        code = IOSIntArray_Get(nil_chk(self->bytesStart_), e0);
      }
      jint hashPos = code & newMask;
      JreAssert((hashPos >= 0), (@"org/apache/lucene/util/BytesRefHash.java:438 condition failed: assert hashPos >= 0;"));
      if (IOSIntArray_Get(newHash, hashPos) != -1) {
        do {
          code++;
          hashPos = code & newMask;
        }
        while (IOSIntArray_Get(newHash, hashPos) != -1);
      }
      *IOSIntArray_GetRef(newHash, hashPos) = e0;
    }
  }
  self->hashMask_ = newMask;
  [((OrgApacheLuceneUtilCounter *) nil_chk(self->bytesUsed_)) addAndGetWithLong:OrgApacheLuceneUtilRamUsageEstimator_NUM_BYTES_INT * (-((IOSIntArray *) nil_chk(self->ids_))->size_)];
  JreStrongAssign(&self->ids_, newHash);
  self->hashSize_ = newSize;
  self->hashHalfSize_ = newSize / 2;
}

jint OrgApacheLuceneUtilBytesRefHash_doHashWithByteArray_withInt_withInt_(OrgApacheLuceneUtilBytesRefHash *self, IOSByteArray *bytes, jint offset, jint length) {
  return OrgApacheLuceneUtilStringHelper_murmurhash3_x86_32WithByteArray_withInt_withInt_withInt_(bytes, offset, length, JreLoadStatic(OrgApacheLuceneUtilStringHelper, GOOD_FAST_HASH_SEED));
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilBytesRefHash)

@implementation OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException

- (instancetype)initWithNSString:(NSString *)message {
  OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException_initWithNSString_(self, message);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:", "MaxBytesLengthExceededException", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException = { 2, "MaxBytesLengthExceededException", "org.apache.lucene.util", "BytesRefHash", 0x9, 1, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException;
}

@end

void OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException_initWithNSString_(OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException *self, NSString *message) {
  JavaLangRuntimeException_initWithNSString_(self, message);
}

OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException *new_OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException_initWithNSString_(NSString *message) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException, initWithNSString_, message)
}

OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException *create_OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException_initWithNSString_(NSString *message) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException, initWithNSString_, message)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilBytesRefHash_MaxBytesLengthExceededException)

@implementation OrgApacheLuceneUtilBytesRefHash_BytesStartArray

- (IOSIntArray *)init__ {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (IOSIntArray *)grow {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (IOSIntArray *)clear {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (OrgApacheLuceneUtilCounter *)bytesUsed {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgApacheLuceneUtilBytesRefHash_BytesStartArray_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init__", "init", "[I", 0x401, NULL, NULL },
    { "grow", NULL, "[I", 0x401, NULL, NULL },
    { "clear", NULL, "[I", 0x401, NULL, NULL },
    { "bytesUsed", NULL, "Lorg.apache.lucene.util.Counter;", 0x401, NULL, NULL },
    { "init", "BytesStartArray", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilBytesRefHash_BytesStartArray = { 2, "BytesStartArray", "org.apache.lucene.util", "BytesRefHash", 0x409, 5, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneUtilBytesRefHash_BytesStartArray;
}

@end

void OrgApacheLuceneUtilBytesRefHash_BytesStartArray_init(OrgApacheLuceneUtilBytesRefHash_BytesStartArray *self) {
  NSObject_init(self);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilBytesRefHash_BytesStartArray)

@implementation OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray

- (instancetype)initWithInt:(jint)initSize
withOrgApacheLuceneUtilCounter:(OrgApacheLuceneUtilCounter *)counter {
  OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_withOrgApacheLuceneUtilCounter_(self, initSize, counter);
  return self;
}

- (instancetype)initWithInt:(jint)initSize {
  OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_(self, initSize);
  return self;
}

- (IOSIntArray *)clear {
  return JreStrongAssign(&bytesStart_, nil);
}

- (IOSIntArray *)grow {
  JreAssert((bytesStart_ != nil), (@"org/apache/lucene/util/BytesRefHash.java:567 condition failed: assert bytesStart != null;"));
  return JreStrongAssign(&bytesStart_, OrgApacheLuceneUtilArrayUtil_growWithIntArray_withInt_(bytesStart_, ((IOSIntArray *) nil_chk(bytesStart_))->size_ + 1));
}

- (IOSIntArray *)init__ {
  return JreStrongAssignAndConsume(&bytesStart_, [IOSIntArray newArrayWithLength:OrgApacheLuceneUtilArrayUtil_oversizeWithInt_withInt_(initSize_, OrgApacheLuceneUtilRamUsageEstimator_NUM_BYTES_INT)]);
}

- (OrgApacheLuceneUtilCounter *)bytesUsed {
  return bytesUsed_;
}

- (void)dealloc {
  RELEASE_(bytesStart_);
  RELEASE_(bytesUsed_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withOrgApacheLuceneUtilCounter:", "DirectBytesStartArray", NULL, 0x1, NULL, NULL },
    { "initWithInt:", "DirectBytesStartArray", NULL, 0x1, NULL, NULL },
    { "clear", NULL, "[I", 0x1, NULL, NULL },
    { "grow", NULL, "[I", 0x1, NULL, NULL },
    { "init__", "init", "[I", 0x1, NULL, NULL },
    { "bytesUsed", NULL, "Lorg.apache.lucene.util.Counter;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "initSize_", NULL, 0x14, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "bytesStart_", NULL, 0x2, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "bytesUsed_", NULL, 0x12, "Lorg.apache.lucene.util.Counter;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray = { 2, "DirectBytesStartArray", "org.apache.lucene.util", "BytesRefHash", 0x9, 6, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray;
}

@end

void OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_withOrgApacheLuceneUtilCounter_(OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray *self, jint initSize, OrgApacheLuceneUtilCounter *counter) {
  OrgApacheLuceneUtilBytesRefHash_BytesStartArray_init(self);
  JreStrongAssign(&self->bytesUsed_, counter);
  self->initSize_ = initSize;
}

OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray *new_OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_withOrgApacheLuceneUtilCounter_(jint initSize, OrgApacheLuceneUtilCounter *counter) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray, initWithInt_withOrgApacheLuceneUtilCounter_, initSize, counter)
}

OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray *create_OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_withOrgApacheLuceneUtilCounter_(jint initSize, OrgApacheLuceneUtilCounter *counter) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray, initWithInt_withOrgApacheLuceneUtilCounter_, initSize, counter)
}

void OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_(OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray *self, jint initSize) {
  OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_withOrgApacheLuceneUtilCounter_(self, initSize, OrgApacheLuceneUtilCounter_newCounter());
}

OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray *new_OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_(jint initSize) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray, initWithInt_, initSize)
}

OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray *create_OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray_initWithInt_(jint initSize) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray, initWithInt_, initSize)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilBytesRefHash_DirectBytesStartArray)

@implementation OrgApacheLuceneUtilBytesRefHash_$1

- (void)swapWithInt:(jint)i
            withInt:(jint)j {
  jint o = IOSIntArray_Get(nil_chk(val$compact_), i);
  *IOSIntArray_GetRef(val$compact_, i) = IOSIntArray_Get(val$compact_, j);
  *IOSIntArray_GetRef(val$compact_, j) = o;
}

- (jint)compareWithInt:(jint)i
               withInt:(jint)j {
  jint id1 = IOSIntArray_Get(nil_chk(val$compact_), i), id2 = IOSIntArray_Get(val$compact_, j);
  JreAssert((((IOSIntArray *) nil_chk(this$0_->bytesStart_))->size_ > id1 && this$0_->bytesStart_->size_ > id2), (@"org/apache/lucene/util/BytesRefHash.java:176 condition failed: assert bytesStart.length > id1 && bytesStart.length > id2;"));
  [((OrgApacheLuceneUtilByteBlockPool *) nil_chk(this$0_->pool_)) setBytesRefWithOrgApacheLuceneUtilBytesRef:scratch1_ withInt:IOSIntArray_Get(this$0_->bytesStart_, id1)];
  [this$0_->pool_ setBytesRefWithOrgApacheLuceneUtilBytesRef:scratch2_ withInt:IOSIntArray_Get(nil_chk(this$0_->bytesStart_), id2)];
  return [((id<JavaUtilComparator>) nil_chk(val$comp_)) compareWithId:scratch1_ withId:scratch2_];
}

- (void)setPivotWithInt:(jint)i {
  jint id_ = IOSIntArray_Get(nil_chk(val$compact_), i);
  JreAssert((((IOSIntArray *) nil_chk(this$0_->bytesStart_))->size_ > id_), (@"org/apache/lucene/util/BytesRefHash.java:185 condition failed: assert bytesStart.length > id;"));
  [((OrgApacheLuceneUtilByteBlockPool *) nil_chk(this$0_->pool_)) setBytesRefWithOrgApacheLuceneUtilBytesRef:pivot_ withInt:IOSIntArray_Get(this$0_->bytesStart_, id_)];
}

- (jint)comparePivotWithInt:(jint)j {
  jint id_ = IOSIntArray_Get(nil_chk(val$compact_), j);
  JreAssert((((IOSIntArray *) nil_chk(this$0_->bytesStart_))->size_ > id_), (@"org/apache/lucene/util/BytesRefHash.java:192 condition failed: assert bytesStart.length > id;"));
  [((OrgApacheLuceneUtilByteBlockPool *) nil_chk(this$0_->pool_)) setBytesRefWithOrgApacheLuceneUtilBytesRef:scratch2_ withInt:IOSIntArray_Get(this$0_->bytesStart_, id_)];
  return [((id<JavaUtilComparator>) nil_chk(val$comp_)) compareWithId:pivot_ withId:scratch2_];
}

- (instancetype)initWithOrgApacheLuceneUtilBytesRefHash:(OrgApacheLuceneUtilBytesRefHash *)outer$
                                           withIntArray:(IOSIntArray *)capture$0
                                 withJavaUtilComparator:(id<JavaUtilComparator>)capture$1 {
  OrgApacheLuceneUtilBytesRefHash_$1_initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_(self, outer$, capture$0, capture$1);
  return self;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(pivot_);
  RELEASE_(scratch1_);
  RELEASE_(scratch2_);
  RELEASE_(val$compact_);
  RELEASE_(val$comp_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "swapWithInt:withInt:", "swap", "V", 0x4, NULL, NULL },
    { "compareWithInt:withInt:", "compare", "I", 0x4, NULL, NULL },
    { "setPivotWithInt:", "setPivot", "V", 0x4, NULL, NULL },
    { "comparePivotWithInt:", "comparePivot", "I", 0x4, NULL, NULL },
    { "initWithOrgApacheLuceneUtilBytesRefHash:withIntArray:withJavaUtilComparator:", "", NULL, 0x0, NULL, "(Lorg/apache/lucene/util/BytesRefHash;[ILjava/util/Comparator<Lorg/apache/lucene/util/BytesRef;>;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.util.BytesRefHash;", NULL, NULL, .constantValue.asLong = 0 },
    { "pivot_", NULL, 0x12, "Lorg.apache.lucene.util.BytesRef;", NULL, NULL, .constantValue.asLong = 0 },
    { "scratch1_", NULL, 0x12, "Lorg.apache.lucene.util.BytesRef;", NULL, NULL, .constantValue.asLong = 0 },
    { "scratch2_", NULL, 0x12, "Lorg.apache.lucene.util.BytesRef;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$compact_", NULL, 0x1012, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "val$comp_", NULL, 0x1012, "Ljava.util.Comparator;", NULL, "Ljava/util/Comparator<Lorg/apache/lucene/util/BytesRef;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgApacheLuceneUtilBytesRefHash", "sortWithJavaUtilComparator:" };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilBytesRefHash_$1 = { 2, "", "org.apache.lucene.util", "BytesRefHash", 0x8008, 5, methods, 6, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_OrgApacheLuceneUtilBytesRefHash_$1;
}

@end

void OrgApacheLuceneUtilBytesRefHash_$1_initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_(OrgApacheLuceneUtilBytesRefHash_$1 *self, OrgApacheLuceneUtilBytesRefHash *outer$, IOSIntArray *capture$0, id<JavaUtilComparator> capture$1) {
  JreStrongAssign(&self->this$0_, outer$);
  JreStrongAssign(&self->val$compact_, capture$0);
  JreStrongAssign(&self->val$comp_, capture$1);
  OrgApacheLuceneUtilIntroSorter_init(self);
  JreStrongAssignAndConsume(&self->pivot_, new_OrgApacheLuceneUtilBytesRef_init());
  JreStrongAssignAndConsume(&self->scratch1_, new_OrgApacheLuceneUtilBytesRef_init());
  JreStrongAssignAndConsume(&self->scratch2_, new_OrgApacheLuceneUtilBytesRef_init());
}

OrgApacheLuceneUtilBytesRefHash_$1 *new_OrgApacheLuceneUtilBytesRefHash_$1_initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_(OrgApacheLuceneUtilBytesRefHash *outer$, IOSIntArray *capture$0, id<JavaUtilComparator> capture$1) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneUtilBytesRefHash_$1, initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_, outer$, capture$0, capture$1)
}

OrgApacheLuceneUtilBytesRefHash_$1 *create_OrgApacheLuceneUtilBytesRefHash_$1_initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_(OrgApacheLuceneUtilBytesRefHash *outer$, IOSIntArray *capture$0, id<JavaUtilComparator> capture$1) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneUtilBytesRefHash_$1, initWithOrgApacheLuceneUtilBytesRefHash_withIntArray_withJavaUtilComparator_, outer$, capture$0, capture$1)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilBytesRefHash_$1)
