//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/util/UnicodeUtil.java
//

#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/CharSequence.h"
#include "java/lang/Character.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/IndexOutOfBoundsException.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"
#include "java/lang/System.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/UnicodeUtil.h"

#define OrgApacheLuceneUtilUnicodeUtil_UNI_MAX_BMP 65535LL
#define OrgApacheLuceneUtilUnicodeUtil_HALF_SHIFT 10LL
#define OrgApacheLuceneUtilUnicodeUtil_HALF_MASK 1023LL
#define OrgApacheLuceneUtilUnicodeUtil_SURROGATE_OFFSET -56613888
#define OrgApacheLuceneUtilUnicodeUtil_LEAD_SURROGATE_SHIFT_ 10
#define OrgApacheLuceneUtilUnicodeUtil_TRAIL_SURROGATE_MASK_ 1023
#define OrgApacheLuceneUtilUnicodeUtil_TRAIL_SURROGATE_MIN_VALUE 56320
#define OrgApacheLuceneUtilUnicodeUtil_LEAD_SURROGATE_MIN_VALUE 55296
#define OrgApacheLuceneUtilUnicodeUtil_SUPPLEMENTARY_MIN_VALUE 65536
#define OrgApacheLuceneUtilUnicodeUtil_LEAD_SURROGATE_OFFSET_ 55232

@interface OrgApacheLuceneUtilUnicodeUtil ()

- (instancetype)init;

@end

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, UNI_MAX_BMP, jlong)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, HALF_SHIFT, jlong)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, HALF_MASK, jlong)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, SURROGATE_OFFSET, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, LEAD_SURROGATE_SHIFT_, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, TRAIL_SURROGATE_MASK_, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, TRAIL_SURROGATE_MIN_VALUE, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, LEAD_SURROGATE_MIN_VALUE, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, SUPPLEMENTARY_MIN_VALUE, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneUtilUnicodeUtil, LEAD_SURROGATE_OFFSET_, jint)

__attribute__((unused)) static void OrgApacheLuceneUtilUnicodeUtil_init(OrgApacheLuceneUtilUnicodeUtil *self);

__attribute__((unused)) static OrgApacheLuceneUtilUnicodeUtil *new_OrgApacheLuceneUtilUnicodeUtil_init() NS_RETURNS_RETAINED;

J2OBJC_INITIALIZED_DEFN(OrgApacheLuceneUtilUnicodeUtil)

OrgApacheLuceneUtilBytesRef *OrgApacheLuceneUtilUnicodeUtil_BIG_TERM_;
IOSIntArray *OrgApacheLuceneUtilUnicodeUtil_utf8CodeLength_;

@implementation OrgApacheLuceneUtilUnicodeUtil

- (instancetype)init {
  OrgApacheLuceneUtilUnicodeUtil_init(self);
  return self;
}

+ (jint)UTF16toUTF8WithCharArray:(IOSCharArray *)source
                         withInt:(jint)offset
                         withInt:(jint)length
                   withByteArray:(IOSByteArray *)outArg {
  return OrgApacheLuceneUtilUnicodeUtil_UTF16toUTF8WithCharArray_withInt_withInt_withByteArray_(source, offset, length, outArg);
}

+ (jint)UTF16toUTF8WithJavaLangCharSequence:(id<JavaLangCharSequence>)s
                                    withInt:(jint)offset
                                    withInt:(jint)length
                              withByteArray:(IOSByteArray *)outArg {
  return OrgApacheLuceneUtilUnicodeUtil_UTF16toUTF8WithJavaLangCharSequence_withInt_withInt_withByteArray_(s, offset, length, outArg);
}

+ (jint)codePointCountWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)utf8 {
  return OrgApacheLuceneUtilUnicodeUtil_codePointCountWithOrgApacheLuceneUtilBytesRef_(utf8);
}

+ (NSString *)newStringWithIntArray:(IOSIntArray *)codePoints
                            withInt:(jint)offset
                            withInt:(jint)count {
  return OrgApacheLuceneUtilUnicodeUtil_newStringWithIntArray_withInt_withInt_(codePoints, offset, count);
}

+ (jint)UTF8toUTF16WithByteArray:(IOSByteArray *)utf8
                         withInt:(jint)offset
                         withInt:(jint)length
                   withCharArray:(IOSCharArray *)outArg {
  return OrgApacheLuceneUtilUnicodeUtil_UTF8toUTF16WithByteArray_withInt_withInt_withCharArray_(utf8, offset, length, outArg);
}

+ (jint)UTF8toUTF16WithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)bytesRef
                                     withCharArray:(IOSCharArray *)chars {
  return OrgApacheLuceneUtilUnicodeUtil_UTF8toUTF16WithOrgApacheLuceneUtilBytesRef_withCharArray_(bytesRef, chars);
}

+ (void)initialize {
  if (self == [OrgApacheLuceneUtilUnicodeUtil class]) {
    JreStrongAssignAndConsume(&OrgApacheLuceneUtilUnicodeUtil_BIG_TERM_, new_OrgApacheLuceneUtilBytesRef_initWithByteArray_([IOSByteArray arrayWithBytes:(jbyte[]){ -1, -1, -1, -1, -1, -1, -1, -1, -1, -1 } count:10]));
    {
      jint v = JavaLangInteger_MIN_VALUE;
      JreStrongAssignAndConsume(&OrgApacheLuceneUtilUnicodeUtil_utf8CodeLength_, [IOSIntArray newArrayWithInts:(jint[]){ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, v, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4 } count:248]);
    }
    J2OBJC_SET_INITIALIZED(OrgApacheLuceneUtilUnicodeUtil)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "UnicodeUtil", NULL, 0x2, NULL, NULL },
    { "UTF16toUTF8WithCharArray:withInt:withInt:withByteArray:", "UTF16toUTF8", "I", 0x9, NULL, NULL },
    { "UTF16toUTF8WithJavaLangCharSequence:withInt:withInt:withByteArray:", "UTF16toUTF8", "I", 0x9, NULL, NULL },
    { "codePointCountWithOrgApacheLuceneUtilBytesRef:", "codePointCount", "I", 0x9, NULL, NULL },
    { "newStringWithIntArray:withInt:withInt:", "newString", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "UTF8toUTF16WithByteArray:withInt:withInt:withCharArray:", "UTF8toUTF16", "I", 0x9, NULL, NULL },
    { "UTF8toUTF16WithOrgApacheLuceneUtilBytesRef:withCharArray:", "UTF8toUTF16", "I", 0x9, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "BIG_TERM_", NULL, 0x19, "Lorg.apache.lucene.util.BytesRef;", &OrgApacheLuceneUtilUnicodeUtil_BIG_TERM_, NULL, .constantValue.asLong = 0 },
    { "UNI_SUR_HIGH_START", "UNI_SUR_HIGH_START", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_UNI_SUR_HIGH_START },
    { "UNI_SUR_HIGH_END", "UNI_SUR_HIGH_END", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_UNI_SUR_HIGH_END },
    { "UNI_SUR_LOW_START", "UNI_SUR_LOW_START", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_UNI_SUR_LOW_START },
    { "UNI_SUR_LOW_END", "UNI_SUR_LOW_END", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_UNI_SUR_LOW_END },
    { "UNI_REPLACEMENT_CHAR", "UNI_REPLACEMENT_CHAR", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_UNI_REPLACEMENT_CHAR },
    { "UNI_MAX_BMP", "UNI_MAX_BMP", 0x1a, "J", NULL, NULL, .constantValue.asLong = OrgApacheLuceneUtilUnicodeUtil_UNI_MAX_BMP },
    { "HALF_SHIFT", "HALF_SHIFT", 0x1a, "J", NULL, NULL, .constantValue.asLong = OrgApacheLuceneUtilUnicodeUtil_HALF_SHIFT },
    { "HALF_MASK", "HALF_MASK", 0x1a, "J", NULL, NULL, .constantValue.asLong = OrgApacheLuceneUtilUnicodeUtil_HALF_MASK },
    { "SURROGATE_OFFSET", "SURROGATE_OFFSET", 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_SURROGATE_OFFSET },
    { "MAX_UTF8_BYTES_PER_CHAR", "MAX_UTF8_BYTES_PER_CHAR", 0x19, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_MAX_UTF8_BYTES_PER_CHAR },
    { "utf8CodeLength_", NULL, 0x18, "[I", &OrgApacheLuceneUtilUnicodeUtil_utf8CodeLength_, NULL, .constantValue.asLong = 0 },
    { "LEAD_SURROGATE_SHIFT_", "LEAD_SURROGATE_SHIFT_", 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_LEAD_SURROGATE_SHIFT_ },
    { "TRAIL_SURROGATE_MASK_", "TRAIL_SURROGATE_MASK_", 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_TRAIL_SURROGATE_MASK_ },
    { "TRAIL_SURROGATE_MIN_VALUE", "TRAIL_SURROGATE_MIN_VALUE", 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_TRAIL_SURROGATE_MIN_VALUE },
    { "LEAD_SURROGATE_MIN_VALUE", "LEAD_SURROGATE_MIN_VALUE", 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_LEAD_SURROGATE_MIN_VALUE },
    { "SUPPLEMENTARY_MIN_VALUE", "SUPPLEMENTARY_MIN_VALUE", 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_SUPPLEMENTARY_MIN_VALUE },
    { "LEAD_SURROGATE_OFFSET_", "LEAD_SURROGATE_OFFSET_", 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneUtilUnicodeUtil_LEAD_SURROGATE_OFFSET_ },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilUnicodeUtil = { 2, "UnicodeUtil", "org.apache.lucene.util", NULL, 0x11, 7, methods, 18, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneUtilUnicodeUtil;
}

@end

void OrgApacheLuceneUtilUnicodeUtil_init(OrgApacheLuceneUtilUnicodeUtil *self) {
  NSObject_init(self);
}

OrgApacheLuceneUtilUnicodeUtil *new_OrgApacheLuceneUtilUnicodeUtil_init() {
  OrgApacheLuceneUtilUnicodeUtil *self = [OrgApacheLuceneUtilUnicodeUtil alloc];
  OrgApacheLuceneUtilUnicodeUtil_init(self);
  return self;
}

jint OrgApacheLuceneUtilUnicodeUtil_UTF16toUTF8WithCharArray_withInt_withInt_withByteArray_(IOSCharArray *source, jint offset, jint length, IOSByteArray *outArg) {
  OrgApacheLuceneUtilUnicodeUtil_initialize();
  jint upto = 0;
  jint i = offset;
  jint end = offset + length;
  while (i < end) {
    jint code = (jint) IOSCharArray_Get(nil_chk(source), i++);
    if (code < (jint) 0x80) *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) code;
    else if (code < (jint) 0x800) {
      *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) ((jint) 0xC0 | (JreRShift32(code, 6)));
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | (code & (jint) 0x3F));
    }
    else if (code < (jint) 0xD800 || code > (jint) 0xDFFF) {
      *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) ((jint) 0xE0 | (JreRShift32(code, 12)));
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | ((JreRShift32(code, 6)) & (jint) 0x3F));
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | (code & (jint) 0x3F));
    }
    else {
      if (code < (jint) 0xDC00 && i < end) {
        jint utf32 = (jint) IOSCharArray_Get(source, i);
        if (utf32 >= (jint) 0xDC00 && utf32 <= (jint) 0xDFFF) {
          utf32 = (JreLShift32(code, 10)) + utf32 + OrgApacheLuceneUtilUnicodeUtil_SURROGATE_OFFSET;
          i++;
          *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) ((jint) 0xF0 | (JreRShift32(utf32, 18)));
          *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | ((JreRShift32(utf32, 12)) & (jint) 0x3F));
          *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | ((JreRShift32(utf32, 6)) & (jint) 0x3F));
          *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | (utf32 & (jint) 0x3F));
          continue;
        }
      }
      *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) (jint) 0xEF;
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) (jint) 0xBF;
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) (jint) 0xBD;
    }
  }
  return upto;
}

jint OrgApacheLuceneUtilUnicodeUtil_UTF16toUTF8WithJavaLangCharSequence_withInt_withInt_withByteArray_(id<JavaLangCharSequence> s, jint offset, jint length, IOSByteArray *outArg) {
  OrgApacheLuceneUtilUnicodeUtil_initialize();
  jint end = offset + length;
  jint upto = 0;
  for (jint i = offset; i < end; i++) {
    jint code = (jint) [((id<JavaLangCharSequence>) nil_chk(s)) charAtWithInt:i];
    if (code < (jint) 0x80) *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) code;
    else if (code < (jint) 0x800) {
      *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) ((jint) 0xC0 | (JreRShift32(code, 6)));
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | (code & (jint) 0x3F));
    }
    else if (code < (jint) 0xD800 || code > (jint) 0xDFFF) {
      *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) ((jint) 0xE0 | (JreRShift32(code, 12)));
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | ((JreRShift32(code, 6)) & (jint) 0x3F));
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | (code & (jint) 0x3F));
    }
    else {
      if (code < (jint) 0xDC00 && (i < end - 1)) {
        jint utf32 = (jint) [s charAtWithInt:i + 1];
        if (utf32 >= (jint) 0xDC00 && utf32 <= (jint) 0xDFFF) {
          utf32 = (JreLShift32(code, 10)) + utf32 + OrgApacheLuceneUtilUnicodeUtil_SURROGATE_OFFSET;
          i++;
          *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) ((jint) 0xF0 | (JreRShift32(utf32, 18)));
          *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | ((JreRShift32(utf32, 12)) & (jint) 0x3F));
          *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | ((JreRShift32(utf32, 6)) & (jint) 0x3F));
          *IOSByteArray_GetRef(outArg, upto++) = (jbyte) ((jint) 0x80 | (utf32 & (jint) 0x3F));
          continue;
        }
      }
      *IOSByteArray_GetRef(nil_chk(outArg), upto++) = (jbyte) (jint) 0xEF;
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) (jint) 0xBF;
      *IOSByteArray_GetRef(outArg, upto++) = (jbyte) (jint) 0xBD;
    }
  }
  return upto;
}

jint OrgApacheLuceneUtilUnicodeUtil_codePointCountWithOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneUtilBytesRef *utf8) {
  OrgApacheLuceneUtilUnicodeUtil_initialize();
  jint pos = ((OrgApacheLuceneUtilBytesRef *) nil_chk(utf8))->offset_;
  jint limit = pos + utf8->length_;
  IOSByteArray *bytes = utf8->bytes_;
  jint codePointCount = 0;
  for (; pos < limit; codePointCount++) {
    jint v = IOSByteArray_Get(nil_chk(bytes), pos) & (jint) 0xFF;
    if (v < (jint) 0x80) {
      pos += 1;
      continue;
    }
    if (v >= (jint) 0xc0) {
      if (v < (jint) 0xe0) {
        pos += 2;
        continue;
      }
      if (v < (jint) 0xf0) {
        pos += 3;
        continue;
      }
      if (v < (jint) 0xf8) {
        pos += 4;
        continue;
      }
    }
    @throw [new_JavaLangIllegalArgumentException_init() autorelease];
  }
  if (pos > limit) @throw [new_JavaLangIllegalArgumentException_init() autorelease];
  return codePointCount;
}

NSString *OrgApacheLuceneUtilUnicodeUtil_newStringWithIntArray_withInt_withInt_(IOSIntArray *codePoints, jint offset, jint count) {
  OrgApacheLuceneUtilUnicodeUtil_initialize();
  if (count < 0) {
    @throw [new_JavaLangIllegalArgumentException_init() autorelease];
  }
  IOSCharArray *chars = [IOSCharArray arrayWithLength:count];
  jint w = 0;
  for (jint r = offset, e = offset + count; r < e; ++r) {
    jint cp = IOSIntArray_Get(nil_chk(codePoints), r);
    if (cp < 0 || cp > (jint) 0x10ffff) {
      @throw [new_JavaLangIllegalArgumentException_init() autorelease];
    }
    while (YES) {
      @try {
        if (cp < (jint) 0x010000) {
          *IOSCharArray_GetRef(chars, w) = (jchar) cp;
          w++;
        }
        else {
          *IOSCharArray_GetRef(chars, w) = (jchar) (OrgApacheLuceneUtilUnicodeUtil_LEAD_SURROGATE_OFFSET_ + (JreRShift32(cp, OrgApacheLuceneUtilUnicodeUtil_LEAD_SURROGATE_SHIFT_)));
          *IOSCharArray_GetRef(chars, w + 1) = (jchar) (OrgApacheLuceneUtilUnicodeUtil_TRAIL_SURROGATE_MIN_VALUE + (cp & OrgApacheLuceneUtilUnicodeUtil_TRAIL_SURROGATE_MASK_));
          w += 2;
        }
        break;
      }
      @catch (JavaLangIndexOutOfBoundsException *ex) {
        jint newlen = JreFpToInt((JavaLangMath_ceilWithDouble_((jdouble) codePoints->size_ * (w + 2) / (r - offset + 1))));
        IOSCharArray *temp = [IOSCharArray arrayWithLength:newlen];
        JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(chars, 0, temp, 0, w);
        chars = temp;
      }
    }
  }
  return [NSString stringWithCharacters:chars offset:0 length:w];
}

jint OrgApacheLuceneUtilUnicodeUtil_UTF8toUTF16WithByteArray_withInt_withInt_withCharArray_(IOSByteArray *utf8, jint offset, jint length, IOSCharArray *outArg) {
  OrgApacheLuceneUtilUnicodeUtil_initialize();
  jint out_offset = 0;
  jint limit = offset + length;
  while (offset < limit) {
    jint b = IOSByteArray_Get(nil_chk(utf8), offset++) & (jint) 0xff;
    if (b < (jint) 0xc0) {
      JreAssert((b < (jint) 0x80), (@"org/apache/lucene/util/UnicodeUtil.java:546 condition failed: assert b < 0x80;"));
      *IOSCharArray_GetRef(nil_chk(outArg), out_offset++) = (jchar) b;
    }
    else if (b < (jint) 0xe0) {
      *IOSCharArray_GetRef(nil_chk(outArg), out_offset++) = (jchar) ((JreLShift32((b & (jint) 0x1f), 6)) + (IOSByteArray_Get(utf8, offset++) & (jint) 0x3f));
    }
    else if (b < (jint) 0xf0) {
      *IOSCharArray_GetRef(nil_chk(outArg), out_offset++) = (jchar) ((JreLShift32((b & (jint) 0xf), 12)) + (JreLShift32((IOSByteArray_Get(utf8, offset) & (jint) 0x3f), 6)) + (IOSByteArray_Get(utf8, offset + 1) & (jint) 0x3f));
      offset += 2;
    }
    else {
      JreAssert((b < (jint) 0xf8), (JreStrcat("$$", @"b = 0x", JavaLangInteger_toHexStringWithInt_(b))));
      jint ch = (JreLShift32((b & (jint) 0x7), 18)) + (JreLShift32((IOSByteArray_Get(utf8, offset) & (jint) 0x3f), 12)) + (JreLShift32((IOSByteArray_Get(utf8, offset + 1) & (jint) 0x3f), 6)) + (IOSByteArray_Get(utf8, offset + 2) & (jint) 0x3f);
      offset += 3;
      if (ch < OrgApacheLuceneUtilUnicodeUtil_UNI_MAX_BMP) {
        *IOSCharArray_GetRef(nil_chk(outArg), out_offset++) = (jchar) ch;
      }
      else {
        jint chHalf = ch - (jint) 0x0010000;
        *IOSCharArray_GetRef(nil_chk(outArg), out_offset++) = (jchar) ((JreRShift32(chHalf, 10)) + (jint) 0xD800);
        *IOSCharArray_GetRef(outArg, out_offset++) = (jchar) ((chHalf & OrgApacheLuceneUtilUnicodeUtil_HALF_MASK) + (jint) 0xDC00);
      }
    }
  }
  return out_offset;
}

jint OrgApacheLuceneUtilUnicodeUtil_UTF8toUTF16WithOrgApacheLuceneUtilBytesRef_withCharArray_(OrgApacheLuceneUtilBytesRef *bytesRef, IOSCharArray *chars) {
  OrgApacheLuceneUtilUnicodeUtil_initialize();
  return OrgApacheLuceneUtilUnicodeUtil_UTF8toUTF16WithByteArray_withInt_withInt_withCharArray_(((OrgApacheLuceneUtilBytesRef *) nil_chk(bytesRef))->bytes_, bytesRef->offset_, bytesRef->length_, chars);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilUnicodeUtil)
