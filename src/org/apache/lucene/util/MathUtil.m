//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/util/MathUtil.java
//

#include "J2ObjC_source.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Long.h"
#include "java/lang/Math.h"
#include "org/apache/lucene/util/MathUtil.h"

@implementation OrgApacheLuceneUtilMathUtil

+ (jint)logWithLong:(jlong)x
            withInt:(jint)base {
  return OrgApacheLuceneUtilMathUtil_logWithLong_withInt_(x, base);
}

+ (jlong)gcdWithLong:(jlong)a
            withLong:(jlong)b {
  return OrgApacheLuceneUtilMathUtil_gcdWithLong_withLong_(a, b);
}

- (instancetype)init {
  OrgApacheLuceneUtilMathUtil_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "logWithLong:withInt:", "log", "I", 0x9, NULL, NULL },
    { "gcdWithLong:withLong:", "gcd", "J", 0x9, NULL, NULL },
    { "init", NULL, NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilMathUtil = { 2, "MathUtil", "org.apache.lucene.util", NULL, 0x11, 3, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneUtilMathUtil;
}

@end

jint OrgApacheLuceneUtilMathUtil_logWithLong_withInt_(jlong x, jint base) {
  OrgApacheLuceneUtilMathUtil_initialize();
  if (base <= 1) {
    @throw [new_JavaLangIllegalArgumentException_initWithNSString_(@"base must be > 1") autorelease];
  }
  jint ret = 0;
  while (x >= base) {
    x /= base;
    ret++;
  }
  return ret;
}

jlong OrgApacheLuceneUtilMathUtil_gcdWithLong_withLong_(jlong a, jlong b) {
  OrgApacheLuceneUtilMathUtil_initialize();
  a = JavaLangMath_absWithLong_(a);
  b = JavaLangMath_absWithLong_(b);
  if (a == 0) {
    return b;
  }
  else if (b == 0) {
    return a;
  }
  jint commonTrailingZeros = JavaLangLong_numberOfTrailingZerosWithLong_(a | b);
  JreURShiftAssignLong(&a, JavaLangLong_numberOfTrailingZerosWithLong_(a));
  while (YES) {
    JreURShiftAssignLong(&b, JavaLangLong_numberOfTrailingZerosWithLong_(b));
    if (a == b) {
      break;
    }
    else if (a > b || a == JavaLangLong_MIN_VALUE) {
      jlong tmp = a;
      a = b;
      b = tmp;
    }
    if (a == 1) {
      break;
    }
    b -= a;
  }
  return JreLShift64(a, commonTrailingZeros);
}

void OrgApacheLuceneUtilMathUtil_init(OrgApacheLuceneUtilMathUtil *self) {
  NSObject_init(self);
}

OrgApacheLuceneUtilMathUtil *new_OrgApacheLuceneUtilMathUtil_init() {
  OrgApacheLuceneUtilMathUtil *self = [OrgApacheLuceneUtilMathUtil alloc];
  OrgApacheLuceneUtilMathUtil_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilMathUtil)
