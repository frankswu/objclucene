//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./core/src/java/org/apache/lucene/util/fst/Util.java
//

#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/io/Writer.h"
#include "java/lang/Byte.h"
#include "java/lang/CharSequence.h"
#include "java/lang/Character.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/util/ArrayList.h"
#include "java/util/BitSet.h"
#include "java/util/Comparator.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/TreeSet.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/BytesRefBuilder.h"
#include "org/apache/lucene/util/IntsRef.h"
#include "org/apache/lucene/util/IntsRefBuilder.h"
#include "org/apache/lucene/util/fst/FST.h"
#include "org/apache/lucene/util/fst/Outputs.h"
#include "org/apache/lucene/util/fst/Util.h"

@interface OrgApacheLuceneUtilFstUtil ()

- (instancetype)init;

+ (void)emitDotStateWithJavaIoWriter:(JavaIoWriter *)outArg
                        withNSString:(NSString *)name
                        withNSString:(NSString *)shape
                        withNSString:(NSString *)color
                        withNSString:(NSString *)label;

+ (NSString *)printableLabelWithInt:(jint)label;

@end

__attribute__((unused)) static void OrgApacheLuceneUtilFstUtil_init(OrgApacheLuceneUtilFstUtil *self);

__attribute__((unused)) static OrgApacheLuceneUtilFstUtil *new_OrgApacheLuceneUtilFstUtil_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static void OrgApacheLuceneUtilFstUtil_emitDotStateWithJavaIoWriter_withNSString_withNSString_withNSString_withNSString_(JavaIoWriter *outArg, NSString *name, NSString *shape, NSString *color, NSString *label);

__attribute__((unused)) static NSString *OrgApacheLuceneUtilFstUtil_printableLabelWithInt_(jint label);

@interface OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator : NSObject < JavaUtilComparator > {
 @public
  id<JavaUtilComparator> comparator_;
}

- (instancetype)initWithJavaUtilComparator:(id<JavaUtilComparator>)comparator;

- (jint)compareWithId:(OrgApacheLuceneUtilFstUtil_FSTPath *)a
               withId:(OrgApacheLuceneUtilFstUtil_FSTPath *)b;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator)

J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator, comparator_, id<JavaUtilComparator>)

__attribute__((unused)) static void OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator_initWithJavaUtilComparator_(OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator *self, id<JavaUtilComparator> comparator);

__attribute__((unused)) static OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator *new_OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator_initWithJavaUtilComparator_(id<JavaUtilComparator> comparator) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator)

@interface OrgApacheLuceneUtilFstUtil_TopNSearcher () {
 @public
  OrgApacheLuceneUtilFstFST *fst_;
  OrgApacheLuceneUtilFstFST_BytesReader *bytesReader_;
  jint topN_;
  jint maxQueueDepth_;
  OrgApacheLuceneUtilFstFST_Arc *scratchArc_;
  id<JavaUtilComparator> comparator_;
  id<JavaUtilComparator> pathComparator_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilFstUtil_TopNSearcher, fst_, OrgApacheLuceneUtilFstFST *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilFstUtil_TopNSearcher, bytesReader_, OrgApacheLuceneUtilFstFST_BytesReader *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilFstUtil_TopNSearcher, scratchArc_, OrgApacheLuceneUtilFstFST_Arc *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilFstUtil_TopNSearcher, comparator_, id<JavaUtilComparator>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneUtilFstUtil_TopNSearcher, pathComparator_, id<JavaUtilComparator>)

@implementation OrgApacheLuceneUtilFstUtil

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgApacheLuceneUtilFstUtil_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (id)getWithOrgApacheLuceneUtilFstFST:(OrgApacheLuceneUtilFstFST *)fst
        withOrgApacheLuceneUtilIntsRef:(OrgApacheLuceneUtilIntsRef *)input {
  return OrgApacheLuceneUtilFstUtil_getWithOrgApacheLuceneUtilFstFST_withOrgApacheLuceneUtilIntsRef_(fst, input);
}

+ (id)getWithOrgApacheLuceneUtilFstFST:(OrgApacheLuceneUtilFstFST *)fst
       withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)input {
  return OrgApacheLuceneUtilFstUtil_getWithOrgApacheLuceneUtilFstFST_withOrgApacheLuceneUtilBytesRef_(fst, input);
}

+ (OrgApacheLuceneUtilIntsRef *)getByOutputWithOrgApacheLuceneUtilFstFST:(OrgApacheLuceneUtilFstFST *)fst
                                                                withLong:(jlong)targetOutput {
  return OrgApacheLuceneUtilFstUtil_getByOutputWithOrgApacheLuceneUtilFstFST_withLong_(fst, targetOutput);
}

+ (OrgApacheLuceneUtilIntsRef *)getByOutputWithOrgApacheLuceneUtilFstFST:(OrgApacheLuceneUtilFstFST *)fst
                                                                withLong:(jlong)targetOutput
                               withOrgApacheLuceneUtilFstFST_BytesReader:(OrgApacheLuceneUtilFstFST_BytesReader *)inArg
                                       withOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)arc
                                       withOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)scratchArc
                                   withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)result {
  return OrgApacheLuceneUtilFstUtil_getByOutputWithOrgApacheLuceneUtilFstFST_withLong_withOrgApacheLuceneUtilFstFST_BytesReader_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_(fst, targetOutput, inArg, arc, scratchArc, result);
}

+ (OrgApacheLuceneUtilFstUtil_TopResults *)shortestPathsWithOrgApacheLuceneUtilFstFST:(OrgApacheLuceneUtilFstFST *)fst
                                                    withOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)fromNode
                                                                               withId:(id)startOutput
                                                               withJavaUtilComparator:(id<JavaUtilComparator>)comparator
                                                                              withInt:(jint)topN
                                                                          withBoolean:(jboolean)allowEmptyString {
  return OrgApacheLuceneUtilFstUtil_shortestPathsWithOrgApacheLuceneUtilFstFST_withOrgApacheLuceneUtilFstFST_Arc_withId_withJavaUtilComparator_withInt_withBoolean_(fst, fromNode, startOutput, comparator, topN, allowEmptyString);
}

+ (void)toDotWithOrgApacheLuceneUtilFstFST:(OrgApacheLuceneUtilFstFST *)fst
                          withJavaIoWriter:(JavaIoWriter *)outArg
                               withBoolean:(jboolean)sameRank
                               withBoolean:(jboolean)labelStates {
  OrgApacheLuceneUtilFstUtil_toDotWithOrgApacheLuceneUtilFstFST_withJavaIoWriter_withBoolean_withBoolean_(fst, outArg, sameRank, labelStates);
}

+ (void)emitDotStateWithJavaIoWriter:(JavaIoWriter *)outArg
                        withNSString:(NSString *)name
                        withNSString:(NSString *)shape
                        withNSString:(NSString *)color
                        withNSString:(NSString *)label {
  OrgApacheLuceneUtilFstUtil_emitDotStateWithJavaIoWriter_withNSString_withNSString_withNSString_withNSString_(outArg, name, shape, color, label);
}

+ (NSString *)printableLabelWithInt:(jint)label {
  return OrgApacheLuceneUtilFstUtil_printableLabelWithInt_(label);
}

+ (OrgApacheLuceneUtilIntsRef *)toUTF16WithJavaLangCharSequence:(id<JavaLangCharSequence>)s
                          withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)scratch {
  return OrgApacheLuceneUtilFstUtil_toUTF16WithJavaLangCharSequence_withOrgApacheLuceneUtilIntsRefBuilder_(s, scratch);
}

+ (OrgApacheLuceneUtilIntsRef *)toUTF32WithJavaLangCharSequence:(id<JavaLangCharSequence>)s
                          withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)scratch {
  return OrgApacheLuceneUtilFstUtil_toUTF32WithJavaLangCharSequence_withOrgApacheLuceneUtilIntsRefBuilder_(s, scratch);
}

+ (OrgApacheLuceneUtilIntsRef *)toUTF32WithCharArray:(IOSCharArray *)s
                                             withInt:(jint)offset
                                             withInt:(jint)length
               withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)scratch {
  return OrgApacheLuceneUtilFstUtil_toUTF32WithCharArray_withInt_withInt_withOrgApacheLuceneUtilIntsRefBuilder_(s, offset, length, scratch);
}

+ (OrgApacheLuceneUtilIntsRef *)toIntsRefWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)input
                                   withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)scratch {
  return OrgApacheLuceneUtilFstUtil_toIntsRefWithOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneUtilIntsRefBuilder_(input, scratch);
}

+ (OrgApacheLuceneUtilBytesRef *)toBytesRefWithOrgApacheLuceneUtilIntsRef:(OrgApacheLuceneUtilIntsRef *)input
                                   withOrgApacheLuceneUtilBytesRefBuilder:(OrgApacheLuceneUtilBytesRefBuilder *)scratch {
  return OrgApacheLuceneUtilFstUtil_toBytesRefWithOrgApacheLuceneUtilIntsRef_withOrgApacheLuceneUtilBytesRefBuilder_(input, scratch);
}

+ (OrgApacheLuceneUtilFstFST_Arc *)readCeilArcWithInt:(jint)label
                        withOrgApacheLuceneUtilFstFST:(OrgApacheLuceneUtilFstFST *)fst
                    withOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)follow
                    withOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)arc
            withOrgApacheLuceneUtilFstFST_BytesReader:(OrgApacheLuceneUtilFstFST_BytesReader *)inArg {
  return OrgApacheLuceneUtilFstUtil_readCeilArcWithInt_withOrgApacheLuceneUtilFstFST_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilFstFST_BytesReader_(label, fst, follow, arc, inArg);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "Util", NULL, 0x2, NULL, NULL },
    { "getWithOrgApacheLuceneUtilFstFST:withOrgApacheLuceneUtilIntsRef:", "get", "TT;", 0x9, "Ljava.io.IOException;", "<T:Ljava/lang/Object;>(Lorg/apache/lucene/util/fst/FST<TT;>;Lorg/apache/lucene/util/IntsRef;)TT;" },
    { "getWithOrgApacheLuceneUtilFstFST:withOrgApacheLuceneUtilBytesRef:", "get", "TT;", 0x9, "Ljava.io.IOException;", "<T:Ljava/lang/Object;>(Lorg/apache/lucene/util/fst/FST<TT;>;Lorg/apache/lucene/util/BytesRef;)TT;" },
    { "getByOutputWithOrgApacheLuceneUtilFstFST:withLong:", "getByOutput", "Lorg.apache.lucene.util.IntsRef;", 0x9, "Ljava.io.IOException;", NULL },
    { "getByOutputWithOrgApacheLuceneUtilFstFST:withLong:withOrgApacheLuceneUtilFstFST_BytesReader:withOrgApacheLuceneUtilFstFST_Arc:withOrgApacheLuceneUtilFstFST_Arc:withOrgApacheLuceneUtilIntsRefBuilder:", "getByOutput", "Lorg.apache.lucene.util.IntsRef;", 0x9, "Ljava.io.IOException;", NULL },
    { "shortestPathsWithOrgApacheLuceneUtilFstFST:withOrgApacheLuceneUtilFstFST_Arc:withId:withJavaUtilComparator:withInt:withBoolean:", "shortestPaths", "Lorg.apache.lucene.util.fst.Util$TopResults;", 0x9, "Ljava.io.IOException;", "<T:Ljava/lang/Object;>(Lorg/apache/lucene/util/fst/FST<TT;>;Lorg/apache/lucene/util/fst/FST$Arc<TT;>;TT;Ljava/util/Comparator<TT;>;IZ)Lorg/apache/lucene/util/fst/Util$TopResults<TT;>;" },
    { "toDotWithOrgApacheLuceneUtilFstFST:withJavaIoWriter:withBoolean:withBoolean:", "toDot", "V", 0x9, "Ljava.io.IOException;", "<T:Ljava/lang/Object;>(Lorg/apache/lucene/util/fst/FST<TT;>;Ljava/io/Writer;ZZ)V" },
    { "emitDotStateWithJavaIoWriter:withNSString:withNSString:withNSString:withNSString:", "emitDotState", "V", 0xa, "Ljava.io.IOException;", NULL },
    { "printableLabelWithInt:", "printableLabel", "Ljava.lang.String;", 0xa, NULL, NULL },
    { "toUTF16WithJavaLangCharSequence:withOrgApacheLuceneUtilIntsRefBuilder:", "toUTF16", "Lorg.apache.lucene.util.IntsRef;", 0x9, NULL, NULL },
    { "toUTF32WithJavaLangCharSequence:withOrgApacheLuceneUtilIntsRefBuilder:", "toUTF32", "Lorg.apache.lucene.util.IntsRef;", 0x9, NULL, NULL },
    { "toUTF32WithCharArray:withInt:withInt:withOrgApacheLuceneUtilIntsRefBuilder:", "toUTF32", "Lorg.apache.lucene.util.IntsRef;", 0x9, NULL, NULL },
    { "toIntsRefWithOrgApacheLuceneUtilBytesRef:withOrgApacheLuceneUtilIntsRefBuilder:", "toIntsRef", "Lorg.apache.lucene.util.IntsRef;", 0x9, NULL, NULL },
    { "toBytesRefWithOrgApacheLuceneUtilIntsRef:withOrgApacheLuceneUtilBytesRefBuilder:", "toBytesRef", "Lorg.apache.lucene.util.BytesRef;", 0x9, NULL, NULL },
    { "readCeilArcWithInt:withOrgApacheLuceneUtilFstFST:withOrgApacheLuceneUtilFstFST_Arc:withOrgApacheLuceneUtilFstFST_Arc:withOrgApacheLuceneUtilFstFST_BytesReader:", "readCeilArc", "Lorg.apache.lucene.util.fst.FST$Arc;", 0x9, "Ljava.io.IOException;", "<T:Ljava/lang/Object;>(ILorg/apache/lucene/util/fst/FST<TT;>;Lorg/apache/lucene/util/fst/FST$Arc<TT;>;Lorg/apache/lucene/util/fst/FST$Arc<TT;>;Lorg/apache/lucene/util/fst/FST$BytesReader;)Lorg/apache/lucene/util/fst/FST$Arc<TT;>;" },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.util.fst.Util$FSTPath;", "Lorg.apache.lucene.util.fst.Util$TieBreakByInputComparator;", "Lorg.apache.lucene.util.fst.Util$TopNSearcher;", "Lorg.apache.lucene.util.fst.Util$Result;", "Lorg.apache.lucene.util.fst.Util$TopResults;"};
  static const J2ObjcClassInfo _OrgApacheLuceneUtilFstUtil = { 2, "Util", "org.apache.lucene.util.fst", NULL, 0x11, 15, methods, 0, NULL, 0, NULL, 5, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneUtilFstUtil;
}

@end

void OrgApacheLuceneUtilFstUtil_init(OrgApacheLuceneUtilFstUtil *self) {
  NSObject_init(self);
}

OrgApacheLuceneUtilFstUtil *new_OrgApacheLuceneUtilFstUtil_init() {
  OrgApacheLuceneUtilFstUtil *self = [OrgApacheLuceneUtilFstUtil alloc];
  OrgApacheLuceneUtilFstUtil_init(self);
  return self;
}

id OrgApacheLuceneUtilFstUtil_getWithOrgApacheLuceneUtilFstFST_withOrgApacheLuceneUtilIntsRef_(OrgApacheLuceneUtilFstFST *fst, OrgApacheLuceneUtilIntsRef *input) {
  OrgApacheLuceneUtilFstUtil_initialize();
  OrgApacheLuceneUtilFstFST_Arc *arc = [((OrgApacheLuceneUtilFstFST *) nil_chk(fst)) getFirstArcWithOrgApacheLuceneUtilFstFST_Arc:[new_OrgApacheLuceneUtilFstFST_Arc_init() autorelease]];
  OrgApacheLuceneUtilFstFST_BytesReader *fstReader = [fst getBytesReader];
  id output = [((OrgApacheLuceneUtilFstOutputs *) nil_chk(fst->outputs_)) getNoOutput];
  for (jint i = 0; i < ((OrgApacheLuceneUtilIntsRef *) nil_chk(input))->length_; i++) {
    if ([fst findTargetArcWithInt:IOSIntArray_Get(nil_chk(input->ints_), input->offset_ + i) withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:fstReader] == nil) {
      return nil;
    }
    output = [fst->outputs_ addWithId:output withId:((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->output_];
  }
  if ([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc)) isFinal]) {
    return [fst->outputs_ addWithId:output withId:arc->nextFinalOutput_];
  }
  else {
    return nil;
  }
}

id OrgApacheLuceneUtilFstUtil_getWithOrgApacheLuceneUtilFstFST_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneUtilFstFST *fst, OrgApacheLuceneUtilBytesRef *input) {
  OrgApacheLuceneUtilFstUtil_initialize();
  JreAssert((((OrgApacheLuceneUtilFstFST *) nil_chk(fst))->inputType_ == JreLoadStatic(OrgApacheLuceneUtilFstFST_INPUT_TYPEEnum, BYTE1)), (@"org/apache/lucene/util/fst/Util.java:73 condition failed: assert fst.inputType == FST.INPUT_TYPE.BYTE1;"));
  OrgApacheLuceneUtilFstFST_BytesReader *fstReader = [fst getBytesReader];
  OrgApacheLuceneUtilFstFST_Arc *arc = [fst getFirstArcWithOrgApacheLuceneUtilFstFST_Arc:[new_OrgApacheLuceneUtilFstFST_Arc_init() autorelease]];
  id output = [((OrgApacheLuceneUtilFstOutputs *) nil_chk(fst->outputs_)) getNoOutput];
  for (jint i = 0; i < ((OrgApacheLuceneUtilBytesRef *) nil_chk(input))->length_; i++) {
    if ([fst findTargetArcWithInt:IOSByteArray_Get(nil_chk(input->bytes_), i + input->offset_) & (jint) 0xFF withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:fstReader] == nil) {
      return nil;
    }
    output = [fst->outputs_ addWithId:output withId:((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->output_];
  }
  if ([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc)) isFinal]) {
    return [fst->outputs_ addWithId:output withId:arc->nextFinalOutput_];
  }
  else {
    return nil;
  }
}

OrgApacheLuceneUtilIntsRef *OrgApacheLuceneUtilFstUtil_getByOutputWithOrgApacheLuceneUtilFstFST_withLong_(OrgApacheLuceneUtilFstFST *fst, jlong targetOutput) {
  OrgApacheLuceneUtilFstUtil_initialize();
  OrgApacheLuceneUtilFstFST_BytesReader *in = [((OrgApacheLuceneUtilFstFST *) nil_chk(fst)) getBytesReader];
  OrgApacheLuceneUtilFstFST_Arc *arc = [fst getFirstArcWithOrgApacheLuceneUtilFstFST_Arc:[new_OrgApacheLuceneUtilFstFST_Arc_init() autorelease]];
  OrgApacheLuceneUtilFstFST_Arc *scratchArc = [new_OrgApacheLuceneUtilFstFST_Arc_init() autorelease];
  OrgApacheLuceneUtilIntsRefBuilder *result = [new_OrgApacheLuceneUtilIntsRefBuilder_init() autorelease];
  return OrgApacheLuceneUtilFstUtil_getByOutputWithOrgApacheLuceneUtilFstFST_withLong_withOrgApacheLuceneUtilFstFST_BytesReader_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_(fst, targetOutput, in, arc, scratchArc, result);
}

OrgApacheLuceneUtilIntsRef *OrgApacheLuceneUtilFstUtil_getByOutputWithOrgApacheLuceneUtilFstFST_withLong_withOrgApacheLuceneUtilFstFST_BytesReader_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_(OrgApacheLuceneUtilFstFST *fst, jlong targetOutput, OrgApacheLuceneUtilFstFST_BytesReader *inArg, OrgApacheLuceneUtilFstFST_Arc *arc, OrgApacheLuceneUtilFstFST_Arc *scratchArc, OrgApacheLuceneUtilIntsRefBuilder *result) {
  OrgApacheLuceneUtilFstUtil_initialize();
  jlong output = [((JavaLangLong *) nil_chk(((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->output_)) longLongValue];
  jint upto = 0;
  while (true) {
    if ([arc isFinal]) {
      jlong finalOutput = output + [((JavaLangLong *) nil_chk(arc->nextFinalOutput_)) longLongValue];
      if (finalOutput == targetOutput) {
        [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(result)) setLengthWithInt:upto];
        return [result get];
      }
      else if (finalOutput > targetOutput) {
        return nil;
      }
    }
    if (OrgApacheLuceneUtilFstFST_targetHasArcsWithOrgApacheLuceneUtilFstFST_Arc_(arc)) {
      [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(result)) growWithInt:1 + upto];
      [((OrgApacheLuceneUtilFstFST *) nil_chk(fst)) readFirstRealTargetArcWithLong:arc->target_ withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:inArg];
      if (arc->bytesPerArc_ != 0) {
        jint low = 0;
        jint high = arc->numArcs_ - 1;
        jint mid = 0;
        jboolean exact = false;
        while (low <= high) {
          mid = JreURShift32((low + high), 1);
          [((OrgApacheLuceneUtilFstFST_BytesReader *) nil_chk(inArg)) setPositionWithLong:arc->posArcsStart_];
          [inArg skipBytesWithLong:arc->bytesPerArc_ * mid];
          jbyte flags = [inArg readByte];
          [fst readLabelWithOrgApacheLuceneStoreDataInput:inArg];
          jlong minArcOutput;
          if ((flags & OrgApacheLuceneUtilFstFST_BIT_ARC_HAS_OUTPUT) != 0) {
            jlong arcOutput = [((JavaLangLong *) nil_chk([((OrgApacheLuceneUtilFstOutputs *) nil_chk(fst->outputs_)) readWithOrgApacheLuceneStoreDataInput:inArg])) longLongValue];
            minArcOutput = output + arcOutput;
          }
          else {
            minArcOutput = output;
          }
          if (minArcOutput == targetOutput) {
            exact = true;
            break;
          }
          else if (minArcOutput < targetOutput) {
            low = mid + 1;
          }
          else {
            high = mid - 1;
          }
        }
        if (high == -1) {
          return nil;
        }
        else if (exact) {
          arc->arcIdx_ = mid - 1;
        }
        else {
          arc->arcIdx_ = low - 2;
        }
        [fst readNextRealArcWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:inArg];
        [result setIntAtWithInt:upto++ withInt:arc->label_];
        output += [((JavaLangLong *) arc->output_) longLongValue];
      }
      else {
        OrgApacheLuceneUtilFstFST_Arc *prevArc = nil;
        while (true) {
          jlong minArcOutput = output + [((JavaLangLong *) arc->output_) longLongValue];
          if (minArcOutput == targetOutput) {
            output = minArcOutput;
            [result setIntAtWithInt:upto++ withInt:arc->label_];
            break;
          }
          else if (minArcOutput > targetOutput) {
            if (prevArc == nil) {
              return nil;
            }
            else {
              [arc copyFromWithOrgApacheLuceneUtilFstFST_Arc:prevArc];
              [result setIntAtWithInt:upto++ withInt:arc->label_];
              output += [((JavaLangLong *) arc->output_) longLongValue];
              break;
            }
          }
          else if ([arc isLast]) {
            output = minArcOutput;
            [result setIntAtWithInt:upto++ withInt:arc->label_];
            break;
          }
          else {
            prevArc = scratchArc;
            [((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(prevArc)) copyFromWithOrgApacheLuceneUtilFstFST_Arc:arc];
            [fst readNextRealArcWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:inArg];
          }
        }
      }
    }
    else {
      return nil;
    }
  }
}

OrgApacheLuceneUtilFstUtil_TopResults *OrgApacheLuceneUtilFstUtil_shortestPathsWithOrgApacheLuceneUtilFstFST_withOrgApacheLuceneUtilFstFST_Arc_withId_withJavaUtilComparator_withInt_withBoolean_(OrgApacheLuceneUtilFstFST *fst, OrgApacheLuceneUtilFstFST_Arc *fromNode, id startOutput, id<JavaUtilComparator> comparator, jint topN, jboolean allowEmptyString) {
  OrgApacheLuceneUtilFstUtil_initialize();
  OrgApacheLuceneUtilFstUtil_TopNSearcher *searcher = [new_OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_(fst, topN, topN, comparator) autorelease];
  [searcher addStartPathsWithOrgApacheLuceneUtilFstFST_Arc:fromNode withId:startOutput withBoolean:allowEmptyString withOrgApacheLuceneUtilIntsRefBuilder:[new_OrgApacheLuceneUtilIntsRefBuilder_init() autorelease]];
  return [searcher search];
}

void OrgApacheLuceneUtilFstUtil_toDotWithOrgApacheLuceneUtilFstFST_withJavaIoWriter_withBoolean_withBoolean_(OrgApacheLuceneUtilFstFST *fst, JavaIoWriter *outArg, jboolean sameRank, jboolean labelStates) {
  OrgApacheLuceneUtilFstUtil_initialize();
  NSString *expandedNodeColor = @"blue";
  OrgApacheLuceneUtilFstFST_Arc *startArc = [((OrgApacheLuceneUtilFstFST *) nil_chk(fst)) getFirstArcWithOrgApacheLuceneUtilFstFST_Arc:[new_OrgApacheLuceneUtilFstFST_Arc_init() autorelease]];
  id<JavaUtilList> thisLevelQueue = [new_JavaUtilArrayList_init() autorelease];
  id<JavaUtilList> nextLevelQueue = [new_JavaUtilArrayList_init() autorelease];
  [nextLevelQueue addWithId:startArc];
  id<JavaUtilList> sameLevelStates = [new_JavaUtilArrayList_init() autorelease];
  JavaUtilBitSet *seen = [new_JavaUtilBitSet_init() autorelease];
  [seen setWithInt:(jint) ((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(startArc))->target_];
  NSString *stateShape = @"circle";
  NSString *finalStateShape = @"doublecircle";
  [((JavaIoWriter *) nil_chk(outArg)) writeWithNSString:@"digraph FST {\n"];
  [outArg writeWithNSString:@"  rankdir = LR; splines=true; concentrate=true; ordering=out; ranksep=2.5; \n"];
  if (!labelStates) {
    [outArg writeWithNSString:@"  node [shape=circle, width=.2, height=.2, style=filled]\n"];
  }
  OrgApacheLuceneUtilFstUtil_emitDotStateWithJavaIoWriter_withNSString_withNSString_withNSString_withNSString_(outArg, @"initial", @"point", @"white", @"");
  id NO_OUTPUT = [((OrgApacheLuceneUtilFstOutputs *) nil_chk(fst->outputs_)) getNoOutput];
  OrgApacheLuceneUtilFstFST_BytesReader *r = [fst getBytesReader];
  {
    NSString *stateColor;
    if ([fst isExpandedTargetWithOrgApacheLuceneUtilFstFST_Arc:startArc withOrgApacheLuceneUtilFstFST_BytesReader:r]) {
      stateColor = expandedNodeColor;
    }
    else {
      stateColor = nil;
    }
    jboolean isFinal;
    id finalOutput;
    if ([startArc isFinal]) {
      isFinal = true;
      finalOutput = startArc->nextFinalOutput_ == NO_OUTPUT ? nil : startArc->nextFinalOutput_;
    }
    else {
      isFinal = false;
      finalOutput = nil;
    }
    OrgApacheLuceneUtilFstUtil_emitDotStateWithJavaIoWriter_withNSString_withNSString_withNSString_withNSString_(outArg, JavaLangLong_toStringWithLong_(startArc->target_), isFinal ? finalStateShape : stateShape, stateColor, finalOutput == nil ? @"" : [fst->outputs_ outputToStringWithId:finalOutput]);
  }
  [outArg writeWithNSString:JreStrcat("$JC", @"  initial -> ", startArc->target_, 0x000a)];
  jint level = 0;
  while (![nextLevelQueue isEmpty]) {
    [thisLevelQueue addAllWithJavaUtilCollection:nextLevelQueue];
    [nextLevelQueue clear];
    level++;
    [outArg writeWithNSString:JreStrcat("$IC", @"\n  // Transitions and states at level: ", level, 0x000a)];
    while (![thisLevelQueue isEmpty]) {
      OrgApacheLuceneUtilFstFST_Arc *arc = [thisLevelQueue removeWithInt:[thisLevelQueue size] - 1];
      if (OrgApacheLuceneUtilFstFST_targetHasArcsWithOrgApacheLuceneUtilFstFST_Arc_(arc)) {
        jlong node = ((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->target_;
        [fst readFirstRealTargetArcWithLong:arc->target_ withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:r];
        while (true) {
          if (arc->target_ >= 0 && ![seen getWithInt:(jint) arc->target_]) {
            NSString *stateColor;
            if ([fst isExpandedTargetWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:r]) {
              stateColor = expandedNodeColor;
            }
            else {
              stateColor = nil;
            }
            NSString *finalOutput;
            if (arc->nextFinalOutput_ != nil && arc->nextFinalOutput_ != NO_OUTPUT) {
              finalOutput = [fst->outputs_ outputToStringWithId:arc->nextFinalOutput_];
            }
            else {
              finalOutput = @"";
            }
            OrgApacheLuceneUtilFstUtil_emitDotStateWithJavaIoWriter_withNSString_withNSString_withNSString_withNSString_(outArg, JavaLangLong_toStringWithLong_(arc->target_), stateShape, stateColor, finalOutput);
            [seen setWithInt:(jint) arc->target_];
            [nextLevelQueue addWithId:[((OrgApacheLuceneUtilFstFST_Arc *) [new_OrgApacheLuceneUtilFstFST_Arc_init() autorelease]) copyFromWithOrgApacheLuceneUtilFstFST_Arc:arc]];
            [sameLevelStates addWithId:JavaLangInteger_valueOfWithInt_((jint) arc->target_)];
          }
          NSString *outs;
          if (arc->output_ != NO_OUTPUT) {
            outs = JreStrcat("C$", '/', [fst->outputs_ outputToStringWithId:arc->output_]);
          }
          else {
            outs = @"";
          }
          if (!OrgApacheLuceneUtilFstFST_targetHasArcsWithOrgApacheLuceneUtilFstFST_Arc_(arc) && [arc isFinal] && arc->nextFinalOutput_ != NO_OUTPUT) {
            outs = JreStrcat("$$$C", outs, @"/[", [fst->outputs_ outputToStringWithId:arc->nextFinalOutput_], ']');
          }
          NSString *arcColor;
          if ([arc flagWithInt:OrgApacheLuceneUtilFstFST_BIT_TARGET_NEXT]) {
            arcColor = @"red";
          }
          else {
            arcColor = @"black";
          }
          JreAssert((arc->label_ != OrgApacheLuceneUtilFstFST_END_LABEL), (@"org/apache/lucene/util/fst/Util.java:782 condition failed: assert arc.label != FST.END_LABEL;"));
          [outArg writeWithNSString:JreStrcat("$J$J$$$C$$$$", @"  ", node, @" -> ", arc->target_, @" [label=\"", OrgApacheLuceneUtilFstUtil_printableLabelWithInt_(arc->label_), outs, '"', ([arc isFinal] ? @" style=\"bold\"" : @""), @" color=\"", arcColor, @"\"]\n")];
          if ([arc isLast]) {
            break;
          }
          [fst readNextRealArcWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:r];
        }
      }
    }
    if (sameRank && [sameLevelStates size] > 1) {
      [outArg writeWithNSString:@"  {rank=same; "];
      for (JavaLangInteger *boxed__ in sameLevelStates) {
        jint state = [((JavaLangInteger *) nil_chk(boxed__)) intValue];
        [outArg writeWithNSString:JreStrcat("I$", state, @"; ")];
      }
      [outArg writeWithNSString:@" }\n"];
    }
    [sameLevelStates clear];
  }
  [outArg writeWithNSString:@"  -1 [style=filled, color=black, shape=doublecircle, label=\"\"]\n\n"];
  [outArg writeWithNSString:@"  {rank=sink; -1 }\n"];
  [outArg writeWithNSString:@"}\n"];
  [outArg flush];
}

void OrgApacheLuceneUtilFstUtil_emitDotStateWithJavaIoWriter_withNSString_withNSString_withNSString_withNSString_(JavaIoWriter *outArg, NSString *name, NSString *shape, NSString *color, NSString *label) {
  OrgApacheLuceneUtilFstUtil_initialize();
  [((JavaIoWriter *) nil_chk(outArg)) writeWithNSString:JreStrcat("$$$$C$C$$", @"  ", name, @" [", (shape != nil ? JreStrcat("$$", @"shape=", shape) : @""), ' ', (color != nil ? JreStrcat("$$", @"color=", color) : @""), ' ', (label != nil ? JreStrcat("$$C", @"label=\"", label, '"') : @"label=\"\""), @" ]\n")];
}

NSString *OrgApacheLuceneUtilFstUtil_printableLabelWithInt_(jint label) {
  OrgApacheLuceneUtilFstUtil_initialize();
  if (label >= (jint) 0x20 && label <= (jint) 0x7d && label != (jint) 0x22 && label != (jint) 0x5c) {
    return JavaLangCharacter_toStringWithChar_((jchar) label);
  }
  return JreStrcat("$$", @"0x", JavaLangInteger_toHexStringWithInt_(label));
}

OrgApacheLuceneUtilIntsRef *OrgApacheLuceneUtilFstUtil_toUTF16WithJavaLangCharSequence_withOrgApacheLuceneUtilIntsRefBuilder_(id<JavaLangCharSequence> s, OrgApacheLuceneUtilIntsRefBuilder *scratch) {
  OrgApacheLuceneUtilFstUtil_initialize();
  jint charLimit = [((id<JavaLangCharSequence>) nil_chk(s)) length];
  [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(scratch)) setLengthWithInt:charLimit];
  [scratch growWithInt:charLimit];
  for (jint idx = 0; idx < charLimit; idx++) {
    [scratch setIntAtWithInt:idx withInt:(jint) [s charAtWithInt:idx]];
  }
  return [scratch get];
}

OrgApacheLuceneUtilIntsRef *OrgApacheLuceneUtilFstUtil_toUTF32WithJavaLangCharSequence_withOrgApacheLuceneUtilIntsRefBuilder_(id<JavaLangCharSequence> s, OrgApacheLuceneUtilIntsRefBuilder *scratch) {
  OrgApacheLuceneUtilFstUtil_initialize();
  jint charIdx = 0;
  jint intIdx = 0;
  jint charLimit = [((id<JavaLangCharSequence>) nil_chk(s)) length];
  while (charIdx < charLimit) {
    [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(scratch)) growWithInt:intIdx + 1];
    jint utf32 = JavaLangCharacter_codePointAtWithJavaLangCharSequence_withInt_(s, charIdx);
    [scratch setIntAtWithInt:intIdx withInt:utf32];
    charIdx += JavaLangCharacter_charCountWithInt_(utf32);
    intIdx++;
  }
  [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(scratch)) setLengthWithInt:intIdx];
  return [scratch get];
}

OrgApacheLuceneUtilIntsRef *OrgApacheLuceneUtilFstUtil_toUTF32WithCharArray_withInt_withInt_withOrgApacheLuceneUtilIntsRefBuilder_(IOSCharArray *s, jint offset, jint length, OrgApacheLuceneUtilIntsRefBuilder *scratch) {
  OrgApacheLuceneUtilFstUtil_initialize();
  jint charIdx = offset;
  jint intIdx = 0;
  jint charLimit = offset + length;
  while (charIdx < charLimit) {
    [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(scratch)) growWithInt:intIdx + 1];
    jint utf32 = JavaLangCharacter_codePointAtWithCharArray_withInt_withInt_(s, charIdx, charLimit);
    [scratch setIntAtWithInt:intIdx withInt:utf32];
    charIdx += JavaLangCharacter_charCountWithInt_(utf32);
    intIdx++;
  }
  [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(scratch)) setLengthWithInt:intIdx];
  return [scratch get];
}

OrgApacheLuceneUtilIntsRef *OrgApacheLuceneUtilFstUtil_toIntsRefWithOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneUtilIntsRefBuilder_(OrgApacheLuceneUtilBytesRef *input, OrgApacheLuceneUtilIntsRefBuilder *scratch) {
  OrgApacheLuceneUtilFstUtil_initialize();
  [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(scratch)) clear];
  for (jint i = 0; i < ((OrgApacheLuceneUtilBytesRef *) nil_chk(input))->length_; i++) {
    [scratch appendWithInt:IOSByteArray_Get(nil_chk(input->bytes_), i + input->offset_) & (jint) 0xFF];
  }
  return [scratch get];
}

OrgApacheLuceneUtilBytesRef *OrgApacheLuceneUtilFstUtil_toBytesRefWithOrgApacheLuceneUtilIntsRef_withOrgApacheLuceneUtilBytesRefBuilder_(OrgApacheLuceneUtilIntsRef *input, OrgApacheLuceneUtilBytesRefBuilder *scratch) {
  OrgApacheLuceneUtilFstUtil_initialize();
  [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(scratch)) growWithInt:((OrgApacheLuceneUtilIntsRef *) nil_chk(input))->length_];
  for (jint i = 0; i < input->length_; i++) {
    jint value = IOSIntArray_Get(nil_chk(input->ints_), i + input->offset_);
    JreAssert((value >= JavaLangByte_MIN_VALUE && value <= 255), (JreStrcat("$I$", @"value ", value, @" doesn't fit into byte")));
    [scratch setByteAtWithInt:i withByte:(jbyte) value];
  }
  [scratch setLengthWithInt:input->length_];
  return [scratch get];
}

OrgApacheLuceneUtilFstFST_Arc *OrgApacheLuceneUtilFstUtil_readCeilArcWithInt_withOrgApacheLuceneUtilFstFST_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilFstFST_BytesReader_(jint label, OrgApacheLuceneUtilFstFST *fst, OrgApacheLuceneUtilFstFST_Arc *follow, OrgApacheLuceneUtilFstFST_Arc *arc, OrgApacheLuceneUtilFstFST_BytesReader *inArg) {
  OrgApacheLuceneUtilFstUtil_initialize();
  if (label == OrgApacheLuceneUtilFstFST_END_LABEL) {
    if ([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(follow)) isFinal]) {
      if (follow->target_ <= 0) {
        ((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->flags_ = OrgApacheLuceneUtilFstFST_BIT_LAST_ARC;
      }
      else {
        ((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->flags_ = 0;
        arc->nextArc_ = follow->target_;
        arc->node_ = follow->target_;
      }
      JreStrongAssign(&((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->output_, follow->nextFinalOutput_);
      arc->label_ = OrgApacheLuceneUtilFstFST_END_LABEL;
      return arc;
    }
    else {
      return nil;
    }
  }
  if (!OrgApacheLuceneUtilFstFST_targetHasArcsWithOrgApacheLuceneUtilFstFST_Arc_(follow)) {
    return nil;
  }
  [((OrgApacheLuceneUtilFstFST *) nil_chk(fst)) readFirstTargetArcWithOrgApacheLuceneUtilFstFST_Arc:follow withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:inArg];
  if (((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(arc))->bytesPerArc_ != 0 && arc->label_ != OrgApacheLuceneUtilFstFST_END_LABEL) {
    jint low = arc->arcIdx_;
    jint high = arc->numArcs_ - 1;
    jint mid = 0;
    while (low <= high) {
      mid = JreURShift32((low + high), 1);
      [((OrgApacheLuceneUtilFstFST_BytesReader *) nil_chk(inArg)) setPositionWithLong:arc->posArcsStart_];
      [inArg skipBytesWithLong:arc->bytesPerArc_ * mid + 1];
      jint midLabel = [fst readLabelWithOrgApacheLuceneStoreDataInput:inArg];
      jint cmp = midLabel - label;
      if (cmp < 0) {
        low = mid + 1;
      }
      else if (cmp > 0) {
        high = mid - 1;
      }
      else {
        arc->arcIdx_ = mid - 1;
        return [fst readNextRealArcWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:inArg];
      }
    }
    if (low == arc->numArcs_) {
      return nil;
    }
    arc->arcIdx_ = (low > high ? high : low);
    return [fst readNextRealArcWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:inArg];
  }
  [fst readFirstRealTargetArcWithLong:((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(follow))->target_ withOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:inArg];
  while (true) {
    if (arc->label_ >= label) {
      return arc;
    }
    else if ([arc isLast]) {
      return nil;
    }
    else {
      [fst readNextRealArcWithOrgApacheLuceneUtilFstFST_Arc:arc withOrgApacheLuceneUtilFstFST_BytesReader:inArg];
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilFstUtil)

@implementation OrgApacheLuceneUtilFstUtil_FSTPath

- (instancetype)initWithId:(id)cost
withOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)arc
withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)input {
  OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_(self, cost, arc, input);
  return self;
}

- (instancetype)initWithId:(id)cost
withOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)arc
withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)input
                 withFloat:(jfloat)boost
  withJavaLangCharSequence:(id<JavaLangCharSequence>)context {
  OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_withFloat_withJavaLangCharSequence_(self, cost, arc, input, boost, context);
  return self;
}

- (OrgApacheLuceneUtilFstUtil_FSTPath *)newPathWithId:(id)cost
                withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)input {
  return [new_OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_withFloat_withJavaLangCharSequence_(cost, self->arc_, input, self->boost_, self->context_) autorelease];
}

- (NSString *)description {
  return JreStrcat("$@$@$@$F", @"input=", [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(input_)) get], @" cost=", cost_, @"context=", context_, @"boost=", boost_);
}

- (void)dealloc {
  RELEASE_(arc_);
  RELEASE_(cost_);
  RELEASE_(input_);
  RELEASE_(context_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithId:withOrgApacheLuceneUtilFstFST_Arc:withOrgApacheLuceneUtilIntsRefBuilder:", "FSTPath", NULL, 0x1, NULL, "(TT;Lorg/apache/lucene/util/fst/FST$Arc<TT;>;Lorg/apache/lucene/util/IntsRefBuilder;)V" },
    { "initWithId:withOrgApacheLuceneUtilFstFST_Arc:withOrgApacheLuceneUtilIntsRefBuilder:withFloat:withJavaLangCharSequence:", "FSTPath", NULL, 0x1, NULL, "(TT;Lorg/apache/lucene/util/fst/FST$Arc<TT;>;Lorg/apache/lucene/util/IntsRefBuilder;FLjava/lang/CharSequence;)V" },
    { "newPathWithId:withOrgApacheLuceneUtilIntsRefBuilder:", "newPath", "Lorg.apache.lucene.util.fst.Util$FSTPath;", 0x1, NULL, "(TT;Lorg/apache/lucene/util/IntsRefBuilder;)Lorg/apache/lucene/util/fst/Util$FSTPath<TT;>;" },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "arc_", NULL, 0x1, "Lorg.apache.lucene.util.fst.FST$Arc;", NULL, "Lorg/apache/lucene/util/fst/FST$Arc<TT;>;", .constantValue.asLong = 0 },
    { "cost_", NULL, 0x1, "TT;", NULL, "TT;", .constantValue.asLong = 0 },
    { "input_", NULL, 0x11, "Lorg.apache.lucene.util.IntsRefBuilder;", NULL, NULL, .constantValue.asLong = 0 },
    { "boost_", NULL, 0x11, "F", NULL, NULL, .constantValue.asLong = 0 },
    { "context_", NULL, 0x11, "Ljava.lang.CharSequence;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilFstUtil_FSTPath = { 2, "FSTPath", "org.apache.lucene.util.fst", "Util", 0x9, 4, methods, 5, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;" };
  return &_OrgApacheLuceneUtilFstUtil_FSTPath;
}

@end

void OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_(OrgApacheLuceneUtilFstUtil_FSTPath *self, id cost, OrgApacheLuceneUtilFstFST_Arc *arc, OrgApacheLuceneUtilIntsRefBuilder *input) {
  OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_withFloat_withJavaLangCharSequence_(self, cost, arc, input, 0, nil);
}

OrgApacheLuceneUtilFstUtil_FSTPath *new_OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_(id cost, OrgApacheLuceneUtilFstFST_Arc *arc, OrgApacheLuceneUtilIntsRefBuilder *input) {
  OrgApacheLuceneUtilFstUtil_FSTPath *self = [OrgApacheLuceneUtilFstUtil_FSTPath alloc];
  OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_(self, cost, arc, input);
  return self;
}

void OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_withFloat_withJavaLangCharSequence_(OrgApacheLuceneUtilFstUtil_FSTPath *self, id cost, OrgApacheLuceneUtilFstFST_Arc *arc, OrgApacheLuceneUtilIntsRefBuilder *input, jfloat boost, id<JavaLangCharSequence> context) {
  NSObject_init(self);
  JreStrongAssign(&self->arc_, [((OrgApacheLuceneUtilFstFST_Arc *) [new_OrgApacheLuceneUtilFstFST_Arc_init() autorelease]) copyFromWithOrgApacheLuceneUtilFstFST_Arc:arc]);
  JreStrongAssign(&self->cost_, cost);
  JreStrongAssign(&self->input_, input);
  self->boost_ = boost;
  JreStrongAssign(&self->context_, context);
}

OrgApacheLuceneUtilFstUtil_FSTPath *new_OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_withFloat_withJavaLangCharSequence_(id cost, OrgApacheLuceneUtilFstFST_Arc *arc, OrgApacheLuceneUtilIntsRefBuilder *input, jfloat boost, id<JavaLangCharSequence> context) {
  OrgApacheLuceneUtilFstUtil_FSTPath *self = [OrgApacheLuceneUtilFstUtil_FSTPath alloc];
  OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_withFloat_withJavaLangCharSequence_(self, cost, arc, input, boost, context);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilFstUtil_FSTPath)

@implementation OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator

- (instancetype)initWithJavaUtilComparator:(id<JavaUtilComparator>)comparator {
  OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator_initWithJavaUtilComparator_(self, comparator);
  return self;
}

- (jint)compareWithId:(OrgApacheLuceneUtilFstUtil_FSTPath *)a
               withId:(OrgApacheLuceneUtilFstUtil_FSTPath *)b {
  jint cmp = [((id<JavaUtilComparator>) nil_chk(comparator_)) compareWithId:((OrgApacheLuceneUtilFstUtil_FSTPath *) nil_chk(a))->cost_ withId:((OrgApacheLuceneUtilFstUtil_FSTPath *) nil_chk(b))->cost_];
  if (cmp == 0) {
    return [((OrgApacheLuceneUtilIntsRef *) nil_chk([((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(a->input_)) get])) compareToWithId:[b->input_ get]];
  }
  else {
    return cmp;
  }
}

- (void)dealloc {
  RELEASE_(comparator_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithJavaUtilComparator:", "TieBreakByInputComparator", NULL, 0x1, NULL, NULL },
    { "compareWithId:withId:", "compare", "I", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "comparator_", NULL, 0x12, "Ljava.util.Comparator;", NULL, "Ljava/util/Comparator<TT;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator = { 2, "TieBreakByInputComparator", "org.apache.lucene.util.fst", "Util", 0xa, 2, methods, 1, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;Ljava/util/Comparator<Lorg/apache/lucene/util/fst/Util$FSTPath<TT;>;>;" };
  return &_OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator;
}

@end

void OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator_initWithJavaUtilComparator_(OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator *self, id<JavaUtilComparator> comparator) {
  NSObject_init(self);
  JreStrongAssign(&self->comparator_, comparator);
}

OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator *new_OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator_initWithJavaUtilComparator_(id<JavaUtilComparator> comparator) {
  OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator *self = [OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator alloc];
  OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator_initWithJavaUtilComparator_(self, comparator);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator)

@implementation OrgApacheLuceneUtilFstUtil_TopNSearcher

- (instancetype)initWithOrgApacheLuceneUtilFstFST:(OrgApacheLuceneUtilFstFST *)fst
                                          withInt:(jint)topN
                                          withInt:(jint)maxQueueDepth
                           withJavaUtilComparator:(id<JavaUtilComparator>)comparator {
  OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_(self, fst, topN, maxQueueDepth, comparator);
  return self;
}

- (instancetype)initWithOrgApacheLuceneUtilFstFST:(OrgApacheLuceneUtilFstFST *)fst
                                          withInt:(jint)topN
                                          withInt:(jint)maxQueueDepth
                           withJavaUtilComparator:(id<JavaUtilComparator>)comparator
                           withJavaUtilComparator:(id<JavaUtilComparator>)pathComparator {
  OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_withJavaUtilComparator_(self, fst, topN, maxQueueDepth, comparator, pathComparator);
  return self;
}

- (void)addIfCompetitiveWithOrgApacheLuceneUtilFstUtil_FSTPath:(OrgApacheLuceneUtilFstUtil_FSTPath *)path {
  JreAssert((queue_ != nil), (@"org/apache/lucene/util/fst/Util.java:340 condition failed: assert queue != null;"));
  id cost = [((OrgApacheLuceneUtilFstOutputs *) nil_chk(((OrgApacheLuceneUtilFstFST *) nil_chk(fst_))->outputs_)) addWithId:((OrgApacheLuceneUtilFstUtil_FSTPath *) nil_chk(path))->cost_ withId:((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(path->arc_))->output_];
  if ([((JavaUtilTreeSet *) nil_chk(queue_)) size] == maxQueueDepth_) {
    OrgApacheLuceneUtilFstUtil_FSTPath *bottom = [queue_ last];
    jint comp = [((id<JavaUtilComparator>) nil_chk(pathComparator_)) compareWithId:path withId:bottom];
    if (comp > 0) {
      return;
    }
    else if (comp == 0) {
      [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(path->input_)) appendWithInt:path->arc_->label_];
      jint cmp = [((OrgApacheLuceneUtilIntsRef *) nil_chk([((OrgApacheLuceneUtilFstUtil_FSTPath *) nil_chk(bottom))->input_ get])) compareToWithId:[path->input_ get]];
      [path->input_ setLengthWithInt:[path->input_ length] - 1];
      JreAssert((cmp != 0), (@"org/apache/lucene/util/fst/Util.java:358 condition failed: assert cmp != 0;"));
      if (cmp < 0) {
        return;
      }
    }
  }
  else {
  }
  OrgApacheLuceneUtilIntsRefBuilder *newInput = [new_OrgApacheLuceneUtilIntsRefBuilder_init() autorelease];
  [newInput copyIntsWithOrgApacheLuceneUtilIntsRef:[((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(path->input_)) get]];
  [newInput appendWithInt:path->arc_->label_];
  [queue_ addWithId:[path newPathWithId:cost withOrgApacheLuceneUtilIntsRefBuilder:newInput]];
  if ([queue_ size] == maxQueueDepth_ + 1) {
    [queue_ pollLast];
  }
}

- (void)addStartPathsWithOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)node
                                                withId:(id)startOutput
                                           withBoolean:(jboolean)allowEmptyString
                 withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)input {
  [self addStartPathsWithOrgApacheLuceneUtilFstFST_Arc:node withId:startOutput withBoolean:allowEmptyString withOrgApacheLuceneUtilIntsRefBuilder:input withFloat:0 withJavaLangCharSequence:nil];
}

- (void)addStartPathsWithOrgApacheLuceneUtilFstFST_Arc:(OrgApacheLuceneUtilFstFST_Arc *)node
                                                withId:(id)startOutput
                                           withBoolean:(jboolean)allowEmptyString
                 withOrgApacheLuceneUtilIntsRefBuilder:(OrgApacheLuceneUtilIntsRefBuilder *)input
                                             withFloat:(jfloat)boost
                              withJavaLangCharSequence:(id<JavaLangCharSequence>)context {
  if ([nil_chk(startOutput) isEqual:[((OrgApacheLuceneUtilFstOutputs *) nil_chk(((OrgApacheLuceneUtilFstFST *) nil_chk(fst_))->outputs_)) getNoOutput]]) {
    startOutput = [fst_->outputs_ getNoOutput];
  }
  OrgApacheLuceneUtilFstUtil_FSTPath *path = [new_OrgApacheLuceneUtilFstUtil_FSTPath_initWithId_withOrgApacheLuceneUtilFstFST_Arc_withOrgApacheLuceneUtilIntsRefBuilder_withFloat_withJavaLangCharSequence_(startOutput, node, input, boost, context) autorelease];
  [fst_ readFirstTargetArcWithOrgApacheLuceneUtilFstFST_Arc:node withOrgApacheLuceneUtilFstFST_Arc:path->arc_ withOrgApacheLuceneUtilFstFST_BytesReader:bytesReader_];
  while (true) {
    if (allowEmptyString || ((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(path->arc_))->label_ != OrgApacheLuceneUtilFstFST_END_LABEL) {
      [self addIfCompetitiveWithOrgApacheLuceneUtilFstUtil_FSTPath:path];
    }
    if ([((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(path->arc_)) isLast]) {
      break;
    }
    [fst_ readNextArcWithOrgApacheLuceneUtilFstFST_Arc:path->arc_ withOrgApacheLuceneUtilFstFST_BytesReader:bytesReader_];
  }
}

- (OrgApacheLuceneUtilFstUtil_TopResults *)search {
  id<JavaUtilList> results = [new_JavaUtilArrayList_init() autorelease];
  OrgApacheLuceneUtilFstFST_BytesReader *fstReader = [((OrgApacheLuceneUtilFstFST *) nil_chk(fst_)) getBytesReader];
  id NO_OUTPUT = [((OrgApacheLuceneUtilFstOutputs *) nil_chk(fst_->outputs_)) getNoOutput];
  jint rejectCount = 0;
  while ([results size] < topN_) {
    OrgApacheLuceneUtilFstUtil_FSTPath *path;
    if (queue_ == nil) {
      break;
    }
    path = [((JavaUtilTreeSet *) nil_chk(queue_)) pollFirst];
    if (path == nil) {
      break;
    }
    if (((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(((OrgApacheLuceneUtilFstUtil_FSTPath *) nil_chk(path))->arc_))->label_ == OrgApacheLuceneUtilFstFST_END_LABEL) {
      [path->input_ setLengthWithInt:[((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(path->input_)) length] - 1];
      [results addWithId:[new_OrgApacheLuceneUtilFstUtil_Result_initWithOrgApacheLuceneUtilIntsRef_withId_([path->input_ get], path->cost_) autorelease]];
      continue;
    }
    if ([results size] == topN_ - 1 && maxQueueDepth_ == topN_) {
      JreStrongAssign(&queue_, nil);
    }
    while (true) {
      [fst_ readFirstTargetArcWithOrgApacheLuceneUtilFstFST_Arc:path->arc_ withOrgApacheLuceneUtilFstFST_Arc:path->arc_ withOrgApacheLuceneUtilFstFST_BytesReader:fstReader];
      jboolean foundZero = false;
      while (true) {
        if ([((id<JavaUtilComparator>) nil_chk(comparator_)) compareWithId:NO_OUTPUT withId:path->arc_->output_] == 0) {
          if (queue_ == nil) {
            foundZero = true;
            break;
          }
          else if (!foundZero) {
            [((OrgApacheLuceneUtilFstFST_Arc *) nil_chk(scratchArc_)) copyFromWithOrgApacheLuceneUtilFstFST_Arc:path->arc_];
            foundZero = true;
          }
          else {
            [self addIfCompetitiveWithOrgApacheLuceneUtilFstUtil_FSTPath:path];
          }
        }
        else if (queue_ != nil) {
          [self addIfCompetitiveWithOrgApacheLuceneUtilFstUtil_FSTPath:path];
        }
        if ([path->arc_ isLast]) {
          break;
        }
        [fst_ readNextArcWithOrgApacheLuceneUtilFstFST_Arc:path->arc_ withOrgApacheLuceneUtilFstFST_BytesReader:fstReader];
      }
      JreAssert((foundZero), (@"org/apache/lucene/util/fst/Util.java:505 condition failed: assert foundZero;"));
      if (queue_ != nil) {
        [path->arc_ copyFromWithOrgApacheLuceneUtilFstFST_Arc:scratchArc_];
      }
      if (path->arc_->label_ == OrgApacheLuceneUtilFstFST_END_LABEL) {
        JreStrongAssign(&path->cost_, [fst_->outputs_ addWithId:path->cost_ withId:path->arc_->output_]);
        if ([self acceptResultWithOrgApacheLuceneUtilFstUtil_FSTPath:path]) {
          [results addWithId:[new_OrgApacheLuceneUtilFstUtil_Result_initWithOrgApacheLuceneUtilIntsRef_withId_([((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(path->input_)) get], path->cost_) autorelease]];
        }
        else {
          rejectCount++;
        }
        break;
      }
      else {
        [((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(path->input_)) appendWithInt:path->arc_->label_];
        JreStrongAssign(&path->cost_, [fst_->outputs_ addWithId:path->cost_ withId:path->arc_->output_]);
      }
    }
  }
  return [new_OrgApacheLuceneUtilFstUtil_TopResults_initWithBoolean_withJavaUtilList_(rejectCount + topN_ <= maxQueueDepth_, results) autorelease];
}

- (jboolean)acceptResultWithOrgApacheLuceneUtilFstUtil_FSTPath:(OrgApacheLuceneUtilFstUtil_FSTPath *)path {
  return [self acceptResultWithOrgApacheLuceneUtilIntsRef:[((OrgApacheLuceneUtilIntsRefBuilder *) nil_chk(((OrgApacheLuceneUtilFstUtil_FSTPath *) nil_chk(path))->input_)) get] withId:path->cost_];
}

- (jboolean)acceptResultWithOrgApacheLuceneUtilIntsRef:(OrgApacheLuceneUtilIntsRef *)input
                                                withId:(id)output {
  return true;
}

- (void)dealloc {
  RELEASE_(fst_);
  RELEASE_(bytesReader_);
  RELEASE_(scratchArc_);
  RELEASE_(comparator_);
  RELEASE_(pathComparator_);
  RELEASE_(queue_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneUtilFstFST:withInt:withInt:withJavaUtilComparator:", "TopNSearcher", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheLuceneUtilFstFST:withInt:withInt:withJavaUtilComparator:withJavaUtilComparator:", "TopNSearcher", NULL, 0x1, NULL, NULL },
    { "addIfCompetitiveWithOrgApacheLuceneUtilFstUtil_FSTPath:", "addIfCompetitive", "V", 0x4, NULL, NULL },
    { "addStartPathsWithOrgApacheLuceneUtilFstFST_Arc:withId:withBoolean:withOrgApacheLuceneUtilIntsRefBuilder:", "addStartPaths", "V", 0x1, "Ljava.io.IOException;", "(Lorg/apache/lucene/util/fst/FST$Arc<TT;>;TT;ZLorg/apache/lucene/util/IntsRefBuilder;)V" },
    { "addStartPathsWithOrgApacheLuceneUtilFstFST_Arc:withId:withBoolean:withOrgApacheLuceneUtilIntsRefBuilder:withFloat:withJavaLangCharSequence:", "addStartPaths", "V", 0x1, "Ljava.io.IOException;", "(Lorg/apache/lucene/util/fst/FST$Arc<TT;>;TT;ZLorg/apache/lucene/util/IntsRefBuilder;FLjava/lang/CharSequence;)V" },
    { "search", NULL, "Lorg.apache.lucene.util.fst.Util$TopResults;", 0x1, "Ljava.io.IOException;", NULL },
    { "acceptResultWithOrgApacheLuceneUtilFstUtil_FSTPath:", "acceptResult", "Z", 0x4, NULL, NULL },
    { "acceptResultWithOrgApacheLuceneUtilIntsRef:withId:", "acceptResult", "Z", 0x4, NULL, "(Lorg/apache/lucene/util/IntsRef;TT;)Z" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "fst_", NULL, 0x12, "Lorg.apache.lucene.util.fst.FST;", NULL, "Lorg/apache/lucene/util/fst/FST<TT;>;", .constantValue.asLong = 0 },
    { "bytesReader_", NULL, 0x12, "Lorg.apache.lucene.util.fst.FST$BytesReader;", NULL, NULL, .constantValue.asLong = 0 },
    { "topN_", NULL, 0x12, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "maxQueueDepth_", NULL, 0x12, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "scratchArc_", NULL, 0x12, "Lorg.apache.lucene.util.fst.FST$Arc;", NULL, "Lorg/apache/lucene/util/fst/FST$Arc<TT;>;", .constantValue.asLong = 0 },
    { "comparator_", NULL, 0x12, "Ljava.util.Comparator;", NULL, "Ljava/util/Comparator<TT;>;", .constantValue.asLong = 0 },
    { "pathComparator_", NULL, 0x12, "Ljava.util.Comparator;", NULL, "Ljava/util/Comparator<Lorg/apache/lucene/util/fst/Util$FSTPath<TT;>;>;", .constantValue.asLong = 0 },
    { "queue_", NULL, 0x0, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Lorg/apache/lucene/util/fst/Util$FSTPath<TT;>;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilFstUtil_TopNSearcher = { 2, "TopNSearcher", "org.apache.lucene.util.fst", "Util", 0x9, 8, methods, 8, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;" };
  return &_OrgApacheLuceneUtilFstUtil_TopNSearcher;
}

@end

void OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_(OrgApacheLuceneUtilFstUtil_TopNSearcher *self, OrgApacheLuceneUtilFstFST *fst, jint topN, jint maxQueueDepth, id<JavaUtilComparator> comparator) {
  OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_withJavaUtilComparator_(self, fst, topN, maxQueueDepth, comparator, [new_OrgApacheLuceneUtilFstUtil_TieBreakByInputComparator_initWithJavaUtilComparator_(comparator) autorelease]);
}

OrgApacheLuceneUtilFstUtil_TopNSearcher *new_OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_(OrgApacheLuceneUtilFstFST *fst, jint topN, jint maxQueueDepth, id<JavaUtilComparator> comparator) {
  OrgApacheLuceneUtilFstUtil_TopNSearcher *self = [OrgApacheLuceneUtilFstUtil_TopNSearcher alloc];
  OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_(self, fst, topN, maxQueueDepth, comparator);
  return self;
}

void OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_withJavaUtilComparator_(OrgApacheLuceneUtilFstUtil_TopNSearcher *self, OrgApacheLuceneUtilFstFST *fst, jint topN, jint maxQueueDepth, id<JavaUtilComparator> comparator, id<JavaUtilComparator> pathComparator) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->scratchArc_, new_OrgApacheLuceneUtilFstFST_Arc_init());
  JreStrongAssign(&self->queue_, nil);
  JreStrongAssign(&self->fst_, fst);
  JreStrongAssign(&self->bytesReader_, [((OrgApacheLuceneUtilFstFST *) nil_chk(fst)) getBytesReader]);
  self->topN_ = topN;
  self->maxQueueDepth_ = maxQueueDepth;
  JreStrongAssign(&self->comparator_, comparator);
  JreStrongAssign(&self->pathComparator_, pathComparator);
  JreStrongAssignAndConsume(&self->queue_, new_JavaUtilTreeSet_initWithJavaUtilComparator_(pathComparator));
}

OrgApacheLuceneUtilFstUtil_TopNSearcher *new_OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_withJavaUtilComparator_(OrgApacheLuceneUtilFstFST *fst, jint topN, jint maxQueueDepth, id<JavaUtilComparator> comparator, id<JavaUtilComparator> pathComparator) {
  OrgApacheLuceneUtilFstUtil_TopNSearcher *self = [OrgApacheLuceneUtilFstUtil_TopNSearcher alloc];
  OrgApacheLuceneUtilFstUtil_TopNSearcher_initWithOrgApacheLuceneUtilFstFST_withInt_withInt_withJavaUtilComparator_withJavaUtilComparator_(self, fst, topN, maxQueueDepth, comparator, pathComparator);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilFstUtil_TopNSearcher)

@implementation OrgApacheLuceneUtilFstUtil_Result

- (instancetype)initWithOrgApacheLuceneUtilIntsRef:(OrgApacheLuceneUtilIntsRef *)input
                                            withId:(id)output {
  OrgApacheLuceneUtilFstUtil_Result_initWithOrgApacheLuceneUtilIntsRef_withId_(self, input, output);
  return self;
}

- (void)dealloc {
  RELEASE_(input_);
  RELEASE_(output_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneUtilIntsRef:withId:", "Result", NULL, 0x1, NULL, "(Lorg/apache/lucene/util/IntsRef;TT;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "input_", NULL, 0x11, "Lorg.apache.lucene.util.IntsRef;", NULL, NULL, .constantValue.asLong = 0 },
    { "output_", NULL, 0x11, "TT;", NULL, "TT;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilFstUtil_Result = { 2, "Result", "org.apache.lucene.util.fst", "Util", 0x19, 1, methods, 2, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;" };
  return &_OrgApacheLuceneUtilFstUtil_Result;
}

@end

void OrgApacheLuceneUtilFstUtil_Result_initWithOrgApacheLuceneUtilIntsRef_withId_(OrgApacheLuceneUtilFstUtil_Result *self, OrgApacheLuceneUtilIntsRef *input, id output) {
  NSObject_init(self);
  JreStrongAssign(&self->input_, input);
  JreStrongAssign(&self->output_, output);
}

OrgApacheLuceneUtilFstUtil_Result *new_OrgApacheLuceneUtilFstUtil_Result_initWithOrgApacheLuceneUtilIntsRef_withId_(OrgApacheLuceneUtilIntsRef *input, id output) {
  OrgApacheLuceneUtilFstUtil_Result *self = [OrgApacheLuceneUtilFstUtil_Result alloc];
  OrgApacheLuceneUtilFstUtil_Result_initWithOrgApacheLuceneUtilIntsRef_withId_(self, input, output);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilFstUtil_Result)

@implementation OrgApacheLuceneUtilFstUtil_TopResults

- (instancetype)initWithBoolean:(jboolean)isComplete
               withJavaUtilList:(id<JavaUtilList>)topN {
  OrgApacheLuceneUtilFstUtil_TopResults_initWithBoolean_withJavaUtilList_(self, isComplete, topN);
  return self;
}

- (id<JavaUtilIterator>)iterator {
  return [((id<JavaUtilList>) nil_chk(topN_)) iterator];
}

- (void)dealloc {
  RELEASE_(topN_);
  [super dealloc];
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithBoolean:withJavaUtilList:", "TopResults", NULL, 0x0, NULL, NULL },
    { "iterator", NULL, "Ljava.util.Iterator;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "isComplete_", NULL, 0x11, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "topN_", NULL, 0x11, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/apache/lucene/util/fst/Util$Result<TT;>;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneUtilFstUtil_TopResults = { 2, "TopResults", "org.apache.lucene.util.fst", "Util", 0x19, 2, methods, 2, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;Ljava/lang/Iterable<Lorg/apache/lucene/util/fst/Util$Result<TT;>;>;" };
  return &_OrgApacheLuceneUtilFstUtil_TopResults;
}

@end

void OrgApacheLuceneUtilFstUtil_TopResults_initWithBoolean_withJavaUtilList_(OrgApacheLuceneUtilFstUtil_TopResults *self, jboolean isComplete, id<JavaUtilList> topN) {
  NSObject_init(self);
  JreStrongAssign(&self->topN_, topN);
  self->isComplete_ = isComplete;
}

OrgApacheLuceneUtilFstUtil_TopResults *new_OrgApacheLuceneUtilFstUtil_TopResults_initWithBoolean_withJavaUtilList_(jboolean isComplete, id<JavaUtilList> topN) {
  OrgApacheLuceneUtilFstUtil_TopResults *self = [OrgApacheLuceneUtilFstUtil_TopResults alloc];
  OrgApacheLuceneUtilFstUtil_TopResults_initWithBoolean_withJavaUtilList_(self, isComplete, topN);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneUtilFstUtil_TopResults)
