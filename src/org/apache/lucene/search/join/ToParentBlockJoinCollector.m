//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./join/src/java/org/apache/lucene/search/join/ToParentBlockJoinCollector.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/lang/Float.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"
#include "java/lang/System.h"
#include "java/util/Arrays.h"
#include "java/util/Collection.h"
#include "java/util/HashMap.h"
#include "java/util/LinkedList.h"
#include "java/util/Map.h"
#include "java/util/Queue.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/search/FieldComparator.h"
#include "org/apache/lucene/search/FieldValueHitQueue.h"
#include "org/apache/lucene/search/LeafCollector.h"
#include "org/apache/lucene/search/LeafFieldComparator.h"
#include "org/apache/lucene/search/Query.h"
#include "org/apache/lucene/search/ScoreCachingWrappingScorer.h"
#include "org/apache/lucene/search/Scorer.h"
#include "org/apache/lucene/search/Sort.h"
#include "org/apache/lucene/search/TopDocs.h"
#include "org/apache/lucene/search/TopDocsCollector.h"
#include "org/apache/lucene/search/TopFieldCollector.h"
#include "org/apache/lucene/search/TopScoreDocCollector.h"
#include "org/apache/lucene/search/Weight.h"
#include "org/apache/lucene/search/grouping/GroupDocs.h"
#include "org/apache/lucene/search/grouping/TopGroups.h"
#include "org/apache/lucene/search/join/FakeScorer.h"
#include "org/apache/lucene/search/join/ToParentBlockJoinCollector.h"
#include "org/apache/lucene/search/join/ToParentBlockJoinQuery.h"
#include "org/apache/lucene/util/ArrayUtil.h"

@class OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup;

@interface OrgApacheLuceneSearchJoinToParentBlockJoinCollector () {
 @public
  OrgApacheLuceneSearchSort *sort_;
  id<JavaUtilMap> joinQueryID_;
  jint numParentHits_;
  OrgApacheLuceneSearchFieldValueHitQueue *queue_;
  IOSObjectArray *comparators_;
  jboolean trackMaxScore_;
  jboolean trackScores_;
  IOSObjectArray *joinScorers_;
  jboolean queueFull_;
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *bottom_;
  jint totalHitCount_;
  jfloat maxScore_;
  IOSObjectArray *sortedGroups_;
}

- (void)enrollWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery:(OrgApacheLuceneSearchJoinToParentBlockJoinQuery *)query
withOrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer:(OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer *)scorer;

- (void)sortQueue;

- (OrgApacheLuceneSearchGroupingTopGroups *)accumulateGroupsWithInt:(jint)slot
                                                            withInt:(jint)offset
                                                            withInt:(jint)maxDocsPerGroup
                                                            withInt:(jint)withinGroupOffset
                                      withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)withinGroupSort
                                                        withBoolean:(jboolean)fillSortFields;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector, sort_, OrgApacheLuceneSearchSort *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector, joinQueryID_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector, queue_, OrgApacheLuceneSearchFieldValueHitQueue *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector, comparators_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector, joinScorers_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector, bottom_, OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector, sortedGroups_, IOSObjectArray *)

__attribute__((unused)) static void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_enrollWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery_withOrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *self, OrgApacheLuceneSearchJoinToParentBlockJoinQuery *query, OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer *scorer);

__attribute__((unused)) static void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_sortQueue(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *self);

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTopGroups *OrgApacheLuceneSearchJoinToParentBlockJoinCollector_accumulateGroupsWithInt_withInt_withInt_withInt_withOrgApacheLuceneSearchSort_withBoolean_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *self, jint slot, jint offset, jint maxDocsPerGroup, jint withinGroupOffset, OrgApacheLuceneSearchSort *withinGroupSort, jboolean fillSortFields);

@interface OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup : OrgApacheLuceneSearchFieldValueHitQueue_Entry {
 @public
  OrgApacheLuceneIndexLeafReaderContext *readerContext_;
  IOSObjectArray *docs_;
  IOSObjectArray *scores_;
  IOSIntArray *counts_;
}

- (instancetype)initWithInt:(jint)comparatorSlot
                    withInt:(jint)parentDoc
                  withFloat:(jfloat)parentScore
                    withInt:(jint)numJoins
                withBoolean:(jboolean)doScores;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup, readerContext_, OrgApacheLuceneIndexLeafReaderContext *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup, docs_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup, scores_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup, counts_, IOSIntArray *)

__attribute__((unused)) static void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_initWithInt_withInt_withFloat_withInt_withBoolean_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *self, jint comparatorSlot, jint parentDoc, jfloat parentScore, jint numJoins, jboolean doScores);

__attribute__((unused)) static OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *new_OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_initWithInt_withInt_withFloat_withInt_withBoolean_(jint comparatorSlot, jint parentDoc, jfloat parentScore, jint numJoins, jboolean doScores) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup)

@interface OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 : NSObject < OrgApacheLuceneSearchLeafCollector > {
 @public
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector *this$0_;
  OrgApacheLuceneSearchScorer *scorer_;
  IOSObjectArray *val$comparators_;
  IOSIntArray *val$reverseMul_;
  jint val$docBase_;
  OrgApacheLuceneIndexLeafReaderContext *val$context_;
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer;

- (void)collectWithInt:(jint)parentDoc;

- (void)copyGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup:(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *)og OBJC_METHOD_FAMILY_NONE;

- (instancetype)initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector:(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *)outer$
                          withOrgApacheLuceneSearchLeafFieldComparatorArray:(IOSObjectArray *)capture$0
                                                               withIntArray:(IOSIntArray *)capture$1
                                                                    withInt:(jint)capture$2
                                  withOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)capture$3;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1, this$0_, OrgApacheLuceneSearchJoinToParentBlockJoinCollector *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1, scorer_, OrgApacheLuceneSearchScorer *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1, val$comparators_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1, val$reverseMul_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1, val$context_, OrgApacheLuceneIndexLeafReaderContext *)

__attribute__((unused)) static void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_copyGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 *self, OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *og);

__attribute__((unused)) static void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_withOrgApacheLuceneSearchLeafFieldComparatorArray_withIntArray_withInt_withOrgApacheLuceneIndexLeafReaderContext_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 *self, OrgApacheLuceneSearchJoinToParentBlockJoinCollector *outer$, IOSObjectArray *capture$0, IOSIntArray *capture$1, jint capture$2, OrgApacheLuceneIndexLeafReaderContext *capture$3);

__attribute__((unused)) static OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 *new_OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_withOrgApacheLuceneSearchLeafFieldComparatorArray_withIntArray_withInt_withOrgApacheLuceneIndexLeafReaderContext_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *outer$, IOSObjectArray *capture$0, IOSIntArray *capture$1, jint capture$2, OrgApacheLuceneIndexLeafReaderContext *capture$3) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1)

@implementation OrgApacheLuceneSearchJoinToParentBlockJoinCollector

- (instancetype)initWithOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sort
                                          withInt:(jint)numParentHits
                                      withBoolean:(jboolean)trackScores
                                      withBoolean:(jboolean)trackMaxScore {
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_initWithOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_(self, sort, numParentHits, trackScores, trackMaxScore);
  return self;
}

- (id<OrgApacheLuceneSearchLeafCollector>)getLeafCollectorWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  IOSObjectArray *comparators = [((OrgApacheLuceneSearchFieldValueHitQueue *) nil_chk(queue_)) getComparatorsWithOrgApacheLuceneIndexLeafReaderContext:context];
  IOSIntArray *reverseMul = [queue_ getReverseMul];
  jint docBase = ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context))->docBase_;
  return [new_OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_withOrgApacheLuceneSearchLeafFieldComparatorArray_withIntArray_withInt_withOrgApacheLuceneIndexLeafReaderContext_(self, comparators, reverseMul, docBase, context) autorelease];
}

- (void)enrollWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery:(OrgApacheLuceneSearchJoinToParentBlockJoinQuery *)query
withOrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer:(OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer *)scorer {
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_enrollWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery_withOrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer_(self, query, scorer);
}

- (void)sortQueue {
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_sortQueue(self);
}

- (OrgApacheLuceneSearchGroupingTopGroups *)getTopGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery:(OrgApacheLuceneSearchJoinToParentBlockJoinQuery *)query
                                                                              withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)withinGroupSort
                                                                                                    withInt:(jint)offset
                                                                                                    withInt:(jint)maxDocsPerGroup
                                                                                                    withInt:(jint)withinGroupOffset
                                                                                                withBoolean:(jboolean)fillSortFields {
  JavaLangInteger *_slot = [((id<JavaUtilMap>) nil_chk(joinQueryID_)) getWithId:query];
  if (_slot == nil && totalHitCount_ == 0) {
    return nil;
  }
  if (sortedGroups_ == nil) {
    if (offset >= [((OrgApacheLuceneSearchFieldValueHitQueue *) nil_chk(queue_)) size]) {
      return nil;
    }
    OrgApacheLuceneSearchJoinToParentBlockJoinCollector_sortQueue(self);
  }
  else if (offset > sortedGroups_->size_) {
    return nil;
  }
  return OrgApacheLuceneSearchJoinToParentBlockJoinCollector_accumulateGroupsWithInt_withInt_withInt_withInt_withOrgApacheLuceneSearchSort_withBoolean_(self, _slot == nil ? -1 : [_slot intValue], offset, maxDocsPerGroup, withinGroupOffset, withinGroupSort, fillSortFields);
}

- (OrgApacheLuceneSearchGroupingTopGroups *)accumulateGroupsWithInt:(jint)slot
                                                            withInt:(jint)offset
                                                            withInt:(jint)maxDocsPerGroup
                                                            withInt:(jint)withinGroupOffset
                                      withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)withinGroupSort
                                                        withBoolean:(jboolean)fillSortFields {
  return OrgApacheLuceneSearchJoinToParentBlockJoinCollector_accumulateGroupsWithInt_withInt_withInt_withInt_withOrgApacheLuceneSearchSort_withBoolean_(self, slot, offset, maxDocsPerGroup, withinGroupOffset, withinGroupSort, fillSortFields);
}

- (OrgApacheLuceneSearchGroupingTopGroups *)getTopGroupsWithAllChildDocsWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery:(OrgApacheLuceneSearchJoinToParentBlockJoinQuery *)query
                                                                                              withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)withinGroupSort
                                                                                                                    withInt:(jint)offset
                                                                                                                    withInt:(jint)withinGroupOffset
                                                                                                                withBoolean:(jboolean)fillSortFields {
  return [self getTopGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery:query withOrgApacheLuceneSearchSort:withinGroupSort withInt:offset withInt:JavaLangInteger_MAX_VALUE withInt:withinGroupOffset withBoolean:fillSortFields];
}

- (jfloat)getMaxScore {
  return maxScore_;
}

- (jboolean)needsScores {
  return YES;
}

- (void)dealloc {
  RELEASE_(sort_);
  RELEASE_(joinQueryID_);
  RELEASE_(queue_);
  RELEASE_(comparators_);
  RELEASE_(joinScorers_);
  RELEASE_(bottom_);
  RELEASE_(sortedGroups_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchSort:withInt:withBoolean:withBoolean:", "ToParentBlockJoinCollector", NULL, 0x1, "Ljava.io.IOException;", NULL },
    { "getLeafCollectorWithOrgApacheLuceneIndexLeafReaderContext:", "getLeafCollector", "Lorg.apache.lucene.search.LeafCollector;", 0x1, "Ljava.io.IOException;", NULL },
    { "enrollWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery:withOrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer:", "enroll", "V", 0x2, NULL, NULL },
    { "sortQueue", NULL, "V", 0x2, NULL, NULL },
    { "getTopGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery:withOrgApacheLuceneSearchSort:withInt:withInt:withInt:withBoolean:", "getTopGroups", "Lorg.apache.lucene.search.grouping.TopGroups;", 0x1, "Ljava.io.IOException;", NULL },
    { "accumulateGroupsWithInt:withInt:withInt:withInt:withOrgApacheLuceneSearchSort:withBoolean:", "accumulateGroups", "Lorg.apache.lucene.search.grouping.TopGroups;", 0x2, "Ljava.io.IOException;", NULL },
    { "getTopGroupsWithAllChildDocsWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery:withOrgApacheLuceneSearchSort:withInt:withInt:withBoolean:", "getTopGroupsWithAllChildDocs", "Lorg.apache.lucene.search.grouping.TopGroups;", 0x1, "Ljava.io.IOException;", NULL },
    { "getMaxScore", NULL, "F", 0x1, NULL, NULL },
    { "needsScores", NULL, "Z", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "sort_", NULL, 0x12, "Lorg.apache.lucene.search.Sort;", NULL, NULL, .constantValue.asLong = 0 },
    { "joinQueryID_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Lorg/apache/lucene/search/Query;Ljava/lang/Integer;>;", .constantValue.asLong = 0 },
    { "numParentHits_", NULL, 0x12, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "queue_", NULL, 0x12, "Lorg.apache.lucene.search.FieldValueHitQueue;", NULL, "Lorg/apache/lucene/search/FieldValueHitQueue<Lorg/apache/lucene/search/join/ToParentBlockJoinCollector$OneGroup;>;", .constantValue.asLong = 0 },
    { "comparators_", NULL, 0x12, "[Lorg.apache.lucene.search.FieldComparator;", NULL, "[Lorg/apache/lucene/search/FieldComparator<*>;", .constantValue.asLong = 0 },
    { "trackMaxScore_", NULL, 0x12, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "trackScores_", NULL, 0x12, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "joinScorers_", NULL, 0x2, "[Lorg.apache.lucene.search.join.ToParentBlockJoinQuery$BlockJoinScorer;", NULL, NULL, .constantValue.asLong = 0 },
    { "queueFull_", NULL, 0x2, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "bottom_", NULL, 0x2, "Lorg.apache.lucene.search.join.ToParentBlockJoinCollector$OneGroup;", NULL, NULL, .constantValue.asLong = 0 },
    { "totalHitCount_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "maxScore_", NULL, 0x2, "F", NULL, NULL, .constantValue.asLong = 0 },
    { "sortedGroups_", NULL, 0x2, "[Lorg.apache.lucene.search.join.ToParentBlockJoinCollector$OneGroup;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.join.ToParentBlockJoinCollector$OneGroup;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinToParentBlockJoinCollector = { 2, "ToParentBlockJoinCollector", "org.apache.lucene.search.join", NULL, 0x1, 9, methods, 13, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneSearchJoinToParentBlockJoinCollector;
}

@end

void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_initWithOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *self, OrgApacheLuceneSearchSort *sort, jint numParentHits, jboolean trackScores, jboolean trackMaxScore) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->joinQueryID_, new_JavaUtilHashMap_init());
  JreStrongAssignAndConsume(&self->joinScorers_, [IOSObjectArray newArrayWithLength:0 type:OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer_class_()]);
  self->maxScore_ = JavaLangFloat_NaN;
  JreStrongAssign(&self->sort_, sort);
  self->trackMaxScore_ = trackMaxScore;
  if (trackMaxScore) {
    self->maxScore_ = JavaLangFloat_MIN_VALUE;
  }
  self->trackScores_ = trackScores;
  self->numParentHits_ = numParentHits;
  JreStrongAssign(&self->queue_, OrgApacheLuceneSearchFieldValueHitQueue_createWithOrgApacheLuceneSearchSortFieldArray_withInt_([((OrgApacheLuceneSearchSort *) nil_chk(sort)) getSort], numParentHits));
  JreStrongAssign(&self->comparators_, [((OrgApacheLuceneSearchFieldValueHitQueue *) nil_chk(self->queue_)) getComparators]);
}

OrgApacheLuceneSearchJoinToParentBlockJoinCollector *new_OrgApacheLuceneSearchJoinToParentBlockJoinCollector_initWithOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_(OrgApacheLuceneSearchSort *sort, jint numParentHits, jboolean trackScores, jboolean trackMaxScore) {
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector *self = [OrgApacheLuceneSearchJoinToParentBlockJoinCollector alloc];
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_initWithOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_(self, sort, numParentHits, trackScores, trackMaxScore);
  return self;
}

void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_enrollWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery_withOrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *self, OrgApacheLuceneSearchJoinToParentBlockJoinQuery *query, OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer *scorer) {
  [((OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer *) nil_chk(scorer)) trackPendingChildHits];
  JavaLangInteger *slot = [((id<JavaUtilMap>) nil_chk(self->joinQueryID_)) getWithId:query];
  if (slot == nil) {
    [self->joinQueryID_ putWithId:query withId:JavaLangInteger_valueOfWithInt_(((IOSObjectArray *) nil_chk(self->joinScorers_))->size_)];
    IOSObjectArray *newArray = [IOSObjectArray arrayWithLength:1 + self->joinScorers_->size_ type:OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer_class_()];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(self->joinScorers_, 0, newArray, 0, self->joinScorers_->size_);
    JreStrongAssign(&self->joinScorers_, newArray);
    IOSObjectArray_Set(self->joinScorers_, self->joinScorers_->size_ - 1, scorer);
  }
  else {
    IOSObjectArray_Set(nil_chk(self->joinScorers_), [slot intValue], scorer);
  }
}

void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_sortQueue(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *self) {
  JreStrongAssignAndConsume(&self->sortedGroups_, [IOSObjectArray newArrayWithLength:[((OrgApacheLuceneSearchFieldValueHitQueue *) nil_chk(self->queue_)) size] type:OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_class_()]);
  for (jint downTo = [self->queue_ size] - 1; downTo >= 0; downTo--) {
    IOSObjectArray_Set(self->sortedGroups_, downTo, [self->queue_ pop]);
  }
}

OrgApacheLuceneSearchGroupingTopGroups *OrgApacheLuceneSearchJoinToParentBlockJoinCollector_accumulateGroupsWithInt_withInt_withInt_withInt_withOrgApacheLuceneSearchSort_withBoolean_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *self, jint slot, jint offset, jint maxDocsPerGroup, jint withinGroupOffset, OrgApacheLuceneSearchSort *withinGroupSort, jboolean fillSortFields) {
  IOSObjectArray *groups = [IOSObjectArray arrayWithLength:((IOSObjectArray *) nil_chk(self->sortedGroups_))->size_ - offset type:OrgApacheLuceneSearchGroupingGroupDocs_class_()];
  OrgApacheLuceneSearchJoinFakeScorer *fakeScorer = [new_OrgApacheLuceneSearchJoinFakeScorer_init() autorelease];
  jint totalGroupedHitCount = 0;
  for (jint groupIDX = offset; groupIDX < self->sortedGroups_->size_; groupIDX++) {
    OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *og = IOSObjectArray_Get(self->sortedGroups_, groupIDX);
    jint numChildDocs;
    if (slot == -1 || slot >= ((IOSIntArray *) nil_chk(((OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *) nil_chk(og))->counts_))->size_) {
      numChildDocs = 0;
    }
    else {
      numChildDocs = IOSIntArray_Get(og->counts_, slot);
    }
    jint numDocsInGroup = JavaLangMath_maxWithInt_withInt_(1, JavaLangMath_minWithInt_withInt_(numChildDocs, maxDocsPerGroup));
    OrgApacheLuceneSearchTopDocsCollector *collector;
    if (withinGroupSort == nil) {
      if (!self->trackScores_) {
        @throw [new_JavaLangIllegalArgumentException_initWithNSString_(@"cannot sort by relevance within group: trackScores=false") autorelease];
      }
      collector = OrgApacheLuceneSearchTopScoreDocCollector_createWithInt_(numDocsInGroup);
    }
    else {
      collector = OrgApacheLuceneSearchTopFieldCollector_createWithOrgApacheLuceneSearchSort_withInt_withBoolean_withBoolean_withBoolean_(withinGroupSort, numDocsInGroup, fillSortFields, self->trackScores_, self->trackMaxScore_);
    }
    id<OrgApacheLuceneSearchLeafCollector> leafCollector = [((OrgApacheLuceneSearchTopDocsCollector *) nil_chk(collector)) getLeafCollectorWithOrgApacheLuceneIndexLeafReaderContext:((OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *) nil_chk(og))->readerContext_];
    [((id<OrgApacheLuceneSearchLeafCollector>) nil_chk(leafCollector)) setScorerWithOrgApacheLuceneSearchScorer:fakeScorer];
    for (jint docIDX = 0; docIDX < numChildDocs; docIDX++) {
      jint doc = IOSIntArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(og->docs_), slot)), docIDX);
      fakeScorer->doc_ = doc;
      if (self->trackScores_) {
        fakeScorer->score_ = IOSFloatArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(og->scores_), slot)), docIDX);
      }
      [leafCollector collectWithInt:doc];
    }
    totalGroupedHitCount += numChildDocs;
    IOSObjectArray *groupSortValues;
    if (fillSortFields) {
      groupSortValues = [IOSObjectArray arrayWithLength:((IOSObjectArray *) nil_chk(self->comparators_))->size_ type:NSObject_class_()];
      for (jint sortFieldIDX = 0; sortFieldIDX < self->comparators_->size_; sortFieldIDX++) {
        IOSObjectArray_Set(groupSortValues, sortFieldIDX, [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(self->comparators_, sortFieldIDX))) valueWithInt:og->slot_]);
      }
    }
    else {
      groupSortValues = nil;
    }
    OrgApacheLuceneSearchTopDocs *topDocs = [collector topDocsWithInt:withinGroupOffset withInt:numDocsInGroup];
    IOSObjectArray_SetAndConsume(groups, groupIDX - offset, new_OrgApacheLuceneSearchGroupingGroupDocs_initWithFloat_withFloat_withInt_withOrgApacheLuceneSearchScoreDocArray_withId_withNSObjectArray_(og->score_, [((OrgApacheLuceneSearchTopDocs *) nil_chk(topDocs)) getMaxScore], numChildDocs, topDocs->scoreDocs_, JavaLangInteger_valueOfWithInt_(og->doc_), groupSortValues));
  }
  return [new_OrgApacheLuceneSearchGroupingTopGroups_initWithOrgApacheLuceneSearchGroupingTopGroups_withJavaLangInteger_([new_OrgApacheLuceneSearchGroupingTopGroups_initWithOrgApacheLuceneSearchSortFieldArray_withOrgApacheLuceneSearchSortFieldArray_withInt_withInt_withOrgApacheLuceneSearchGroupingGroupDocsArray_withFloat_([((OrgApacheLuceneSearchSort *) nil_chk(self->sort_)) getSort], withinGroupSort == nil ? nil : [withinGroupSort getSort], 0, totalGroupedHitCount, groups, self->maxScore_) autorelease], JavaLangInteger_valueOfWithInt_(self->totalHitCount_)) autorelease];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinToParentBlockJoinCollector)

@implementation OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup

- (instancetype)initWithInt:(jint)comparatorSlot
                    withInt:(jint)parentDoc
                  withFloat:(jfloat)parentScore
                    withInt:(jint)numJoins
                withBoolean:(jboolean)doScores {
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_initWithInt_withInt_withFloat_withInt_withBoolean_(self, comparatorSlot, parentDoc, parentScore, numJoins, doScores);
  return self;
}

- (void)dealloc {
  RELEASE_(readerContext_);
  RELEASE_(docs_);
  RELEASE_(scores_);
  RELEASE_(counts_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:withFloat:withInt:withBoolean:", "OneGroup", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "readerContext_", NULL, 0x0, "Lorg.apache.lucene.index.LeafReaderContext;", NULL, NULL, .constantValue.asLong = 0 },
    { "docs_", NULL, 0x0, "[[I", NULL, NULL, .constantValue.asLong = 0 },
    { "scores_", NULL, 0x0, "[[F", NULL, NULL, .constantValue.asLong = 0 },
    { "counts_", NULL, 0x0, "[I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup = { 2, "OneGroup", "org.apache.lucene.search.join", "ToParentBlockJoinCollector", 0x1a, 1, methods, 4, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup;
}

@end

void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_initWithInt_withInt_withFloat_withInt_withBoolean_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *self, jint comparatorSlot, jint parentDoc, jfloat parentScore, jint numJoins, jboolean doScores) {
  OrgApacheLuceneSearchFieldValueHitQueue_Entry_initWithInt_withInt_withFloat_(self, comparatorSlot, parentDoc, parentScore);
  JreStrongAssignAndConsume(&self->docs_, [IOSObjectArray newArrayWithLength:numJoins type:IOSClass_intArray(1)]);
  for (jint joinID = 0; joinID < numJoins; joinID++) {
    IOSObjectArray_SetAndConsume(self->docs_, joinID, [IOSIntArray newArrayWithLength:5]);
  }
  if (doScores) {
    JreStrongAssignAndConsume(&self->scores_, [IOSObjectArray newArrayWithLength:numJoins type:IOSClass_floatArray(1)]);
    for (jint joinID = 0; joinID < numJoins; joinID++) {
      IOSObjectArray_SetAndConsume(self->scores_, joinID, [IOSFloatArray newArrayWithLength:5]);
    }
  }
  JreStrongAssignAndConsume(&self->counts_, [IOSIntArray newArrayWithLength:numJoins]);
}

OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *new_OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_initWithInt_withInt_withFloat_withInt_withBoolean_(jint comparatorSlot, jint parentDoc, jfloat parentScore, jint numJoins, jboolean doScores) {
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *self = [OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup alloc];
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_initWithInt_withInt_withFloat_withInt_withBoolean_(self, comparatorSlot, parentDoc, parentScore, numJoins, doScores);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup)

@implementation OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
  if ([scorer isKindOfClass:[OrgApacheLuceneSearchScoreCachingWrappingScorer class]] == NO) {
    scorer = [new_OrgApacheLuceneSearchScoreCachingWrappingScorer_initWithOrgApacheLuceneSearchScorer_(scorer) autorelease];
  }
  JreStrongAssign(&self->scorer_, scorer);
  {
    IOSObjectArray *a__ = val$comparators_;
    id<OrgApacheLuceneSearchLeafFieldComparator> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgApacheLuceneSearchLeafFieldComparator> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgApacheLuceneSearchLeafFieldComparator> comparator = *b__++;
      [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(comparator)) setScorerWithOrgApacheLuceneSearchScorer:scorer];
    }
  }
  JavaUtilArrays_fillWithNSObjectArray_withId_(this$0_->joinScorers_, nil);
  id<JavaUtilQueue> queue = [new_JavaUtilLinkedList_init() autorelease];
  [queue addWithId:scorer];
  while ((scorer = [queue poll]) != nil) {
    if ([scorer isKindOfClass:[OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer class]]) {
      OrgApacheLuceneSearchJoinToParentBlockJoinCollector_enrollWithOrgApacheLuceneSearchJoinToParentBlockJoinQuery_withOrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer_(this$0_, (OrgApacheLuceneSearchJoinToParentBlockJoinQuery *) check_class_cast([((OrgApacheLuceneSearchWeight *) nil_chk([((OrgApacheLuceneSearchScorer *) nil_chk(scorer)) getWeight])) getQuery], [OrgApacheLuceneSearchJoinToParentBlockJoinQuery class]), (OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer *) check_class_cast(scorer, [OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer class]));
    }
    for (OrgApacheLuceneSearchScorer_ChildScorer * __strong sub in nil_chk([((OrgApacheLuceneSearchScorer *) nil_chk(scorer)) getChildren])) {
      [queue addWithId:((OrgApacheLuceneSearchScorer_ChildScorer *) nil_chk(sub))->child_];
    }
  }
}

- (void)collectWithInt:(jint)parentDoc {
  this$0_->totalHitCount_++;
  jfloat score = JavaLangFloat_NaN;
  if (this$0_->trackMaxScore_) {
    score = [((OrgApacheLuceneSearchScorer *) nil_chk(scorer_)) score];
    this$0_->maxScore_ = JavaLangMath_maxWithFloat_withFloat_(this$0_->maxScore_, score);
  }
  if (this$0_->queueFull_) {
    jint c = 0;
    for (jint i = 0; i < ((IOSObjectArray *) nil_chk(val$comparators_))->size_; ++i) {
      c = IOSIntArray_Get(nil_chk(val$reverseMul_), i) * [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(IOSObjectArray_Get(val$comparators_, i))) compareBottomWithInt:parentDoc];
      if (c != 0) {
        break;
      }
    }
    if (c <= 0) {
      return;
    }
    {
      IOSObjectArray *a__ = val$comparators_;
      id<OrgApacheLuceneSearchLeafFieldComparator> const *b__ = a__->buffer_;
      id<OrgApacheLuceneSearchLeafFieldComparator> const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        id<OrgApacheLuceneSearchLeafFieldComparator> comparator = *b__++;
        [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(comparator)) copy__WithInt:((OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *) nil_chk(this$0_->bottom_))->slot_ withInt:parentDoc];
      }
    }
    if (!this$0_->trackMaxScore_ && this$0_->trackScores_) {
      score = [((OrgApacheLuceneSearchScorer *) nil_chk(scorer_)) score];
    }
    ((OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *) nil_chk(this$0_->bottom_))->doc_ = val$docBase_ + parentDoc;
    JreStrongAssign(&this$0_->bottom_->readerContext_, val$context_);
    this$0_->bottom_->score_ = score;
    OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_copyGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_(self, this$0_->bottom_);
    JreStrongAssign(&this$0_->bottom_, [((OrgApacheLuceneSearchFieldValueHitQueue *) nil_chk(this$0_->queue_)) updateTop]);
    {
      IOSObjectArray *a__ = val$comparators_;
      id<OrgApacheLuceneSearchLeafFieldComparator> const *b__ = a__->buffer_;
      id<OrgApacheLuceneSearchLeafFieldComparator> const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        id<OrgApacheLuceneSearchLeafFieldComparator> comparator = *b__++;
        [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(comparator)) setBottomWithInt:((OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *) nil_chk(this$0_->bottom_))->slot_];
      }
    }
  }
  else {
    jint comparatorSlot = this$0_->totalHitCount_ - 1;
    {
      IOSObjectArray *a__ = val$comparators_;
      id<OrgApacheLuceneSearchLeafFieldComparator> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
      id<OrgApacheLuceneSearchLeafFieldComparator> const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        id<OrgApacheLuceneSearchLeafFieldComparator> comparator = *b__++;
        [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(comparator)) copy__WithInt:comparatorSlot withInt:parentDoc];
      }
    }
    if (!this$0_->trackMaxScore_ && this$0_->trackScores_) {
      score = [((OrgApacheLuceneSearchScorer *) nil_chk(scorer_)) score];
    }
    OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *og = [new_OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_initWithInt_withInt_withFloat_withInt_withBoolean_(comparatorSlot, val$docBase_ + parentDoc, score, ((IOSObjectArray *) nil_chk(this$0_->joinScorers_))->size_, this$0_->trackScores_) autorelease];
    JreStrongAssign(&og->readerContext_, val$context_);
    OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_copyGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_(self, og);
    JreStrongAssign(&this$0_->bottom_, [((OrgApacheLuceneSearchFieldValueHitQueue *) nil_chk(this$0_->queue_)) addWithId:og]);
    this$0_->queueFull_ = (this$0_->totalHitCount_ == this$0_->numParentHits_);
    if (this$0_->queueFull_) {
      {
        IOSObjectArray *a__ = val$comparators_;
        id<OrgApacheLuceneSearchLeafFieldComparator> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
        id<OrgApacheLuceneSearchLeafFieldComparator> const *e__ = b__ + a__->size_;
        while (b__ < e__) {
          id<OrgApacheLuceneSearchLeafFieldComparator> comparator = *b__++;
          [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(comparator)) setBottomWithInt:((OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *) nil_chk(this$0_->bottom_))->slot_];
        }
      }
    }
  }
}

- (void)copyGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup:(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *)og {
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_copyGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_(self, og);
}

- (instancetype)initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector:(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *)outer$
                          withOrgApacheLuceneSearchLeafFieldComparatorArray:(IOSObjectArray *)capture$0
                                                               withIntArray:(IOSIntArray *)capture$1
                                                                    withInt:(jint)capture$2
                                  withOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)capture$3 {
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_withOrgApacheLuceneSearchLeafFieldComparatorArray_withIntArray_withInt_withOrgApacheLuceneIndexLeafReaderContext_(self, outer$, capture$0, capture$1, capture$2, capture$3);
  return self;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(scorer_);
  RELEASE_(val$comparators_);
  RELEASE_(val$reverseMul_);
  RELEASE_(val$context_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "setScorerWithOrgApacheLuceneSearchScorer:", "setScorer", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "collectWithInt:", "collect", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "copyGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup:", "copyGroups", "V", 0x2, NULL, NULL },
    { "initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector:withOrgApacheLuceneSearchLeafFieldComparatorArray:withIntArray:withInt:withOrgApacheLuceneIndexLeafReaderContext:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.join.ToParentBlockJoinCollector;", NULL, NULL, .constantValue.asLong = 0 },
    { "scorer_", NULL, 0x2, "Lorg.apache.lucene.search.Scorer;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$comparators_", NULL, 0x1012, "[Lorg.apache.lucene.search.LeafFieldComparator;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$reverseMul_", NULL, 0x1012, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "val$docBase_", NULL, 0x1012, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "val$context_", NULL, 0x1012, "Lorg.apache.lucene.index.LeafReaderContext;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgApacheLuceneSearchJoinToParentBlockJoinCollector", "getLeafCollectorWithOrgApacheLuceneIndexLeafReaderContext:" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 = { 2, "", "org.apache.lucene.search.join", "ToParentBlockJoinCollector", 0x8008, 4, methods, 6, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1;
}

@end

void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_copyGroupsWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 *self, OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *og) {
  jint numSubScorers = ((IOSObjectArray *) nil_chk(self->this$0_->joinScorers_))->size_;
  if (((IOSObjectArray *) nil_chk(((OrgApacheLuceneSearchJoinToParentBlockJoinCollector_OneGroup *) nil_chk(og))->docs_))->size_ < numSubScorers) {
    JreStrongAssign(&og->docs_, OrgApacheLuceneUtilArrayUtil_growWithIntArray2_(og->docs_));
  }
  if (((IOSIntArray *) nil_chk(og->counts_))->size_ < numSubScorers) {
    JreStrongAssign(&og->counts_, OrgApacheLuceneUtilArrayUtil_growWithIntArray_(og->counts_));
  }
  if (self->this$0_->trackScores_ && ((IOSObjectArray *) nil_chk(og->scores_))->size_ < numSubScorers) {
    JreStrongAssign(&og->scores_, OrgApacheLuceneUtilArrayUtil_growWithFloatArray2_(og->scores_));
  }
  for (jint scorerIDX = 0; scorerIDX < numSubScorers; scorerIDX++) {
    OrgApacheLuceneSearchJoinToParentBlockJoinQuery_BlockJoinScorer *joinScorer = IOSObjectArray_Get(self->this$0_->joinScorers_, scorerIDX);
    if (joinScorer != nil && self->val$docBase_ + [joinScorer getParentDoc] == og->doc_) {
      *IOSIntArray_GetRef(nil_chk(og->counts_), scorerIDX) = [joinScorer getChildCount];
      IOSObjectArray_Set(nil_chk(og->docs_), scorerIDX, [joinScorer swapChildDocsWithIntArray:IOSObjectArray_Get(og->docs_, scorerIDX)]);
      JreAssert((((IOSIntArray *) nil_chk(IOSObjectArray_Get(og->docs_, scorerIDX)))->size_ >= IOSIntArray_Get(og->counts_, scorerIDX)), (JreStrcat("$I$I", @"length=", ((IOSIntArray *) nil_chk(IOSObjectArray_Get(og->docs_, scorerIDX)))->size_, @" vs count=", IOSIntArray_Get(og->counts_, scorerIDX))));
      if (self->this$0_->trackScores_) {
        IOSObjectArray_Set(nil_chk(og->scores_), scorerIDX, [joinScorer swapChildScoresWithFloatArray:IOSObjectArray_Get(og->scores_, scorerIDX)]);
        JreAssert((((IOSFloatArray *) nil_chk(IOSObjectArray_Get(og->scores_, scorerIDX)))->size_ >= IOSIntArray_Get(og->counts_, scorerIDX)), (JreStrcat("$I$I", @"length=", ((IOSFloatArray *) nil_chk(IOSObjectArray_Get(og->scores_, scorerIDX)))->size_, @" vs count=", IOSIntArray_Get(og->counts_, scorerIDX))));
      }
    }
    else {
      *IOSIntArray_GetRef(nil_chk(og->counts_), scorerIDX) = 0;
    }
  }
}

void OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_withOrgApacheLuceneSearchLeafFieldComparatorArray_withIntArray_withInt_withOrgApacheLuceneIndexLeafReaderContext_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 *self, OrgApacheLuceneSearchJoinToParentBlockJoinCollector *outer$, IOSObjectArray *capture$0, IOSIntArray *capture$1, jint capture$2, OrgApacheLuceneIndexLeafReaderContext *capture$3) {
  JreStrongAssign(&self->this$0_, outer$);
  JreStrongAssign(&self->val$comparators_, capture$0);
  JreStrongAssign(&self->val$reverseMul_, capture$1);
  self->val$docBase_ = capture$2;
  JreStrongAssign(&self->val$context_, capture$3);
  NSObject_init(self);
}

OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 *new_OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_withOrgApacheLuceneSearchLeafFieldComparatorArray_withIntArray_withInt_withOrgApacheLuceneIndexLeafReaderContext_(OrgApacheLuceneSearchJoinToParentBlockJoinCollector *outer$, IOSObjectArray *capture$0, IOSIntArray *capture$1, jint capture$2, OrgApacheLuceneIndexLeafReaderContext *capture$3) {
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 *self = [OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1 alloc];
  OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1_initWithOrgApacheLuceneSearchJoinToParentBlockJoinCollector_withOrgApacheLuceneSearchLeafFieldComparatorArray_withIntArray_withInt_withOrgApacheLuceneIndexLeafReaderContext_(self, outer$, capture$0, capture$1, capture$2, capture$3);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinToParentBlockJoinCollector_$1)
