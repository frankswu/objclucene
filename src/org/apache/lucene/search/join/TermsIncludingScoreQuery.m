//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./join/src/java/org/apache/lucene/search/join/TermsIncludingScoreQuery.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/util/Comparator.h"
#include "java/util/Locale.h"
#include "java/util/Set.h"
#include "org/apache/lucene/index/IndexReader.h"
#include "org/apache/lucene/index/LeafReader.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/index/PostingsEnum.h"
#include "org/apache/lucene/index/Terms.h"
#include "org/apache/lucene/index/TermsEnum.h"
#include "org/apache/lucene/search/DocIdSetIterator.h"
#include "org/apache/lucene/search/Explanation.h"
#include "org/apache/lucene/search/IndexSearcher.h"
#include "org/apache/lucene/search/Query.h"
#include "org/apache/lucene/search/Scorer.h"
#include "org/apache/lucene/search/Weight.h"
#include "org/apache/lucene/search/join/TermsIncludingScoreQuery.h"
#include "org/apache/lucene/util/BitSetIterator.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/BytesRefHash.h"
#include "org/apache/lucene/util/FixedBitSet.h"

@interface OrgApacheLuceneSearchJoinTermsIncludingScoreQuery ()

- (instancetype)initWithNSString:(NSString *)field
                     withBoolean:(jboolean)multipleValuesPerDocument
withOrgApacheLuceneUtilBytesRefHash:(OrgApacheLuceneUtilBytesRefHash *)terms
                  withFloatArray:(IOSFloatArray *)scores
                    withIntArray:(IOSIntArray *)ords
  withOrgApacheLuceneSearchQuery:(OrgApacheLuceneSearchQuery *)originalQuery
  withOrgApacheLuceneSearchQuery:(OrgApacheLuceneSearchQuery *)unwrittenOriginalQuery;

@end

__attribute__((unused)) static void OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withIntArray_withOrgApacheLuceneSearchQuery_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *self, NSString *field, jboolean multipleValuesPerDocument, OrgApacheLuceneUtilBytesRefHash *terms, IOSFloatArray *scores, IOSIntArray *ords, OrgApacheLuceneSearchQuery *originalQuery, OrgApacheLuceneSearchQuery *unwrittenOriginalQuery);

__attribute__((unused)) static OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withIntArray_withOrgApacheLuceneSearchQuery_withOrgApacheLuceneSearchQuery_(NSString *field, jboolean multipleValuesPerDocument, OrgApacheLuceneUtilBytesRefHash *terms, IOSFloatArray *scores, IOSIntArray *ords, OrgApacheLuceneSearchQuery *originalQuery, OrgApacheLuceneSearchQuery *unwrittenOriginalQuery) NS_RETURNS_RETAINED;

@interface OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer () {
 @public
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *this$0_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer, this$0_, OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *)

@interface OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer () {
 @public
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *this$1_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer, this$1_, OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *)

@interface OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1 : OrgApacheLuceneSearchWeight {
 @public
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *this$0_;
  OrgApacheLuceneSearchWeight *val$originalWeight_;
}

- (void)extractTermsWithJavaUtilSet:(id<JavaUtilSet>)terms;

- (OrgApacheLuceneSearchExplanation *)explainWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context
                                                                               withInt:(jint)doc;

- (jfloat)getValueForNormalization;

- (void)normalizeWithFloat:(jfloat)norm
                 withFloat:(jfloat)topLevelBoost;

- (OrgApacheLuceneSearchScorer *)scorerWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context;

- (instancetype)initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery:(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *)outer$
                                          withOrgApacheLuceneSearchWeight:(OrgApacheLuceneSearchWeight *)capture$0
                                           withOrgApacheLuceneSearchQuery:(OrgApacheLuceneSearchQuery *)arg$0;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1, this$0_, OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1, val$originalWeight_, OrgApacheLuceneSearchWeight *)

__attribute__((unused)) static void OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1 *self, OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *outer$, OrgApacheLuceneSearchWeight *capture$0, OrgApacheLuceneSearchQuery *arg$0);

__attribute__((unused)) static OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1 *new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *outer$, OrgApacheLuceneSearchWeight *capture$0, OrgApacheLuceneSearchQuery *arg$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1)

@implementation OrgApacheLuceneSearchJoinTermsIncludingScoreQuery

- (instancetype)initWithNSString:(NSString *)field
                     withBoolean:(jboolean)multipleValuesPerDocument
withOrgApacheLuceneUtilBytesRefHash:(OrgApacheLuceneUtilBytesRefHash *)terms
                  withFloatArray:(IOSFloatArray *)scores
  withOrgApacheLuceneSearchQuery:(OrgApacheLuceneSearchQuery *)originalQuery {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withOrgApacheLuceneSearchQuery_(self, field, multipleValuesPerDocument, terms, scores, originalQuery);
  return self;
}

- (instancetype)initWithNSString:(NSString *)field
                     withBoolean:(jboolean)multipleValuesPerDocument
withOrgApacheLuceneUtilBytesRefHash:(OrgApacheLuceneUtilBytesRefHash *)terms
                  withFloatArray:(IOSFloatArray *)scores
                    withIntArray:(IOSIntArray *)ords
  withOrgApacheLuceneSearchQuery:(OrgApacheLuceneSearchQuery *)originalQuery
  withOrgApacheLuceneSearchQuery:(OrgApacheLuceneSearchQuery *)unwrittenOriginalQuery {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withIntArray_withOrgApacheLuceneSearchQuery_withOrgApacheLuceneSearchQuery_(self, field, multipleValuesPerDocument, terms, scores, ords, originalQuery, unwrittenOriginalQuery);
  return self;
}

- (NSString *)toStringWithNSString:(NSString *)string {
  return NSString_formatWithJavaUtilLocale_withNSString_withNSObjectArray_(JreLoadStatic(JavaUtilLocale, ROOT_), @"TermsIncludingScoreQuery{field=%s;originalQuery=%s}", [IOSObjectArray arrayWithObjects:(id[]){ field_, unwrittenOriginalQuery_ } count:2 type:NSObject_class_()]);
}

- (OrgApacheLuceneSearchQuery *)rewriteWithOrgApacheLuceneIndexIndexReader:(OrgApacheLuceneIndexIndexReader *)reader {
  OrgApacheLuceneSearchQuery *originalQueryRewrite = [((OrgApacheLuceneSearchQuery *) nil_chk(originalQuery_)) rewriteWithOrgApacheLuceneIndexIndexReader:reader];
  if (originalQueryRewrite != originalQuery_) {
    OrgApacheLuceneSearchQuery *rewritten = [new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withIntArray_withOrgApacheLuceneSearchQuery_withOrgApacheLuceneSearchQuery_(field_, multipleValuesPerDocument_, terms_, scores_, ords_, originalQueryRewrite, originalQuery_) autorelease];
    [rewritten setBoostWithFloat:[self getBoost]];
    return rewritten;
  }
  else {
    return self;
  }
}

- (jboolean)isEqual:(id)obj {
  if (self == obj) {
    return true;
  }
  if (![super isEqual:obj]) {
    return false;
  }
  if ([self getClass] != [nil_chk(obj) getClass]) {
    return false;
  }
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *other = (OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *) check_class_cast(obj, [OrgApacheLuceneSearchJoinTermsIncludingScoreQuery class]);
  if (![((NSString *) nil_chk(field_)) isEqual:other->field_]) {
    return false;
  }
  if (![((OrgApacheLuceneSearchQuery *) nil_chk(unwrittenOriginalQuery_)) isEqual:other->unwrittenOriginalQuery_]) {
    return false;
  }
  return true;
}

- (NSUInteger)hash {
  jint prime = 31;
  jint result = ((jint) [super hash]);
  result += prime * ((jint) [((NSString *) nil_chk(field_)) hash]);
  result += prime * ((jint) [((OrgApacheLuceneSearchQuery *) nil_chk(unwrittenOriginalQuery_)) hash]);
  return result;
}

- (OrgApacheLuceneSearchWeight *)createWeightWithOrgApacheLuceneSearchIndexSearcher:(OrgApacheLuceneSearchIndexSearcher *)searcher
                                                                        withBoolean:(jboolean)needsScores {
  OrgApacheLuceneSearchWeight *originalWeight = [((OrgApacheLuceneSearchQuery *) nil_chk(originalQuery_)) createWeightWithOrgApacheLuceneSearchIndexSearcher:searcher withBoolean:needsScores];
  return [new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneSearchQuery_(self, originalWeight, self) autorelease];
}

- (void)dealloc {
  RELEASE_(field_);
  RELEASE_(terms_);
  RELEASE_(scores_);
  RELEASE_(ords_);
  RELEASE_(originalQuery_);
  RELEASE_(unwrittenOriginalQuery_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withBoolean:withOrgApacheLuceneUtilBytesRefHash:withFloatArray:withOrgApacheLuceneSearchQuery:", "TermsIncludingScoreQuery", NULL, 0x0, NULL, NULL },
    { "initWithNSString:withBoolean:withOrgApacheLuceneUtilBytesRefHash:withFloatArray:withIntArray:withOrgApacheLuceneSearchQuery:withOrgApacheLuceneSearchQuery:", "TermsIncludingScoreQuery", NULL, 0x2, NULL, NULL },
    { "toStringWithNSString:", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "rewriteWithOrgApacheLuceneIndexIndexReader:", "rewrite", "Lorg.apache.lucene.search.Query;", 0x1, "Ljava.io.IOException;", NULL },
    { "isEqual:", "equals", "Z", 0x1, NULL, NULL },
    { "hash", "hashCode", "I", 0x1, NULL, NULL },
    { "createWeightWithOrgApacheLuceneSearchIndexSearcher:withBoolean:", "createWeight", "Lorg.apache.lucene.search.Weight;", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "field_", NULL, 0x10, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "multipleValuesPerDocument_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "terms_", NULL, 0x10, "Lorg.apache.lucene.util.BytesRefHash;", NULL, NULL, .constantValue.asLong = 0 },
    { "scores_", NULL, 0x10, "[F", NULL, NULL, .constantValue.asLong = 0 },
    { "ords_", NULL, 0x10, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "originalQuery_", NULL, 0x10, "Lorg.apache.lucene.search.Query;", NULL, NULL, .constantValue.asLong = 0 },
    { "unwrittenOriginalQuery_", NULL, 0x10, "Lorg.apache.lucene.search.Query;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.join.TermsIncludingScoreQuery$SVInOrderScorer;", "Lorg.apache.lucene.search.join.TermsIncludingScoreQuery$MVInOrderScorer;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinTermsIncludingScoreQuery = { 2, "TermsIncludingScoreQuery", "org.apache.lucene.search.join", NULL, 0x0, 7, methods, 7, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery;
}

@end

void OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *self, NSString *field, jboolean multipleValuesPerDocument, OrgApacheLuceneUtilBytesRefHash *terms, IOSFloatArray *scores, OrgApacheLuceneSearchQuery *originalQuery) {
  OrgApacheLuceneSearchQuery_init(self);
  JreStrongAssign(&self->field_, field);
  self->multipleValuesPerDocument_ = multipleValuesPerDocument;
  JreStrongAssign(&self->terms_, terms);
  JreStrongAssign(&self->scores_, scores);
  JreStrongAssign(&self->originalQuery_, originalQuery);
  JreStrongAssign(&self->ords_, [((OrgApacheLuceneUtilBytesRefHash *) nil_chk(terms)) sortWithJavaUtilComparator:OrgApacheLuceneUtilBytesRef_getUTF8SortedAsUnicodeComparator()]);
  JreStrongAssign(&self->unwrittenOriginalQuery_, originalQuery);
}

OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withOrgApacheLuceneSearchQuery_(NSString *field, jboolean multipleValuesPerDocument, OrgApacheLuceneUtilBytesRefHash *terms, IOSFloatArray *scores, OrgApacheLuceneSearchQuery *originalQuery) {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *self = [OrgApacheLuceneSearchJoinTermsIncludingScoreQuery alloc];
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withOrgApacheLuceneSearchQuery_(self, field, multipleValuesPerDocument, terms, scores, originalQuery);
  return self;
}

void OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withIntArray_withOrgApacheLuceneSearchQuery_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *self, NSString *field, jboolean multipleValuesPerDocument, OrgApacheLuceneUtilBytesRefHash *terms, IOSFloatArray *scores, IOSIntArray *ords, OrgApacheLuceneSearchQuery *originalQuery, OrgApacheLuceneSearchQuery *unwrittenOriginalQuery) {
  OrgApacheLuceneSearchQuery_init(self);
  JreStrongAssign(&self->field_, field);
  self->multipleValuesPerDocument_ = multipleValuesPerDocument;
  JreStrongAssign(&self->terms_, terms);
  JreStrongAssign(&self->scores_, scores);
  JreStrongAssign(&self->originalQuery_, originalQuery);
  JreStrongAssign(&self->ords_, ords);
  JreStrongAssign(&self->unwrittenOriginalQuery_, unwrittenOriginalQuery);
}

OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withIntArray_withOrgApacheLuceneSearchQuery_withOrgApacheLuceneSearchQuery_(NSString *field, jboolean multipleValuesPerDocument, OrgApacheLuceneUtilBytesRefHash *terms, IOSFloatArray *scores, IOSIntArray *ords, OrgApacheLuceneSearchQuery *originalQuery, OrgApacheLuceneSearchQuery *unwrittenOriginalQuery) {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *self = [OrgApacheLuceneSearchJoinTermsIncludingScoreQuery alloc];
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_initWithNSString_withBoolean_withOrgApacheLuceneUtilBytesRefHash_withFloatArray_withIntArray_withOrgApacheLuceneSearchQuery_withOrgApacheLuceneSearchQuery_(self, field, multipleValuesPerDocument, terms, scores, ords, originalQuery, unwrittenOriginalQuery);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery)

@implementation OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer

- (instancetype)initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery:(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *)outer$
                                          withOrgApacheLuceneSearchWeight:(OrgApacheLuceneSearchWeight *)weight
                                        withOrgApacheLuceneIndexTermsEnum:(OrgApacheLuceneIndexTermsEnum *)termsEnum
                                                                  withInt:(jint)maxDoc
                                                                 withLong:(jlong)cost {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(self, outer$, weight, termsEnum, maxDoc, cost);
  return self;
}

- (void)fillDocsAndScoresWithOrgApacheLuceneUtilFixedBitSet:(OrgApacheLuceneUtilFixedBitSet *)matchingDocs
                          withOrgApacheLuceneIndexTermsEnum:(OrgApacheLuceneIndexTermsEnum *)termsEnum {
  OrgApacheLuceneUtilBytesRef *spare = [new_OrgApacheLuceneUtilBytesRef_init() autorelease];
  OrgApacheLuceneIndexPostingsEnum *postingsEnum = nil;
  for (jint i = 0; i < [((OrgApacheLuceneUtilBytesRefHash *) nil_chk(this$0_->terms_)) size]; i++) {
    if ([((OrgApacheLuceneIndexTermsEnum *) nil_chk(termsEnum)) seekExactWithOrgApacheLuceneUtilBytesRef:[this$0_->terms_ getWithInt:IOSIntArray_Get(nil_chk(this$0_->ords_), i) withOrgApacheLuceneUtilBytesRef:spare]]) {
      postingsEnum = [termsEnum postingsWithOrgApacheLuceneIndexPostingsEnum:postingsEnum withInt:OrgApacheLuceneIndexPostingsEnum_NONE];
      jfloat score = IOSFloatArray_Get(nil_chk(this$0_->scores_), IOSIntArray_Get(this$0_->ords_, i));
      for (jint doc = [((OrgApacheLuceneIndexPostingsEnum *) nil_chk(postingsEnum)) nextDoc]; doc != OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS; doc = [postingsEnum nextDoc]) {
        [((OrgApacheLuceneUtilFixedBitSet *) nil_chk(matchingDocs)) setWithInt:doc];
        *IOSFloatArray_GetRef(nil_chk(scores_), doc) = score;
      }
    }
  }
}

- (jfloat)score {
  return IOSFloatArray_Get(nil_chk(scores_), currentDoc_);
}

- (jint)freq {
  return 1;
}

- (jint)docID {
  return currentDoc_;
}

- (jint)nextDoc {
  return currentDoc_ = [((OrgApacheLuceneSearchDocIdSetIterator *) nil_chk(matchingDocsIterator_)) nextDoc];
}

- (jint)advanceWithInt:(jint)target {
  return currentDoc_ = [((OrgApacheLuceneSearchDocIdSetIterator *) nil_chk(matchingDocsIterator_)) advanceWithInt:target];
}

- (jlong)cost {
  return cost_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(matchingDocsIterator_);
  RELEASE_(scores_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery:withOrgApacheLuceneSearchWeight:withOrgApacheLuceneIndexTermsEnum:withInt:withLong:", "SVInOrderScorer", NULL, 0x0, NULL, NULL },
    { "fillDocsAndScoresWithOrgApacheLuceneUtilFixedBitSet:withOrgApacheLuceneIndexTermsEnum:", "fillDocsAndScores", "V", 0x4, "Ljava.io.IOException;", NULL },
    { "score", NULL, "F", 0x1, "Ljava.io.IOException;", NULL },
    { "freq", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "docID", NULL, "I", 0x1, NULL, NULL },
    { "nextDoc", NULL, "I", 0x1, "Ljava.io.IOException;", NULL },
    { "advanceWithInt:", "advance", "I", 0x1, "Ljava.io.IOException;", NULL },
    { "cost", NULL, "J", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.join.TermsIncludingScoreQuery;", NULL, NULL, .constantValue.asLong = 0 },
    { "matchingDocsIterator_", NULL, 0x10, "Lorg.apache.lucene.search.DocIdSetIterator;", NULL, NULL, .constantValue.asLong = 0 },
    { "scores_", NULL, 0x10, "[F", NULL, NULL, .constantValue.asLong = 0 },
    { "cost_", NULL, 0x10, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "currentDoc_", NULL, 0x0, "I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer = { 2, "SVInOrderScorer", "org.apache.lucene.search.join", "TermsIncludingScoreQuery", 0x0, 8, methods, 5, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer;
}

@end

void OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer *self, OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *outer$, OrgApacheLuceneSearchWeight *weight, OrgApacheLuceneIndexTermsEnum *termsEnum, jint maxDoc, jlong cost) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchScorer_initWithOrgApacheLuceneSearchWeight_(self, weight);
  self->currentDoc_ = -1;
  OrgApacheLuceneUtilFixedBitSet *matchingDocs = [new_OrgApacheLuceneUtilFixedBitSet_initWithInt_(maxDoc) autorelease];
  JreStrongAssignAndConsume(&self->scores_, [IOSFloatArray newArrayWithLength:maxDoc]);
  [self fillDocsAndScoresWithOrgApacheLuceneUtilFixedBitSet:matchingDocs withOrgApacheLuceneIndexTermsEnum:termsEnum];
  JreStrongAssignAndConsume(&self->matchingDocsIterator_, new_OrgApacheLuceneUtilBitSetIterator_initWithOrgApacheLuceneUtilBitSet_withLong_(matchingDocs, cost));
  self->cost_ = cost;
}

OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer *new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *outer$, OrgApacheLuceneSearchWeight *weight, OrgApacheLuceneIndexTermsEnum *termsEnum, jint maxDoc, jlong cost) {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer *self = [OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer alloc];
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(self, outer$, weight, termsEnum, maxDoc, cost);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer)

@implementation OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer

- (instancetype)initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery:(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *)outer$
                                          withOrgApacheLuceneSearchWeight:(OrgApacheLuceneSearchWeight *)weight
                                        withOrgApacheLuceneIndexTermsEnum:(OrgApacheLuceneIndexTermsEnum *)termsEnum
                                                                  withInt:(jint)maxDoc
                                                                 withLong:(jlong)cost {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(self, outer$, weight, termsEnum, maxDoc, cost);
  return self;
}

- (void)fillDocsAndScoresWithOrgApacheLuceneUtilFixedBitSet:(OrgApacheLuceneUtilFixedBitSet *)matchingDocs
                          withOrgApacheLuceneIndexTermsEnum:(OrgApacheLuceneIndexTermsEnum *)termsEnum {
  OrgApacheLuceneUtilBytesRef *spare = [new_OrgApacheLuceneUtilBytesRef_init() autorelease];
  OrgApacheLuceneIndexPostingsEnum *postingsEnum = nil;
  for (jint i = 0; i < [((OrgApacheLuceneUtilBytesRefHash *) nil_chk(this$1_->terms_)) size]; i++) {
    if ([((OrgApacheLuceneIndexTermsEnum *) nil_chk(termsEnum)) seekExactWithOrgApacheLuceneUtilBytesRef:[this$1_->terms_ getWithInt:IOSIntArray_Get(nil_chk(this$1_->ords_), i) withOrgApacheLuceneUtilBytesRef:spare]]) {
      postingsEnum = [termsEnum postingsWithOrgApacheLuceneIndexPostingsEnum:postingsEnum withInt:OrgApacheLuceneIndexPostingsEnum_NONE];
      jfloat score = IOSFloatArray_Get(nil_chk(this$1_->scores_), IOSIntArray_Get(this$1_->ords_, i));
      for (jint doc = [((OrgApacheLuceneIndexPostingsEnum *) nil_chk(postingsEnum)) nextDoc]; doc != OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS; doc = [postingsEnum nextDoc]) {
        if (![((OrgApacheLuceneUtilFixedBitSet *) nil_chk(matchingDocs)) getWithInt:doc]) {
          *IOSFloatArray_GetRef(nil_chk(scores_), doc) = score;
          [matchingDocs setWithInt:doc];
        }
      }
    }
  }
}

- (void)dealloc {
  RELEASE_(this$1_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery:withOrgApacheLuceneSearchWeight:withOrgApacheLuceneIndexTermsEnum:withInt:withLong:", "MVInOrderScorer", NULL, 0x0, NULL, NULL },
    { "fillDocsAndScoresWithOrgApacheLuceneUtilFixedBitSet:withOrgApacheLuceneIndexTermsEnum:", "fillDocsAndScores", "V", 0x4, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$1_", NULL, 0x1012, "Lorg.apache.lucene.search.join.TermsIncludingScoreQuery;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer = { 2, "MVInOrderScorer", "org.apache.lucene.search.join", "TermsIncludingScoreQuery", 0x0, 2, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer;
}

@end

void OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer *self, OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *outer$, OrgApacheLuceneSearchWeight *weight, OrgApacheLuceneIndexTermsEnum *termsEnum, jint maxDoc, jlong cost) {
  JreStrongAssign(&self->this$1_, outer$);
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(self, outer$, weight, termsEnum, maxDoc, cost);
}

OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer *new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *outer$, OrgApacheLuceneSearchWeight *weight, OrgApacheLuceneIndexTermsEnum *termsEnum, jint maxDoc, jlong cost) {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer *self = [OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer alloc];
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(self, outer$, weight, termsEnum, maxDoc, cost);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer)

@implementation OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1

- (void)extractTermsWithJavaUtilSet:(id<JavaUtilSet>)terms {
}

- (OrgApacheLuceneSearchExplanation *)explainWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context
                                                                               withInt:(jint)doc {
  OrgApacheLuceneIndexTerms *terms = [((OrgApacheLuceneIndexLeafReader *) nil_chk([((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context)) reader])) termsWithNSString:this$0_->field_];
  if (terms != nil) {
    OrgApacheLuceneIndexTermsEnum *segmentTermsEnum = [terms iterator];
    OrgApacheLuceneUtilBytesRef *spare = [new_OrgApacheLuceneUtilBytesRef_init() autorelease];
    OrgApacheLuceneIndexPostingsEnum *postingsEnum = nil;
    for (jint i = 0; i < [((OrgApacheLuceneUtilBytesRefHash *) nil_chk(this$0_->terms_)) size]; i++) {
      if ([((OrgApacheLuceneIndexTermsEnum *) nil_chk(segmentTermsEnum)) seekExactWithOrgApacheLuceneUtilBytesRef:[this$0_->terms_ getWithInt:IOSIntArray_Get(nil_chk(this$0_->ords_), i) withOrgApacheLuceneUtilBytesRef:spare]]) {
        postingsEnum = [segmentTermsEnum postingsWithOrgApacheLuceneIndexPostingsEnum:postingsEnum withInt:OrgApacheLuceneIndexPostingsEnum_NONE];
        if ([((OrgApacheLuceneIndexPostingsEnum *) nil_chk(postingsEnum)) advanceWithInt:doc] == doc) {
          jfloat score = IOSFloatArray_Get(nil_chk(this$0_->scores_), IOSIntArray_Get(this$0_->ords_, i));
          return OrgApacheLuceneSearchExplanation_matchWithFloat_withNSString_withOrgApacheLuceneSearchExplanationArray_(score, JreStrcat("$$", @"Score based on join value ", [((OrgApacheLuceneUtilBytesRef *) nil_chk([segmentTermsEnum term])) utf8ToString]), [IOSObjectArray arrayWithLength:0 type:OrgApacheLuceneSearchExplanation_class_()]);
        }
      }
    }
  }
  return OrgApacheLuceneSearchExplanation_noMatchWithNSString_withOrgApacheLuceneSearchExplanationArray_(@"Not a match", [IOSObjectArray arrayWithLength:0 type:OrgApacheLuceneSearchExplanation_class_()]);
}

- (jfloat)getValueForNormalization {
  return [((OrgApacheLuceneSearchWeight *) nil_chk(val$originalWeight_)) getValueForNormalization] * [this$0_ getBoost] * [this$0_ getBoost];
}

- (void)normalizeWithFloat:(jfloat)norm
                 withFloat:(jfloat)topLevelBoost {
  [((OrgApacheLuceneSearchWeight *) nil_chk(val$originalWeight_)) normalizeWithFloat:norm withFloat:topLevelBoost * [this$0_ getBoost]];
}

- (OrgApacheLuceneSearchScorer *)scorerWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  OrgApacheLuceneIndexTerms *terms = [((OrgApacheLuceneIndexLeafReader *) nil_chk([((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context)) reader])) termsWithNSString:this$0_->field_];
  if (terms == nil) {
    return nil;
  }
  jlong cost = [((OrgApacheLuceneIndexLeafReader *) nil_chk([context reader])) maxDoc] * [((OrgApacheLuceneIndexTerms *) nil_chk(terms)) size];
  OrgApacheLuceneIndexTermsEnum *segmentTermsEnum = [terms iterator];
  if (this$0_->multipleValuesPerDocument_) {
    return [new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_MVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(this$0_, self, segmentTermsEnum, [((OrgApacheLuceneIndexLeafReader *) nil_chk([context reader])) maxDoc], cost) autorelease];
  }
  else {
    return [new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_SVInOrderScorer_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneIndexTermsEnum_withInt_withLong_(this$0_, self, segmentTermsEnum, [((OrgApacheLuceneIndexLeafReader *) nil_chk([context reader])) maxDoc], cost) autorelease];
  }
}

- (instancetype)initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery:(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *)outer$
                                          withOrgApacheLuceneSearchWeight:(OrgApacheLuceneSearchWeight *)capture$0
                                           withOrgApacheLuceneSearchQuery:(OrgApacheLuceneSearchQuery *)arg$0 {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneSearchQuery_(self, outer$, capture$0, arg$0);
  return self;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(val$originalWeight_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "extractTermsWithJavaUtilSet:", "extractTerms", "V", 0x1, NULL, NULL },
    { "explainWithOrgApacheLuceneIndexLeafReaderContext:withInt:", "explain", "Lorg.apache.lucene.search.Explanation;", 0x1, "Ljava.io.IOException;", NULL },
    { "getValueForNormalization", NULL, "F", 0x1, "Ljava.io.IOException;", NULL },
    { "normalizeWithFloat:withFloat:", "normalize", "V", 0x1, NULL, NULL },
    { "scorerWithOrgApacheLuceneIndexLeafReaderContext:", "scorer", "Lorg.apache.lucene.search.Scorer;", 0x1, "Ljava.io.IOException;", NULL },
    { "initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery:withOrgApacheLuceneSearchWeight:withOrgApacheLuceneSearchQuery:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.join.TermsIncludingScoreQuery;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$originalWeight_", NULL, 0x1012, "Lorg.apache.lucene.search.Weight;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgApacheLuceneSearchJoinTermsIncludingScoreQuery", "createWeightWithOrgApacheLuceneSearchIndexSearcher:withBoolean:" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1 = { 2, "", "org.apache.lucene.search.join", "TermsIncludingScoreQuery", 0x8008, 6, methods, 2, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1;
}

@end

void OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1 *self, OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *outer$, OrgApacheLuceneSearchWeight *capture$0, OrgApacheLuceneSearchQuery *arg$0) {
  JreStrongAssign(&self->this$0_, outer$);
  JreStrongAssign(&self->val$originalWeight_, capture$0);
  OrgApacheLuceneSearchWeight_initWithOrgApacheLuceneSearchQuery_(self, arg$0);
}

OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1 *new_OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery *outer$, OrgApacheLuceneSearchWeight *capture$0, OrgApacheLuceneSearchQuery *arg$0) {
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1 *self = [OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1 alloc];
  OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1_initWithOrgApacheLuceneSearchJoinTermsIncludingScoreQuery_withOrgApacheLuceneSearchWeight_withOrgApacheLuceneSearchQuery_(self, outer$, capture$0, arg$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchJoinTermsIncludingScoreQuery_$1)
