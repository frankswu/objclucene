//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./misc/src/java/org/apache/lucene/search/DiversifiedTopDocsCollector.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/lang/Float.h"
#include "java/lang/Long.h"
#include "java/util/HashMap.h"
#include "java/util/Map.h"
#include "java/util/Stack.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/index/NumericDocValues.h"
#include "org/apache/lucene/search/DiversifiedTopDocsCollector.h"
#include "org/apache/lucene/search/LeafCollector.h"
#include "org/apache/lucene/search/ScoreDoc.h"
#include "org/apache/lucene/search/Scorer.h"
#include "org/apache/lucene/search/TopDocs.h"
#include "org/apache/lucene/search/TopDocsCollector.h"
#include "org/apache/lucene/util/PriorityQueue.h"

@interface OrgApacheLuceneSearchDiversifiedTopDocsCollector () {
 @public
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *globalQueue_;
  jint numHits_;
  id<JavaUtilMap> perKeyQueues_;
  JavaUtilStack *sparePerKeyQueues_;
}

- (void)perKeyGroupRemoveWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey:(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *)globalOverflow;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchDiversifiedTopDocsCollector, globalQueue_, OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchDiversifiedTopDocsCollector, perKeyQueues_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchDiversifiedTopDocsCollector, sparePerKeyQueues_, JavaUtilStack *)

__attribute__((unused)) static void OrgApacheLuceneSearchDiversifiedTopDocsCollector_perKeyGroupRemoveWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_(OrgApacheLuceneSearchDiversifiedTopDocsCollector *self, OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *globalOverflow);

__attribute__((unused)) static jboolean OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_lessThanWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_withOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *self, OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *hitA, OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *hitB);

@interface OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1 : NSObject < OrgApacheLuceneSearchLeafCollector > {
 @public
  OrgApacheLuceneSearchDiversifiedTopDocsCollector *this$0_;
  OrgApacheLuceneSearchScorer *scorer_;
  jint val$base_;
  OrgApacheLuceneIndexNumericDocValues *val$keySource_;
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer;

- (void)collectWithInt:(jint)doc;

- (instancetype)initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector:(OrgApacheLuceneSearchDiversifiedTopDocsCollector *)outer$
                                                                 withInt:(jint)capture$0
                                withOrgApacheLuceneIndexNumericDocValues:(OrgApacheLuceneIndexNumericDocValues *)capture$1;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1, this$0_, OrgApacheLuceneSearchDiversifiedTopDocsCollector *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1, scorer_, OrgApacheLuceneSearchScorer *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1, val$keySource_, OrgApacheLuceneIndexNumericDocValues *)

__attribute__((unused)) static void OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1_initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1 *self, OrgApacheLuceneSearchDiversifiedTopDocsCollector *outer$, jint capture$0, OrgApacheLuceneIndexNumericDocValues *capture$1);

__attribute__((unused)) static OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1 *new_OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1_initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_(OrgApacheLuceneSearchDiversifiedTopDocsCollector *outer$, jint capture$0, OrgApacheLuceneIndexNumericDocValues *capture$1) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1 *create_OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1_initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_(OrgApacheLuceneSearchDiversifiedTopDocsCollector *outer$, jint capture$0, OrgApacheLuceneIndexNumericDocValues *capture$1);

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1)

@implementation OrgApacheLuceneSearchDiversifiedTopDocsCollector

- (instancetype)initWithInt:(jint)numHits
                    withInt:(jint)maxHitsPerKey {
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_initWithInt_withInt_(self, numHits, maxHitsPerKey);
  return self;
}

- (OrgApacheLuceneIndexNumericDocValues *)getKeysWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (jboolean)needsScores {
  return true;
}

- (OrgApacheLuceneSearchTopDocs *)newTopDocsWithOrgApacheLuceneSearchScoreDocArray:(IOSObjectArray *)results
                                                                           withInt:(jint)start {
  if (results == nil) {
    return JreLoadStatic(OrgApacheLuceneSearchTopDocsCollector, EMPTY_TOPDOCS);
  }
  jfloat maxScore = JavaLangFloat_NaN;
  if (start == 0) {
    maxScore = ((OrgApacheLuceneSearchScoreDoc *) nil_chk(IOSObjectArray_Get(results, 0)))->score_;
  }
  else {
    for (jint i = [((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) nil_chk(globalQueue_)) size]; i > 1; i--) {
      [((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) nil_chk(globalQueue_)) pop];
    }
    maxScore = ((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *) nil_chk([((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) nil_chk(globalQueue_)) pop]))->score_;
  }
  return create_OrgApacheLuceneSearchTopDocs_initWithInt_withOrgApacheLuceneSearchScoreDocArray_withFloat_(totalHits_, results, maxScore);
}

- (OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *)insertWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey:(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *)addition
                                                                                                                                 withInt:(jint)docBase
                                                                                                withOrgApacheLuceneIndexNumericDocValues:(OrgApacheLuceneIndexNumericDocValues *)keys {
  if (([((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) nil_chk(globalQueue_)) size] >= numHits_) && (OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_lessThanWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_withOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_(nil_chk(globalQueue_), addition, [globalQueue_ top]))) {
    return addition;
  }
  JreStrongAssign(&((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *) nil_chk(addition))->key_, JavaLangLong_valueOfWithLong_([((OrgApacheLuceneIndexNumericDocValues *) nil_chk(keys)) getWithInt:addition->doc_ - docBase]));
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *thisKeyQ = [((id<JavaUtilMap>) nil_chk(perKeyQueues_)) getWithId:addition->key_];
  if (thisKeyQ == nil) {
    if ([((JavaUtilStack *) nil_chk(sparePerKeyQueues_)) size] == 0) {
      thisKeyQ = create_OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_initWithInt_(maxNumPerKey_);
    }
    else {
      thisKeyQ = [((JavaUtilStack *) nil_chk(sparePerKeyQueues_)) pop];
    }
    [((id<JavaUtilMap>) nil_chk(perKeyQueues_)) putWithId:addition->key_ withId:thisKeyQ];
  }
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *perKeyOverflow = [((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) nil_chk(thisKeyQ)) insertWithOverflowWithId:addition];
  if (perKeyOverflow == addition) {
    return addition;
  }
  if (perKeyOverflow == nil) {
    OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *globalOverflow = [((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) nil_chk(globalQueue_)) insertWithOverflowWithId:addition];
    OrgApacheLuceneSearchDiversifiedTopDocsCollector_perKeyGroupRemoveWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_(self, globalOverflow);
    return globalOverflow;
  }
  [((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) nil_chk(globalQueue_)) removeWithId:perKeyOverflow];
  [((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) nil_chk(globalQueue_)) addWithId:addition];
  return perKeyOverflow;
}

- (void)perKeyGroupRemoveWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey:(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *)globalOverflow {
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_perKeyGroupRemoveWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_(self, globalOverflow);
}

- (id<OrgApacheLuceneSearchLeafCollector>)getLeafCollectorWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  jint base = ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context))->docBase_;
  OrgApacheLuceneIndexNumericDocValues *keySource = [self getKeysWithOrgApacheLuceneIndexLeafReaderContext:context];
  return create_OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1_initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_(self, base, keySource);
}

- (void)dealloc {
  RELEASE_(spare_);
  RELEASE_(globalQueue_);
  RELEASE_(perKeyQueues_);
  RELEASE_(sparePerKeyQueues_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:", "DiversifiedTopDocsCollector", NULL, 0x1, NULL, NULL },
    { "getKeysWithOrgApacheLuceneIndexLeafReaderContext:", "getKeys", "Lorg.apache.lucene.index.NumericDocValues;", 0x404, NULL, NULL },
    { "needsScores", NULL, "Z", 0x1, NULL, NULL },
    { "newTopDocsWithOrgApacheLuceneSearchScoreDocArray:withInt:", "newTopDocs", "Lorg.apache.lucene.search.TopDocs;", 0x4, NULL, NULL },
    { "insertWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey:withInt:withOrgApacheLuceneIndexNumericDocValues:", "insert", "Lorg.apache.lucene.search.DiversifiedTopDocsCollector$ScoreDocKey;", 0x4, NULL, NULL },
    { "perKeyGroupRemoveWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey:", "perKeyGroupRemove", "V", 0x2, NULL, NULL },
    { "getLeafCollectorWithOrgApacheLuceneIndexLeafReaderContext:", "getLeafCollector", "Lorg.apache.lucene.search.LeafCollector;", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "spare_", NULL, 0x0, "Lorg.apache.lucene.search.DiversifiedTopDocsCollector$ScoreDocKey;", NULL, NULL, .constantValue.asLong = 0 },
    { "globalQueue_", NULL, 0x2, "Lorg.apache.lucene.search.DiversifiedTopDocsCollector$ScoreDocKeyQueue;", NULL, NULL, .constantValue.asLong = 0 },
    { "numHits_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "perKeyQueues_", NULL, 0x2, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/Long;Lorg/apache/lucene/search/DiversifiedTopDocsCollector$ScoreDocKeyQueue;>;", .constantValue.asLong = 0 },
    { "maxNumPerKey_", NULL, 0x4, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "sparePerKeyQueues_", NULL, 0x2, "Ljava.util.Stack;", NULL, "Ljava/util/Stack<Lorg/apache/lucene/search/DiversifiedTopDocsCollector$ScoreDocKeyQueue;>;", .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.search.DiversifiedTopDocsCollector$ScoreDocKey;"};
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.DiversifiedTopDocsCollector$ScoreDocKeyQueue;", "Lorg.apache.lucene.search.DiversifiedTopDocsCollector$ScoreDocKey;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchDiversifiedTopDocsCollector = { 2, "DiversifiedTopDocsCollector", "org.apache.lucene.search", NULL, 0x401, 7, methods, 6, fields, 1, superclass_type_args, 2, inner_classes, NULL, "Lorg/apache/lucene/search/TopDocsCollector<Lorg/apache/lucene/search/DiversifiedTopDocsCollector$ScoreDocKey;>;" };
  return &_OrgApacheLuceneSearchDiversifiedTopDocsCollector;
}

@end

void OrgApacheLuceneSearchDiversifiedTopDocsCollector_initWithInt_withInt_(OrgApacheLuceneSearchDiversifiedTopDocsCollector *self, jint numHits, jint maxHitsPerKey) {
  OrgApacheLuceneSearchTopDocsCollector_initWithOrgApacheLuceneUtilPriorityQueue_(self, create_OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_initWithInt_(numHits));
  JreStrongAssignAndConsume(&self->sparePerKeyQueues_, new_JavaUtilStack_init());
  JreStrongAssign(&self->globalQueue_, (OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) cast_chk(self->pq_, [OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue class]));
  JreStrongAssignAndConsume(&self->perKeyQueues_, new_JavaUtilHashMap_init());
  self->numHits_ = numHits;
  self->maxNumPerKey_ = maxHitsPerKey;
}

void OrgApacheLuceneSearchDiversifiedTopDocsCollector_perKeyGroupRemoveWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_(OrgApacheLuceneSearchDiversifiedTopDocsCollector *self, OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *globalOverflow) {
  if (globalOverflow == nil) {
    return;
  }
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *q = [((id<JavaUtilMap>) nil_chk(self->perKeyQueues_)) getWithId:globalOverflow->key_];
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *perKeyLowest = [((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *) nil_chk(q)) pop];
  JreAssert((globalOverflow == perKeyLowest), (@"org/apache/lucene/search/DiversifiedTopDocsCollector.java:171 condition failed: assert (globalOverflow == perKeyLowest);"));
  if ([q size] == 0) {
    [((id<JavaUtilMap>) nil_chk(self->perKeyQueues_)) removeWithId:globalOverflow->key_];
    [((JavaUtilStack *) nil_chk(self->sparePerKeyQueues_)) pushWithId:q];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchDiversifiedTopDocsCollector)

@implementation OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue

- (instancetype)initWithInt:(jint)size {
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_initWithInt_(self, size);
  return self;
}

- (jboolean)lessThanWithId:(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *)hitA
                    withId:(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *)hitB {
  return OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_lessThanWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_withOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_(self, hitA, hitB);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "ScoreDocKeyQueue", NULL, 0x0, NULL, NULL },
    { "lessThanWithId:withId:", "lessThan", "Z", 0x14, NULL, "(Lorg/apache/lucene/search/DiversifiedTopDocsCollector$ScoreDocKey;Lorg/apache/lucene/search/DiversifiedTopDocsCollector$ScoreDocKey;)Z" },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.search.DiversifiedTopDocsCollector$ScoreDocKey;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue = { 2, "ScoreDocKeyQueue", "org.apache.lucene.search", "DiversifiedTopDocsCollector", 0x8, 2, methods, 0, NULL, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/util/PriorityQueue<Lorg/apache/lucene/search/DiversifiedTopDocsCollector$ScoreDocKey;>;" };
  return &_OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue;
}

@end

void OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_initWithInt_(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *self, jint size) {
  OrgApacheLuceneUtilPriorityQueue_initWithInt_(self, size);
}

OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *new_OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_initWithInt_(jint size) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue, initWithInt_, size)
}

OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *create_OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_initWithInt_(jint size) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue, initWithInt_, size)
}

jboolean OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue_lessThanWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_withOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue *self, OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *hitA, OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *hitB) {
  if (((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *) nil_chk(hitA))->score_ == ((OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *) nil_chk(hitB))->score_) return hitA->doc_ > hitB->doc_;
  else return hitA->score_ < hitB->score_;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKeyQueue)

@implementation OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey

- (instancetype)initWithInt:(jint)doc
                  withFloat:(jfloat)score {
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_initWithInt_withFloat_(self, doc, score);
  return self;
}

- (JavaLangLong *)getKey {
  return key_;
}

- (NSString *)description {
  return JreStrcat("$@$I$F", @"key:", key_, @" doc=", doc_, @" s=", score_);
}

- (void)dealloc {
  RELEASE_(key_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withFloat:", "ScoreDocKey", NULL, 0x4, NULL, NULL },
    { "getKey", NULL, "Ljava.lang.Long;", 0x1, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "key_", NULL, 0x0, "Ljava.lang.Long;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey = { 2, "ScoreDocKey", "org.apache.lucene.search", "DiversifiedTopDocsCollector", 0x9, 3, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey;
}

@end

void OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_initWithInt_withFloat_(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *self, jint doc, jfloat score) {
  OrgApacheLuceneSearchScoreDoc_initWithInt_withFloat_(self, doc, score);
}

OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *new_OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_initWithInt_withFloat_(jint doc, jfloat score) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey, initWithInt_withFloat_, doc, score)
}

OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey *create_OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_initWithInt_withFloat_(jint doc, jfloat score) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey, initWithInt_withFloat_, doc, score)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey)

@implementation OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
  JreStrongAssign(&self->scorer_, scorer);
}

- (void)collectWithInt:(jint)doc {
  jfloat score = [((OrgApacheLuceneSearchScorer *) nil_chk(scorer_)) score];
  JreAssert((!JavaLangFloat_isNaNWithFloat_(score)), (@"org/apache/lucene/search/DiversifiedTopDocsCollector.java:197 condition failed: assert !Float.isNaN(score);"));
  this$0_->totalHits_++;
  doc += val$base_;
  if (this$0_->spare_ == nil) {
    JreStrongAssignAndConsume(&this$0_->spare_, new_OrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey_initWithInt_withFloat_(doc, score));
  }
  else {
    this$0_->spare_->doc_ = doc;
    this$0_->spare_->score_ = score;
  }
  JreStrongAssign(&this$0_->spare_, [this$0_ insertWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_ScoreDocKey:this$0_->spare_ withInt:val$base_ withOrgApacheLuceneIndexNumericDocValues:val$keySource_]);
}

- (instancetype)initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector:(OrgApacheLuceneSearchDiversifiedTopDocsCollector *)outer$
                                                                 withInt:(jint)capture$0
                                withOrgApacheLuceneIndexNumericDocValues:(OrgApacheLuceneIndexNumericDocValues *)capture$1 {
  OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1_initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_(self, outer$, capture$0, capture$1);
  return self;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(scorer_);
  RELEASE_(val$keySource_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "setScorerWithOrgApacheLuceneSearchScorer:", "setScorer", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "collectWithInt:", "collect", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector:withInt:withOrgApacheLuceneIndexNumericDocValues:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.DiversifiedTopDocsCollector;", NULL, NULL, .constantValue.asLong = 0 },
    { "scorer_", NULL, 0x0, "Lorg.apache.lucene.search.Scorer;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$base_", NULL, 0x1012, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "val$keySource_", NULL, 0x1012, "Lorg.apache.lucene.index.NumericDocValues;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgApacheLuceneSearchDiversifiedTopDocsCollector", "getLeafCollectorWithOrgApacheLuceneIndexLeafReaderContext:" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1 = { 2, "", "org.apache.lucene.search", "DiversifiedTopDocsCollector", 0x8008, 3, methods, 4, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1;
}

@end

void OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1_initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1 *self, OrgApacheLuceneSearchDiversifiedTopDocsCollector *outer$, jint capture$0, OrgApacheLuceneIndexNumericDocValues *capture$1) {
  JreStrongAssign(&self->this$0_, outer$);
  self->val$base_ = capture$0;
  JreStrongAssign(&self->val$keySource_, capture$1);
  NSObject_init(self);
}

OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1 *new_OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1_initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_(OrgApacheLuceneSearchDiversifiedTopDocsCollector *outer$, jint capture$0, OrgApacheLuceneIndexNumericDocValues *capture$1) {
  J2OBJC_NEW_IMPL(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1, initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_, outer$, capture$0, capture$1)
}

OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1 *create_OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1_initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_(OrgApacheLuceneSearchDiversifiedTopDocsCollector *outer$, jint capture$0, OrgApacheLuceneIndexNumericDocValues *capture$1) {
  J2OBJC_CREATE_IMPL(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1, initWithOrgApacheLuceneSearchDiversifiedTopDocsCollector_withInt_withOrgApacheLuceneIndexNumericDocValues_, outer$, capture$0, capture$1)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchDiversifiedTopDocsCollector_$1)
