//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./sandbox/src/java/org/apache/lucene/search/GeoPointTermQueryConstantScoreWrapper.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "org/apache/lucene/index/LeafReader.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/index/PostingsEnum.h"
#include "org/apache/lucene/index/SortedNumericDocValues.h"
#include "org/apache/lucene/index/Terms.h"
#include "org/apache/lucene/index/TermsEnum.h"
#include "org/apache/lucene/search/BulkScorer.h"
#include "org/apache/lucene/search/ConstantScoreScorer.h"
#include "org/apache/lucene/search/ConstantScoreWeight.h"
#include "org/apache/lucene/search/DocIdSet.h"
#include "org/apache/lucene/search/DocIdSetIterator.h"
#include "org/apache/lucene/search/GeoPointTermQuery.h"
#include "org/apache/lucene/search/GeoPointTermQueryConstantScoreWrapper.h"
#include "org/apache/lucene/search/GeoPointTermsEnum.h"
#include "org/apache/lucene/search/IndexSearcher.h"
#include "org/apache/lucene/search/Query.h"
#include "org/apache/lucene/search/Scorer.h"
#include "org/apache/lucene/search/Weight.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/DocIdSetBuilder.h"
#include "org/apache/lucene/util/GeoUtils.h"

@interface OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 : OrgApacheLuceneSearchConstantScoreWeight {
 @public
  OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *this$0_;
}

- (OrgApacheLuceneSearchDocIdSet *)getDocIDsWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context;

- (OrgApacheLuceneSearchScorer *)scorerWithOrgApacheLuceneSearchDocIdSet:(OrgApacheLuceneSearchDocIdSet *)set;

- (OrgApacheLuceneSearchBulkScorer *)bulkScorerWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context;

- (OrgApacheLuceneSearchScorer *)scorerWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context;

- (instancetype)initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper:(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *)outer$
                                                    withOrgApacheLuceneSearchQuery:(OrgApacheLuceneSearchQuery *)arg$0;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1, this$0_, OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *)

__attribute__((unused)) static OrgApacheLuceneSearchDocIdSet *OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_getDocIDsWithOrgApacheLuceneIndexLeafReaderContext_(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 *self, OrgApacheLuceneIndexLeafReaderContext *context);

__attribute__((unused)) static OrgApacheLuceneSearchScorer *OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_scorerWithOrgApacheLuceneSearchDocIdSet_(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 *self, OrgApacheLuceneSearchDocIdSet *set);

__attribute__((unused)) static void OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 *self, OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *outer$, OrgApacheLuceneSearchQuery *arg$0);

__attribute__((unused)) static OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 *new_OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *outer$, OrgApacheLuceneSearchQuery *arg$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1)

@implementation OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper

- (instancetype)initWithOrgApacheLuceneSearchGeoPointTermQuery:(OrgApacheLuceneSearchGeoPointTermQuery *)query {
  OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_initWithOrgApacheLuceneSearchGeoPointTermQuery_(self, query);
  return self;
}

- (NSString *)toStringWithNSString:(NSString *)field {
  return [((OrgApacheLuceneSearchGeoPointTermQuery *) nil_chk(query_)) description];
}

- (jboolean)isEqual:(id)o {
  if ([super isEqual:o] == false) {
    return false;
  }
  OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *that = (OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *) check_class_cast(o, [OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper class]);
  return [((OrgApacheLuceneSearchGeoPointTermQuery *) nil_chk(self->query_)) isEqual:((OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *) nil_chk(that))->query_] && [self getBoost] == [that getBoost];
}

- (NSUInteger)hash {
  return 31 * ((jint) [super hash]) + ((jint) [((OrgApacheLuceneSearchGeoPointTermQuery *) nil_chk(query_)) hash]);
}

- (OrgApacheLuceneSearchWeight *)createWeightWithOrgApacheLuceneSearchIndexSearcher:(OrgApacheLuceneSearchIndexSearcher *)searcher
                                                                        withBoolean:(jboolean)needsScores {
  return [new_OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_withOrgApacheLuceneSearchQuery_(self, self) autorelease];
}

- (void)dealloc {
  RELEASE_(query_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchGeoPointTermQuery:", "GeoPointTermQueryConstantScoreWrapper", NULL, 0x4, NULL, "(TQ;)V" },
    { "toStringWithNSString:", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "isEqual:", "equals", "Z", 0x11, NULL, NULL },
    { "hash", "hashCode", "I", 0x11, NULL, NULL },
    { "createWeightWithOrgApacheLuceneSearchIndexSearcher:withBoolean:", "createWeight", "Lorg.apache.lucene.search.Weight;", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "query_", NULL, 0x14, "TQ;", NULL, "TQ;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper = { 2, "GeoPointTermQueryConstantScoreWrapper", "org.apache.lucene.search", NULL, 0x10, 5, methods, 1, fields, 0, NULL, 0, NULL, NULL, "<Q:Lorg/apache/lucene/search/GeoPointTermQuery;>Lorg/apache/lucene/search/Query;" };
  return &_OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper;
}

@end

void OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_initWithOrgApacheLuceneSearchGeoPointTermQuery_(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *self, OrgApacheLuceneSearchGeoPointTermQuery *query) {
  OrgApacheLuceneSearchQuery_init(self);
  JreStrongAssign(&self->query_, query);
}

OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *new_OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_initWithOrgApacheLuceneSearchGeoPointTermQuery_(OrgApacheLuceneSearchGeoPointTermQuery *query) {
  OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *self = [OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper alloc];
  OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_initWithOrgApacheLuceneSearchGeoPointTermQuery_(self, query);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper)

@implementation OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1

- (OrgApacheLuceneSearchDocIdSet *)getDocIDsWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  return OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_getDocIDsWithOrgApacheLuceneIndexLeafReaderContext_(self, context);
}

- (OrgApacheLuceneSearchScorer *)scorerWithOrgApacheLuceneSearchDocIdSet:(OrgApacheLuceneSearchDocIdSet *)set {
  return OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_scorerWithOrgApacheLuceneSearchDocIdSet_(self, set);
}

- (OrgApacheLuceneSearchBulkScorer *)bulkScorerWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  OrgApacheLuceneSearchScorer *scorer = OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_scorerWithOrgApacheLuceneSearchDocIdSet_(self, OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_getDocIDsWithOrgApacheLuceneIndexLeafReaderContext_(self, context));
  if (scorer == nil) {
    return nil;
  }
  return [new_OrgApacheLuceneSearchWeight_DefaultBulkScorer_initWithOrgApacheLuceneSearchScorer_(scorer) autorelease];
}

- (OrgApacheLuceneSearchScorer *)scorerWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  return OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_scorerWithOrgApacheLuceneSearchDocIdSet_(self, OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_getDocIDsWithOrgApacheLuceneIndexLeafReaderContext_(self, context));
}

- (instancetype)initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper:(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *)outer$
                                                    withOrgApacheLuceneSearchQuery:(OrgApacheLuceneSearchQuery *)arg$0 {
  OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_withOrgApacheLuceneSearchQuery_(self, outer$, arg$0);
  return self;
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "getDocIDsWithOrgApacheLuceneIndexLeafReaderContext:", "getDocIDs", "Lorg.apache.lucene.search.DocIdSet;", 0x2, "Ljava.io.IOException;", NULL },
    { "scorerWithOrgApacheLuceneSearchDocIdSet:", "scorer", "Lorg.apache.lucene.search.Scorer;", 0x2, "Ljava.io.IOException;", NULL },
    { "bulkScorerWithOrgApacheLuceneIndexLeafReaderContext:", "bulkScorer", "Lorg.apache.lucene.search.BulkScorer;", 0x1, "Ljava.io.IOException;", NULL },
    { "scorerWithOrgApacheLuceneIndexLeafReaderContext:", "scorer", "Lorg.apache.lucene.search.Scorer;", 0x1, "Ljava.io.IOException;", NULL },
    { "initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper:withOrgApacheLuceneSearchQuery:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.GeoPointTermQueryConstantScoreWrapper;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper", "createWeightWithOrgApacheLuceneSearchIndexSearcher:withBoolean:" };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 = { 2, "", "org.apache.lucene.search", "GeoPointTermQueryConstantScoreWrapper", 0x8008, 5, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1;
}

@end

OrgApacheLuceneSearchDocIdSet *OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_getDocIDsWithOrgApacheLuceneIndexLeafReaderContext_(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 *self, OrgApacheLuceneIndexLeafReaderContext *context) {
  OrgApacheLuceneIndexTerms *terms = [((OrgApacheLuceneIndexLeafReader *) nil_chk([((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context)) reader])) termsWithNSString:((OrgApacheLuceneSearchGeoPointTermQuery *) nil_chk(self->this$0_->query_))->field_];
  if (terms == nil) {
    return JreLoadStatic(OrgApacheLuceneSearchDocIdSet, EMPTY_);
  }
  OrgApacheLuceneSearchGeoPointTermsEnum *termsEnum = (OrgApacheLuceneSearchGeoPointTermsEnum *) check_class_cast(([self->this$0_->query_ getTermsEnumWithOrgApacheLuceneIndexTerms:terms]), [OrgApacheLuceneSearchGeoPointTermsEnum class]);
  JreAssert((termsEnum != nil), (@"org/apache/lucene/search/GeoPointTermQueryConstantScoreWrapper.java:73 condition failed: assert termsEnum != null;"));
  OrgApacheLuceneIndexLeafReader *reader = [context reader];
  OrgApacheLuceneUtilDocIdSetBuilder *builder = [new_OrgApacheLuceneUtilDocIdSetBuilder_initWithInt_([((OrgApacheLuceneIndexLeafReader *) nil_chk(reader)) maxDoc]) autorelease];
  OrgApacheLuceneIndexPostingsEnum *docs = nil;
  OrgApacheLuceneIndexSortedNumericDocValues *sdv = [reader getSortedNumericDocValuesWithNSString:self->this$0_->query_->field_];
  while ([((OrgApacheLuceneSearchGeoPointTermsEnum *) nil_chk(termsEnum)) next] != nil) {
    docs = [termsEnum postingsWithOrgApacheLuceneIndexPostingsEnum:docs withInt:OrgApacheLuceneIndexPostingsEnum_NONE];
    if ([termsEnum boundaryTerm]) {
      jint docId = [((OrgApacheLuceneIndexPostingsEnum *) nil_chk(docs)) nextDoc];
      do {
        [((OrgApacheLuceneIndexSortedNumericDocValues *) nil_chk(sdv)) setDocumentWithInt:docId];
        for (jint i = 0; i < [sdv count]; ++i) {
          jlong hash_ = [sdv valueAtWithInt:i];
          jdouble lon = OrgApacheLuceneUtilGeoUtils_mortonUnhashLonWithLong_(hash_);
          jdouble lat = OrgApacheLuceneUtilGeoUtils_mortonUnhashLatWithLong_(hash_);
          if ([termsEnum postFilterWithDouble:lon withDouble:lat]) {
            [builder addWithInt:docId];
          }
        }
      }
      while ((docId = [docs nextDoc]) != OrgApacheLuceneSearchDocIdSetIterator_NO_MORE_DOCS);
    }
    else {
      [builder addWithOrgApacheLuceneSearchDocIdSetIterator:docs];
    }
  }
  return [builder build];
}

OrgApacheLuceneSearchScorer *OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_scorerWithOrgApacheLuceneSearchDocIdSet_(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 *self, OrgApacheLuceneSearchDocIdSet *set) {
  if (set == nil) {
    return nil;
  }
  OrgApacheLuceneSearchDocIdSetIterator *disi = [((OrgApacheLuceneSearchDocIdSet *) nil_chk(set)) iterator];
  if (disi == nil) {
    return nil;
  }
  return [new_OrgApacheLuceneSearchConstantScoreScorer_initWithOrgApacheLuceneSearchWeight_withFloat_withOrgApacheLuceneSearchDocIdSetIterator_(self, [self score], disi) autorelease];
}

void OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 *self, OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *outer$, OrgApacheLuceneSearchQuery *arg$0) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchConstantScoreWeight_initWithOrgApacheLuceneSearchQuery_(self, arg$0);
}

OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 *new_OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_withOrgApacheLuceneSearchQuery_(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper *outer$, OrgApacheLuceneSearchQuery *arg$0) {
  OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 *self = [OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1 alloc];
  OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1_initWithOrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_withOrgApacheLuceneSearchQuery_(self, outer$, arg$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGeoPointTermQueryConstantScoreWrapper_$1)
