//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./suggest/src/java/org/apache/lucene/search/suggest/document/CompletionTokenStream.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/Closeable.h"
#include "java/io/IOException.h"
#include "java/lang/CharSequence.h"
#include "org/apache/lucene/analysis/TokenStream.h"
#include "org/apache/lucene/analysis/TokenStreamToAutomaton.h"
#include "org/apache/lucene/analysis/tokenattributes/CharTermAttribute.h"
#include "org/apache/lucene/analysis/tokenattributes/PayloadAttribute.h"
#include "org/apache/lucene/analysis/tokenattributes/TermToBytesRefAttribute.h"
#include "org/apache/lucene/search/suggest/document/CompletionAnalyzer.h"
#include "org/apache/lucene/search/suggest/document/CompletionTokenStream.h"
#include "org/apache/lucene/util/AttributeImpl.h"
#include "org/apache/lucene/util/AttributeReflector.h"
#include "org/apache/lucene/util/AttributeSource.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/BytesRefBuilder.h"
#include "org/apache/lucene/util/CharsRef.h"
#include "org/apache/lucene/util/CharsRefBuilder.h"
#include "org/apache/lucene/util/IOUtils.h"
#include "org/apache/lucene/util/IntsRef.h"
#include "org/apache/lucene/util/automaton/Automaton.h"
#include "org/apache/lucene/util/automaton/FiniteStringsIterator.h"
#include "org/apache/lucene/util/automaton/LimitedFiniteStringsIterator.h"
#include "org/apache/lucene/util/automaton/Operations.h"
#include "org/apache/lucene/util/automaton/Transition.h"
#include "org/apache/lucene/util/fst/Util.h"

@interface OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream () {
 @public
  id<OrgApacheLuceneAnalysisTokenattributesPayloadAttribute> payloadAttr_;
  id<OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute> bytesAtt_;
  OrgApacheLuceneAnalysisTokenStream *input_;
  OrgApacheLuceneUtilAutomatonFiniteStringsIterator *finiteStrings_;
  OrgApacheLuceneUtilBytesRef *payload_;
  id<OrgApacheLuceneAnalysisTokenattributesCharTermAttribute> charTermAttribute_;
}

+ (OrgApacheLuceneUtilAutomatonAutomaton *)replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton:(OrgApacheLuceneUtilAutomatonAutomaton *)a
                                                                                   withBoolean:(jboolean)preserveSep
                                                                                       withInt:(jint)sepLabel;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, payloadAttr_, id<OrgApacheLuceneAnalysisTokenattributesPayloadAttribute>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, bytesAtt_, id<OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, input_, OrgApacheLuceneAnalysisTokenStream *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, finiteStrings_, OrgApacheLuceneUtilAutomatonFiniteStringsIterator *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, payload_, OrgApacheLuceneUtilBytesRef *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream, charTermAttribute_, id<OrgApacheLuceneAnalysisTokenattributesCharTermAttribute>)

__attribute__((unused)) static OrgApacheLuceneUtilAutomatonAutomaton *OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton_withBoolean_withInt_(OrgApacheLuceneUtilAutomatonAutomaton *a, jboolean preserveSep, jint sepLabel);

@interface OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton : OrgApacheLuceneAnalysisTokenStreamToAutomaton {
 @public
  OrgApacheLuceneUtilBytesRefBuilder *spare_;
  jchar sepLabel_;
}

- (instancetype)initWithChar:(jchar)sepLabel;

- (OrgApacheLuceneUtilBytesRef *)changeTokenWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)inArg;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton)

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton, spare_, OrgApacheLuceneUtilBytesRefBuilder *)

__attribute__((unused)) static void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *self, jchar sepLabel);

__attribute__((unused)) static OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(jchar sepLabel) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton)

@interface OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute : NSObject

@end

@interface OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl () {
 @public
  OrgApacheLuceneUtilBytesRefBuilder *bytes_;
  OrgApacheLuceneUtilCharsRefBuilder *charsRef_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl, bytes_, OrgApacheLuceneUtilBytesRefBuilder *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl, charsRef_, OrgApacheLuceneUtilCharsRefBuilder *)

@implementation OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream

- (instancetype)initWithOrgApacheLuceneAnalysisTokenStream:(OrgApacheLuceneAnalysisTokenStream *)input {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_(self, input);
  return self;
}

- (instancetype)initWithOrgApacheLuceneAnalysisTokenStream:(OrgApacheLuceneAnalysisTokenStream *)input
                                               withBoolean:(jboolean)preserveSep
                                               withBoolean:(jboolean)preservePositionIncrements
                                                   withInt:(jint)maxGraphExpansions {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(self, input, preserveSep, preservePositionIncrements, maxGraphExpansions);
  return self;
}

- (void)setPayloadWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)payload {
  JreStrongAssign(&self->payload_, payload);
}

- (jboolean)incrementToken {
  [self clearAttributes];
  if (finiteStrings_ == nil) {
    OrgApacheLuceneUtilAutomatonAutomaton *automaton = [self toAutomaton];
    JreStrongAssignAndConsume(&finiteStrings_, new_OrgApacheLuceneUtilAutomatonLimitedFiniteStringsIterator_initWithOrgApacheLuceneUtilAutomatonAutomaton_withInt_(automaton, maxGraphExpansions_));
  }
  OrgApacheLuceneUtilIntsRef *string = [((OrgApacheLuceneUtilAutomatonFiniteStringsIterator *) nil_chk(finiteStrings_)) next];
  if (string == nil) {
    return NO;
  }
  OrgApacheLuceneUtilFstUtil_toBytesRefWithOrgApacheLuceneUtilIntsRef_withOrgApacheLuceneUtilBytesRefBuilder_(string, [((id<OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute>) nil_chk(bytesAtt_)) builder]);
  if (charTermAttribute_ != nil) {
    [charTermAttribute_ setLengthWithInt:0];
    [charTermAttribute_ appendWithJavaLangCharSequence:[bytesAtt_ toUTF16]];
  }
  if (payload_ != nil) {
    [((id<OrgApacheLuceneAnalysisTokenattributesPayloadAttribute>) nil_chk(payloadAttr_)) setPayloadWithOrgApacheLuceneUtilBytesRef:self->payload_];
  }
  return YES;
}

- (void)end {
  [super end];
  if (finiteStrings_ == nil) {
    [((OrgApacheLuceneAnalysisTokenStream *) nil_chk(input_)) end];
  }
}

- (void)close {
  if (finiteStrings_ == nil) {
    [((OrgApacheLuceneAnalysisTokenStream *) nil_chk(input_)) close];
  }
}

- (void)reset {
  [super reset];
  if ([self hasAttributeWithIOSClass:OrgApacheLuceneAnalysisTokenattributesCharTermAttribute_class_()]) {
    JreStrongAssign(&charTermAttribute_, [self getAttributeWithIOSClass:OrgApacheLuceneAnalysisTokenattributesCharTermAttribute_class_()]);
  }
  JreStrongAssign(&finiteStrings_, nil);
}

- (OrgApacheLuceneUtilAutomatonAutomaton *)toAutomaton {
  return [self toAutomatonWithBoolean:NO];
}

- (OrgApacheLuceneUtilAutomatonAutomaton *)toAutomatonWithBoolean:(jboolean)unicodeAware {
  OrgApacheLuceneUtilAutomatonAutomaton *automaton = nil;
  @try {
    OrgApacheLuceneAnalysisTokenStreamToAutomaton *tsta;
    if (preserveSep_) {
      tsta = [new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_((jchar) OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_SEP_LABEL) autorelease];
    }
    else {
      tsta = [new_OrgApacheLuceneAnalysisTokenStreamToAutomaton_init() autorelease];
    }
    [((OrgApacheLuceneAnalysisTokenStreamToAutomaton *) nil_chk(tsta)) setPreservePositionIncrementsWithBoolean:preservePositionIncrements_];
    [tsta setUnicodeArcsWithBoolean:unicodeAware];
    automaton = [tsta toAutomatonWithOrgApacheLuceneAnalysisTokenStream:input_];
  }
  @finally {
    OrgApacheLuceneUtilIOUtils_closeWhileHandlingExceptionWithJavaIoCloseableArray_([IOSObjectArray arrayWithObjects:(id[]){ input_ } count:1 type:JavaIoCloseable_class_()]);
  }
  automaton = OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton_withBoolean_withInt_(automaton, preserveSep_, OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_SEP_LABEL);
  return OrgApacheLuceneUtilAutomatonOperations_determinizeWithOrgApacheLuceneUtilAutomatonAutomaton_withInt_(automaton, maxGraphExpansions_);
}

+ (OrgApacheLuceneUtilAutomatonAutomaton *)replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton:(OrgApacheLuceneUtilAutomatonAutomaton *)a
                                                                                   withBoolean:(jboolean)preserveSep
                                                                                       withInt:(jint)sepLabel {
  return OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton_withBoolean_withInt_(a, preserveSep, sepLabel);
}

- (void)dealloc {
  RELEASE_(payloadAttr_);
  RELEASE_(bytesAtt_);
  RELEASE_(input_);
  RELEASE_(finiteStrings_);
  RELEASE_(payload_);
  RELEASE_(charTermAttribute_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneAnalysisTokenStream:", "CompletionTokenStream", NULL, 0x0, NULL, NULL },
    { "initWithOrgApacheLuceneAnalysisTokenStream:withBoolean:withBoolean:withInt:", "CompletionTokenStream", NULL, 0x0, NULL, NULL },
    { "setPayloadWithOrgApacheLuceneUtilBytesRef:", "setPayload", "V", 0x1, NULL, NULL },
    { "incrementToken", NULL, "Z", 0x1, "Ljava.io.IOException;", NULL },
    { "end", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "close", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "reset", NULL, "V", 0x1, "Ljava.io.IOException;", NULL },
    { "toAutomaton", NULL, "Lorg.apache.lucene.util.automaton.Automaton;", 0x1, "Ljava.io.IOException;", NULL },
    { "toAutomatonWithBoolean:", "toAutomaton", "Lorg.apache.lucene.util.automaton.Automaton;", 0x1, "Ljava.io.IOException;", NULL },
    { "replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton:withBoolean:withInt:", "replaceSep", "Lorg.apache.lucene.util.automaton.Automaton;", 0xa, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "payloadAttr_", NULL, 0x12, "Lorg.apache.lucene.analysis.tokenattributes.PayloadAttribute;", NULL, NULL, .constantValue.asLong = 0 },
    { "bytesAtt_", NULL, 0x12, "Lorg.apache.lucene.search.suggest.document.CompletionTokenStream$BytesRefBuilderTermAttribute;", NULL, NULL, .constantValue.asLong = 0 },
    { "input_", NULL, 0x12, "Lorg.apache.lucene.analysis.TokenStream;", NULL, NULL, .constantValue.asLong = 0 },
    { "preserveSep_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "preservePositionIncrements_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "maxGraphExpansions_", NULL, 0x10, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "finiteStrings_", NULL, 0x2, "Lorg.apache.lucene.util.automaton.FiniteStringsIterator;", NULL, NULL, .constantValue.asLong = 0 },
    { "payload_", NULL, 0x2, "Lorg.apache.lucene.util.BytesRef;", NULL, NULL, .constantValue.asLong = 0 },
    { "charTermAttribute_", NULL, 0x2, "Lorg.apache.lucene.analysis.tokenattributes.CharTermAttribute;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.suggest.document.CompletionTokenStream$EscapingTokenStreamToAutomaton;", "Lorg.apache.lucene.search.suggest.document.CompletionTokenStream$BytesRefBuilderTermAttribute;", "Lorg.apache.lucene.search.suggest.document.CompletionTokenStream$BytesRefBuilderTermAttributeImpl;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream = { 2, "CompletionTokenStream", "org.apache.lucene.search.suggest.document", NULL, 0x11, 10, methods, 9, fields, 0, NULL, 3, inner_classes, NULL, NULL };
  return &_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream;
}

@end

void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *self, OrgApacheLuceneAnalysisTokenStream *input) {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(self, input, OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_DEFAULT_PRESERVE_SEP, OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_DEFAULT_PRESERVE_POSITION_INCREMENTS, OrgApacheLuceneSearchSuggestDocumentCompletionAnalyzer_DEFAULT_MAX_GRAPH_EXPANSIONS);
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_(OrgApacheLuceneAnalysisTokenStream *input) {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *self = [OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream alloc];
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_(self, input);
  return self;
}

void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *self, OrgApacheLuceneAnalysisTokenStream *input, jboolean preserveSep, jboolean preservePositionIncrements, jint maxGraphExpansions) {
  OrgApacheLuceneAnalysisTokenStream_init(self);
  JreStrongAssign(&self->payloadAttr_, [self addAttributeWithIOSClass:OrgApacheLuceneAnalysisTokenattributesPayloadAttribute_class_()]);
  JreStrongAssign(&self->bytesAtt_, [self addAttributeWithIOSClass:OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute_class_()]);
  JreStrongAssign(&self->input_, input);
  self->preserveSep_ = preserveSep;
  self->preservePositionIncrements_ = preservePositionIncrements;
  self->maxGraphExpansions_ = maxGraphExpansions;
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(OrgApacheLuceneAnalysisTokenStream *input, jboolean preserveSep, jboolean preservePositionIncrements, jint maxGraphExpansions) {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream *self = [OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream alloc];
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initWithOrgApacheLuceneAnalysisTokenStream_withBoolean_withBoolean_withInt_(self, input, preserveSep, preservePositionIncrements, maxGraphExpansions);
  return self;
}

OrgApacheLuceneUtilAutomatonAutomaton *OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_replaceSepWithOrgApacheLuceneUtilAutomatonAutomaton_withBoolean_withInt_(OrgApacheLuceneUtilAutomatonAutomaton *a, jboolean preserveSep, jint sepLabel) {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_initialize();
  OrgApacheLuceneUtilAutomatonAutomaton *result = [new_OrgApacheLuceneUtilAutomatonAutomaton_init() autorelease];
  jint numStates = [((OrgApacheLuceneUtilAutomatonAutomaton *) nil_chk(a)) getNumStates];
  for (jint s = 0; s < numStates; s++) {
    [result createState];
    [result setAcceptWithInt:s withBoolean:[a isAcceptWithInt:s]];
  }
  OrgApacheLuceneUtilAutomatonTransition *t = [new_OrgApacheLuceneUtilAutomatonTransition_init() autorelease];
  IOSIntArray *topoSortStates = OrgApacheLuceneUtilAutomatonOperations_topoSortStatesWithOrgApacheLuceneUtilAutomatonAutomaton_(a);
  for (jint i = 0; i < ((IOSIntArray *) nil_chk(topoSortStates))->size_; i++) {
    jint state = IOSIntArray_Get(topoSortStates, topoSortStates->size_ - 1 - i);
    jint count = [a initTransitionWithInt:state withOrgApacheLuceneUtilAutomatonTransition:t];
    for (jint j = 0; j < count; j++) {
      [a getNextTransitionWithOrgApacheLuceneUtilAutomatonTransition:t];
      if (t->min_ == OrgApacheLuceneAnalysisTokenStreamToAutomaton_POS_SEP) {
        JreAssert((t->max_ == OrgApacheLuceneAnalysisTokenStreamToAutomaton_POS_SEP), (@"org/apache/lucene/search/suggest/document/CompletionTokenStream.java:242 condition failed: assert t.max == TokenStreamToAutomaton.POS_SEP;"));
        if (preserveSep) {
          [result addTransitionWithInt:state withInt:t->dest_ withInt:sepLabel];
        }
        else {
          [result addEpsilonWithInt:state withInt:t->dest_];
        }
      }
      else if (t->min_ == OrgApacheLuceneAnalysisTokenStreamToAutomaton_HOLE) {
        JreAssert((t->max_ == OrgApacheLuceneAnalysisTokenStreamToAutomaton_HOLE), (@"org/apache/lucene/search/suggest/document/CompletionTokenStream.java:250 condition failed: assert t.max == TokenStreamToAutomaton.HOLE;"));
        [result addEpsilonWithInt:state withInt:t->dest_];
      }
      else {
        [result addTransitionWithInt:state withInt:t->dest_ withInt:t->min_ withInt:t->max_];
      }
    }
  }
  [result finishState];
  return result;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream)

@implementation OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton

- (instancetype)initWithChar:(jchar)sepLabel {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(self, sepLabel);
  return self;
}

- (OrgApacheLuceneUtilBytesRef *)changeTokenWithOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)inArg {
  jint upto = 0;
  for (jint i = 0; i < ((OrgApacheLuceneUtilBytesRef *) nil_chk(inArg))->length_; i++) {
    jbyte b = IOSByteArray_Get(nil_chk(inArg->bytes_), inArg->offset_ + i);
    if (b == (jbyte) sepLabel_) {
      [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(spare_)) growWithInt:upto + 2];
      [spare_ setByteAtWithInt:upto++ withByte:(jbyte) sepLabel_];
      [spare_ setByteAtWithInt:upto++ withByte:b];
    }
    else {
      [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(spare_)) growWithInt:upto + 1];
      [spare_ setByteAtWithInt:upto++ withByte:b];
    }
  }
  [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(spare_)) setLengthWithInt:upto];
  return [spare_ get];
}

- (void)dealloc {
  RELEASE_(spare_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithChar:", "EscapingTokenStreamToAutomaton", NULL, 0x1, NULL, NULL },
    { "changeTokenWithOrgApacheLuceneUtilBytesRef:", "changeToken", "Lorg.apache.lucene.util.BytesRef;", 0x4, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "spare_", NULL, 0x10, "Lorg.apache.lucene.util.BytesRefBuilder;", NULL, NULL, .constantValue.asLong = 0 },
    { "sepLabel_", NULL, 0x2, "C", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton = { 2, "EscapingTokenStreamToAutomaton", "org.apache.lucene.search.suggest.document", "CompletionTokenStream", 0x1a, 2, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton;
}

@end

void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *self, jchar sepLabel) {
  OrgApacheLuceneAnalysisTokenStreamToAutomaton_init(self);
  JreStrongAssignAndConsume(&self->spare_, new_OrgApacheLuceneUtilBytesRefBuilder_init());
  self->sepLabel_ = sepLabel;
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(jchar sepLabel) {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton *self = [OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton alloc];
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton_initWithChar_(self, sepLabel);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_EscapingTokenStreamToAutomaton)

@implementation OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "builder", NULL, "Lorg.apache.lucene.util.BytesRefBuilder;", 0x401, NULL, NULL },
    { "toUTF16", NULL, "Ljava.lang.CharSequence;", 0x401, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute = { 2, "BytesRefBuilderTermAttribute", "org.apache.lucene.search.suggest.document", "CompletionTokenStream", 0x60a, 2, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute;
}

@end

J2OBJC_INTERFACE_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttribute)

@implementation OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl

- (instancetype)init {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init(self);
  return self;
}

- (OrgApacheLuceneUtilBytesRefBuilder *)builder {
  return bytes_;
}

- (OrgApacheLuceneUtilBytesRef *)getBytesRef {
  return [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(bytes_)) get];
}

- (void)clear {
  [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(bytes_)) clear];
}

- (void)copyToWithOrgApacheLuceneUtilAttributeImpl:(OrgApacheLuceneUtilAttributeImpl *)target {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *other = (OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *) check_class_cast(target, [OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl class]);
  [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(((OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *) nil_chk(other))->bytes_)) copyBytesWithOrgApacheLuceneUtilBytesRefBuilder:bytes_];
}

- (OrgApacheLuceneUtilAttributeImpl *)clone {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *other = [new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init() autorelease];
  [self copyToWithOrgApacheLuceneUtilAttributeImpl:other];
  return other;
}

- (void)reflectWithWithOrgApacheLuceneUtilAttributeReflector:(id<OrgApacheLuceneUtilAttributeReflector>)reflector {
  [((id<OrgApacheLuceneUtilAttributeReflector>) nil_chk(reflector)) reflectWithIOSClass:OrgApacheLuceneAnalysisTokenattributesTermToBytesRefAttribute_class_() withNSString:@"bytes" withId:[self getBytesRef]];
}

- (id<JavaLangCharSequence>)toUTF16 {
  if (charsRef_ == nil) {
    JreStrongAssignAndConsume(&charsRef_, new_OrgApacheLuceneUtilCharsRefBuilder_init());
  }
  [((OrgApacheLuceneUtilCharsRefBuilder *) nil_chk(charsRef_)) copyUTF8BytesWithOrgApacheLuceneUtilBytesRef:[self getBytesRef]];
  return [charsRef_ get];
}

- (void)dealloc {
  RELEASE_(bytes_);
  RELEASE_(charsRef_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "BytesRefBuilderTermAttributeImpl", NULL, 0x1, NULL, NULL },
    { "builder", NULL, "Lorg.apache.lucene.util.BytesRefBuilder;", 0x1, NULL, NULL },
    { "getBytesRef", NULL, "Lorg.apache.lucene.util.BytesRef;", 0x1, NULL, NULL },
    { "clear", NULL, "V", 0x1, NULL, NULL },
    { "copyToWithOrgApacheLuceneUtilAttributeImpl:", "copyTo", "V", 0x1, NULL, NULL },
    { "clone", NULL, "Lorg.apache.lucene.util.AttributeImpl;", 0x1, NULL, NULL },
    { "reflectWithWithOrgApacheLuceneUtilAttributeReflector:", "reflectWith", "V", 0x1, NULL, NULL },
    { "toUTF16", NULL, "Ljava.lang.CharSequence;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "bytes_", NULL, 0x12, "Lorg.apache.lucene.util.BytesRefBuilder;", NULL, NULL, .constantValue.asLong = 0 },
    { "charsRef_", NULL, 0x82, "Lorg.apache.lucene.util.CharsRefBuilder;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl = { 2, "BytesRefBuilderTermAttributeImpl", "org.apache.lucene.search.suggest.document", "CompletionTokenStream", 0x19, 8, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl;
}

@end

void OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *self) {
  OrgApacheLuceneUtilAttributeImpl_init(self);
  JreStrongAssignAndConsume(&self->bytes_, new_OrgApacheLuceneUtilBytesRefBuilder_init());
}

OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *new_OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init() {
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl *self = [OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl alloc];
  OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchSuggestDocumentCompletionTokenStream_BytesRefBuilderTermAttributeImpl)
