//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./grouping/src/java/org/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "org/apache/lucene/index/DocValues.h"
#include "org/apache/lucene/index/LeafReader.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/index/SortedDocValues.h"
#include "org/apache/lucene/search/FieldComparator.h"
#include "org/apache/lucene/search/LeafFieldComparator.h"
#include "org/apache/lucene/search/Scorer.h"
#include "org/apache/lucene/search/Sort.h"
#include "org/apache/lucene/search/SortField.h"
#include "org/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector.h"
#include "org/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector.h"
#include "org/apache/lucene/util/BytesRef.h"
#include "org/apache/lucene/util/BytesRefBuilder.h"
#include "org/apache/lucene/util/SentinelIntSet.h"

#define OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_DEFAULT_INITIAL_SIZE 128

@interface OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector ()

+ (jboolean)needGeneralImplWithOrgApacheLuceneSearchSortField:(OrgApacheLuceneSearchSortField *)sortField;

@end

J2OBJC_STATIC_FIELD_GETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector, DEFAULT_INITIAL_SIZE, jint)

__attribute__((unused)) static jboolean OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_needGeneralImplWithOrgApacheLuceneSearchSortField_(OrgApacheLuceneSearchSortField *sortField);

@interface OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector () {
 @public
  OrgApacheLuceneSearchSort *sortWithinGroup_;
  id<JavaUtilMap> groups_;
  OrgApacheLuceneSearchScorer *scorer_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector, sortWithinGroup_, OrgApacheLuceneSearchSort *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector, groups_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector, scorer_, OrgApacheLuceneSearchScorer *)

@interface OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead () {
 @public
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *this$0_;
}

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *)outer$
                                                                                  withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)groupValue
                                                                                    withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sort
                                                                                                          withInt:(jint)doc;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead, this$0_, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *)

__attribute__((unused)) static void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, OrgApacheLuceneUtilBytesRef *groupValue, OrgApacheLuceneSearchSort *sort, jint doc);

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, OrgApacheLuceneUtilBytesRef *groupValue, OrgApacheLuceneSearchSort *sort, jint doc) NS_RETURNS_RETAINED;

@interface OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector () {
 @public
  OrgApacheLuceneUtilSentinelIntSet *ordSet_;
  id<JavaUtilList> collectedGroups_;
  IOSObjectArray *fields_;
  IOSObjectArray *sortsIndex_;
  OrgApacheLuceneSearchScorer *scorer_;
  IOSObjectArray *segmentGroupHeads_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, ordSet_, OrgApacheLuceneUtilSentinelIntSet *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, collectedGroups_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, fields_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, sortsIndex_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, scorer_, OrgApacheLuceneSearchScorer *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector, segmentGroupHeads_, IOSObjectArray *)

@interface OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead () {
 @public
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *this$0_;
}

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *)outer$
                                                                                                           withInt:(jint)doc
                                                                                   withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)groupValue;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead, this$0_, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *)

__attribute__((unused)) static void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue);

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue) NS_RETURNS_RETAINED;

@interface OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector () {
 @public
  OrgApacheLuceneUtilSentinelIntSet *ordSet_;
  id<JavaUtilList> collectedGroups_;
  IOSObjectArray *fields_;
  IOSObjectArray *sortsIndex_;
  IOSObjectArray *segmentGroupHeads_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, ordSet_, OrgApacheLuceneUtilSentinelIntSet *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, collectedGroups_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, fields_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, sortsIndex_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector, segmentGroupHeads_, IOSObjectArray *)

@interface OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead () {
 @public
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *this$0_;
}

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *)outer$
                                                                                                      withInt:(jint)doc
                                                                              withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)groupValue;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead, this$0_, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *)

__attribute__((unused)) static void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue);

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue) NS_RETURNS_RETAINED;

@interface OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector () {
 @public
  OrgApacheLuceneUtilSentinelIntSet *ordSet_;
  id<JavaUtilList> collectedGroups_;
  IOSObjectArray *fields_;
  OrgApacheLuceneSearchScorer *scorer_;
  IOSObjectArray *segmentGroupHeads_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, ordSet_, OrgApacheLuceneUtilSentinelIntSet *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, collectedGroups_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, fields_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, scorer_, OrgApacheLuceneSearchScorer *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector, segmentGroupHeads_, IOSObjectArray *)

@interface OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead () {
 @public
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *this$0_;
}

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *)outer$
                                                                                                        withInt:(jint)doc
                                                                                withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)groupValue;

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead, this$0_, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *)

__attribute__((unused)) static void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue);

__attribute__((unused)) static OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue) NS_RETURNS_RETAINED;

@implementation OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
                         withInt:(jint)numberOfSorts {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, numberOfSorts);
  return self;
}

+ (OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *)createWithNSString:(NSString *)groupField
                                                      withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup {
  return OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_(groupField, sortWithinGroup);
}

+ (OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *)createWithNSString:(NSString *)groupField
                                                      withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup
                                                                            withInt:(jint)initialSize {
  return OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, initialSize);
}

+ (jboolean)needGeneralImplWithOrgApacheLuceneSearchSortField:(OrgApacheLuceneSearchSortField *)sortField {
  return OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_needGeneralImplWithOrgApacheLuceneSearchSortField_(sortField);
}

- (jboolean)needsScores {
  return YES;
}

- (void)dealloc {
  RELEASE_(groupField_);
  RELEASE_(groupIndex_);
  RELEASE_(readerContext_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withInt:", "TermAllGroupHeadsCollector", NULL, 0x4, NULL, NULL },
    { "createWithNSString:withOrgApacheLuceneSearchSort:", "create", "Lorg.apache.lucene.search.grouping.AbstractAllGroupHeadsCollector;", 0x9, NULL, NULL },
    { "createWithNSString:withOrgApacheLuceneSearchSort:withInt:", "create", "Lorg.apache.lucene.search.grouping.AbstractAllGroupHeadsCollector;", 0x9, NULL, NULL },
    { "needGeneralImplWithOrgApacheLuceneSearchSortField:", "needGeneralImpl", "Z", 0xa, NULL, NULL },
    { "needsScores", NULL, "Z", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "DEFAULT_INITIAL_SIZE", "DEFAULT_INITIAL_SIZE", 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_DEFAULT_INITIAL_SIZE },
    { "groupField_", NULL, 0x10, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "groupIndex_", NULL, 0x0, "Lorg.apache.lucene.index.SortedDocValues;", NULL, NULL, .constantValue.asLong = 0 },
    { "readerContext_", NULL, 0x0, "Lorg.apache.lucene.index.LeafReaderContext;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TGH;"};
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector;", "Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector;", "Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector;", "Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector = { 2, "TermAllGroupHeadsCollector", "org.apache.lucene.search.grouping.term", NULL, 0x401, 5, methods, 4, fields, 1, superclass_type_args, 4, inner_classes, NULL, "<GH:Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead<*>;>Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector<TGH;>;" };
  return &_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_initWithNSString_withInt_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector *self, NSString *groupField, jint numberOfSorts) {
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_initWithInt_(self, numberOfSorts);
  JreStrongAssign(&self->groupField_, groupField);
}

OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_initialize();
  return OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_DEFAULT_INITIAL_SIZE);
}

OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_createWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_initialize();
  jboolean sortAllScore = YES;
  jboolean sortAllFieldValue = YES;
  {
    IOSObjectArray *a__ = [((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort];
    OrgApacheLuceneSearchSortField * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    OrgApacheLuceneSearchSortField * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      OrgApacheLuceneSearchSortField *sortField = *b__++;
      if ([((OrgApacheLuceneSearchSortField *) nil_chk(sortField)) getType] == JreLoadStatic(OrgApacheLuceneSearchSortField_TypeEnum, SCORE)) {
        sortAllFieldValue = NO;
      }
      else if (OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_needGeneralImplWithOrgApacheLuceneSearchSortField_(sortField)) {
        return [new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(groupField, sortWithinGroup) autorelease];
      }
      else {
        sortAllScore = NO;
      }
    }
  }
  if (sortAllScore) {
    return [new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, initialSize) autorelease];
  }
  else if (sortAllFieldValue) {
    return [new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, initialSize) autorelease];
  }
  else {
    return [new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(groupField, sortWithinGroup, initialSize) autorelease];
  }
}

jboolean OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_needGeneralImplWithOrgApacheLuceneSearchSortField_(OrgApacheLuceneSearchSortField *sortField) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_initialize();
  OrgApacheLuceneSearchSortField_TypeEnum *sortType = [((OrgApacheLuceneSearchSortField *) nil_chk(sortField)) getType];
  return sortType != JreLoadStatic(OrgApacheLuceneSearchSortField_TypeEnum, STRING_VAL) && sortType != JreLoadStatic(OrgApacheLuceneSearchSortField_TypeEnum, STRING) && sortType != JreLoadStatic(OrgApacheLuceneSearchSortField_TypeEnum, SCORE);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(self, groupField, sortWithinGroup);
  return self;
}

- (void)retrieveGroupHeadAndAddIfNotExistWithInt:(jint)doc {
  jint ord = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(groupIndex_)) getOrdWithInt:doc];
  OrgApacheLuceneUtilBytesRef *groupValue;
  if (ord == -1) {
    groupValue = nil;
  }
  else {
    groupValue = [groupIndex_ lookupOrdWithInt:ord];
  }
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *groupHead = [((id<JavaUtilMap>) nil_chk(groups_)) getWithId:groupValue];
  if (groupHead == nil) {
    groupValue = groupValue == nil ? nil : OrgApacheLuceneUtilBytesRef_deepCopyOfWithOrgApacheLuceneUtilBytesRef_(groupValue);
    groupHead = [new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneSearchSort_withInt_(self, groupValue, sortWithinGroup_, doc) autorelease];
    [groups_ putWithId:groupValue withId:groupHead];
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = YES;
  }
  else {
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = NO;
  }
  JreStrongAssign(&((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->groupHead_, groupHead);
}

- (id<JavaUtilCollection>)getCollectedGroupHeads {
  return [((id<JavaUtilMap>) nil_chk(groups_)) values];
}

- (void)doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  JreStrongAssign(&self->readerContext_, context);
  JreStrongAssign(&groupIndex_, OrgApacheLuceneIndexDocValues_getSortedWithOrgApacheLuceneIndexLeafReader_withNSString_([((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context)) reader], groupField_));
  for (OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead * __strong groupHead in nil_chk([((id<JavaUtilMap>) nil_chk(groups_)) values])) {
    for (jint i = 0; i < ((IOSObjectArray *) nil_chk(((OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *) nil_chk(groupHead))->comparators_))->size_; i++) {
      IOSObjectArray_Set(nil_chk(groupHead->leafComparators_), i, [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(groupHead->comparators_, i))) getLeafComparatorWithOrgApacheLuceneIndexLeafReaderContext:context]);
    }
  }
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
  JreStrongAssign(&self->scorer_, scorer);
  for (OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead * __strong groupHead in nil_chk([((id<JavaUtilMap>) nil_chk(groups_)) values])) {
    {
      IOSObjectArray *a__ = ((OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *) nil_chk(groupHead))->leafComparators_;
      id<OrgApacheLuceneSearchLeafFieldComparator> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
      id<OrgApacheLuceneSearchLeafFieldComparator> const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        id<OrgApacheLuceneSearchLeafFieldComparator> comparator = *b__++;
        [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(comparator)) setScorerWithOrgApacheLuceneSearchScorer:scorer];
      }
    }
  }
}

- (void)dealloc {
  RELEASE_(sortWithinGroup_);
  RELEASE_(groups_);
  RELEASE_(scorer_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withOrgApacheLuceneSearchSort:", "GeneralAllGroupHeadsCollector", NULL, 0x0, NULL, NULL },
    { "retrieveGroupHeadAndAddIfNotExistWithInt:", "retrieveGroupHeadAndAddIfNotExist", "V", 0x4, "Ljava.io.IOException;", NULL },
    { "getCollectedGroupHeads", NULL, "Ljava.util.Collection;", 0x4, NULL, NULL },
    { "doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:", "doSetNextReader", "V", 0x4, "Ljava.io.IOException;", NULL },
    { "setScorerWithOrgApacheLuceneSearchScorer:", "setScorer", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "sortWithinGroup_", NULL, 0x12, "Lorg.apache.lucene.search.Sort;", NULL, NULL, .constantValue.asLong = 0 },
    { "groups_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Lorg/apache/lucene/util/BytesRef;Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector$GroupHead;>;", .constantValue.asLong = 0 },
    { "scorer_", NULL, 0x2, "Lorg.apache.lucene.search.Scorer;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector$GroupHead;"};
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector$GroupHead;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector = { 2, "GeneralAllGroupHeadsCollector", "org.apache.lucene.search.grouping.term", "TermAllGroupHeadsCollector", 0x8, 5, methods, 3, fields, 1, superclass_type_args, 1, inner_classes, NULL, "Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector<Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector$GroupHead;>;" };
  return &_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *self, NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, ((IOSObjectArray *) nil_chk([((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort]))->size_);
  JreStrongAssign(&self->sortWithinGroup_, sortWithinGroup);
  JreStrongAssignAndConsume(&self->groups_, new_JavaUtilHashMap_init());
  IOSObjectArray *sortFields = [sortWithinGroup getSort];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(sortFields))->size_; i++) {
    *IOSIntArray_GetRef(nil_chk(self->reversed_), i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getReverse] ? -1 : 1;
  }
}

OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *self = [OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector alloc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_(self, groupField, sortWithinGroup);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *)outer$
                                                                                  withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)groupValue
                                                                                    withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sort
                                                                                                          withInt:(jint)doc {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneSearchSort_withInt_(self, outer$, groupValue, sort, doc);
  return self;
}

- (jint)compareWithInt:(jint)compIDX
               withInt:(jint)doc {
  return [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(IOSObjectArray_Get(nil_chk(leafComparators_), compIDX))) compareBottomWithInt:doc];
}

- (void)updateDocHeadWithInt:(jint)doc {
  {
    IOSObjectArray *a__ = leafComparators_;
    id<OrgApacheLuceneSearchLeafFieldComparator> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgApacheLuceneSearchLeafFieldComparator> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgApacheLuceneSearchLeafFieldComparator> comparator = *b__++;
      [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(comparator)) copy__WithInt:0 withInt:doc];
      [comparator setBottomWithInt:0];
    }
  }
  self->doc_ = doc + ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(this$0_->readerContext_))->docBase_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(comparators_);
  RELEASE_(leafComparators_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector:withOrgApacheLuceneUtilBytesRef:withOrgApacheLuceneSearchSort:withInt:", "GroupHead", NULL, 0x2, NULL, NULL },
    { "compareWithInt:withInt:", "compare", "I", 0x1, "Ljava.io.IOException;", NULL },
    { "updateDocHeadWithInt:", "updateDocHead", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector;", NULL, NULL, .constantValue.asLong = 0 },
    { "comparators_", NULL, 0x10, "[Lorg.apache.lucene.search.FieldComparator;", NULL, NULL, .constantValue.asLong = 0 },
    { "leafComparators_", NULL, 0x10, "[Lorg.apache.lucene.search.LeafFieldComparator;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.util.BytesRef;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead = { 2, "GroupHead", "org.apache.lucene.search.grouping.term", "TermAllGroupHeadsCollector$GeneralAllGroupHeadsCollector", 0x0, 3, methods, 3, fields, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead<Lorg/apache/lucene/util/BytesRef;>;" };
  return &_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead;
}

@end

void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, OrgApacheLuceneUtilBytesRef *groupValue, OrgApacheLuceneSearchSort *sort, jint doc) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(self, groupValue, doc + ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(outer$->readerContext_))->docBase_);
  IOSObjectArray *sortFields = [((OrgApacheLuceneSearchSort *) nil_chk(sort)) getSort];
  JreStrongAssignAndConsume(&self->comparators_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(sortFields))->size_ type:OrgApacheLuceneSearchFieldComparator_class_()]);
  JreStrongAssignAndConsume(&self->leafComparators_, [IOSObjectArray newArrayWithLength:sortFields->size_ type:OrgApacheLuceneSearchLeafFieldComparator_class_()]);
  for (jint i = 0; i < sortFields->size_; i++) {
    IOSObjectArray_Set(self->comparators_, i, [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getComparatorWithInt:1 withInt:i]);
    IOSObjectArray_Set(self->leafComparators_, i, [((OrgApacheLuceneSearchFieldComparator *) nil_chk(IOSObjectArray_Get(self->comparators_, i))) getLeafComparatorWithOrgApacheLuceneIndexLeafReaderContext:outer$->readerContext_]);
    [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(IOSObjectArray_Get(self->leafComparators_, i))) setScorerWithOrgApacheLuceneSearchScorer:outer$->scorer_];
    [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(IOSObjectArray_Get(self->leafComparators_, i))) copy__WithInt:0 withInt:doc];
    [((id<OrgApacheLuceneSearchLeafFieldComparator>) nil_chk(IOSObjectArray_Get(self->leafComparators_, i))) setBottomWithInt:0];
  }
}

OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector *outer$, OrgApacheLuceneUtilBytesRef *groupValue, OrgApacheLuceneSearchSort *sort, jint doc) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead *self = [OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead alloc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_withOrgApacheLuceneUtilBytesRef_withOrgApacheLuceneSearchSort_withInt_(self, outer$, groupValue, sort, doc);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_GeneralAllGroupHeadsCollector_GroupHead)

@implementation OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup
                         withInt:(jint)initialSize {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupField, sortWithinGroup, initialSize);
  return self;
}

- (id<JavaUtilCollection>)getCollectedGroupHeads {
  return collectedGroups_;
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
  JreStrongAssign(&self->scorer_, scorer);
}

- (void)retrieveGroupHeadAndAddIfNotExistWithInt:(jint)doc {
  jint key = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(groupIndex_)) getOrdWithInt:doc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *groupHead;
  if (![((OrgApacheLuceneUtilSentinelIntSet *) nil_chk(ordSet_)) existsWithInt:key]) {
    [ordSet_ putWithInt:key];
    OrgApacheLuceneUtilBytesRef *term;
    if (key == -1) {
      term = nil;
    }
    else {
      term = OrgApacheLuceneUtilBytesRef_deepCopyOfWithOrgApacheLuceneUtilBytesRef_([groupIndex_ lookupOrdWithInt:key]);
    }
    groupHead = [new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(self, doc, term) autorelease];
    [((id<JavaUtilList>) nil_chk(collectedGroups_)) addWithId:groupHead];
    IOSObjectArray_Set(nil_chk(segmentGroupHeads_), key + 1, groupHead);
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = YES;
  }
  else {
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = NO;
    groupHead = IOSObjectArray_Get(nil_chk(segmentGroupHeads_), key + 1);
  }
  JreStrongAssign(&((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->groupHead_, groupHead);
}

- (void)doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  JreStrongAssign(&self->readerContext_, context);
  JreStrongAssign(&groupIndex_, OrgApacheLuceneIndexDocValues_getSortedWithOrgApacheLuceneIndexLeafReader_withNSString_([((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context)) reader], groupField_));
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(fields_))->size_; i++) {
    if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields_, i))) getType] == JreLoadStatic(OrgApacheLuceneSearchSortField_TypeEnum, SCORE)) {
      continue;
    }
    IOSObjectArray_Set(nil_chk(sortsIndex_), i, OrgApacheLuceneIndexDocValues_getSortedWithOrgApacheLuceneIndexLeafReader_withNSString_([context reader], [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields_, i))) getField]));
  }
  [((OrgApacheLuceneUtilSentinelIntSet *) nil_chk(ordSet_)) clear];
  JreStrongAssignAndConsume(&segmentGroupHeads_, [IOSObjectArray newArrayWithLength:[((OrgApacheLuceneIndexSortedDocValues *) nil_chk(groupIndex_)) getValueCount] + 1 type:OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_class_()]);
  for (OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead * __strong collectedGroup in nil_chk(collectedGroups_)) {
    jint ord;
    if (((OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *) nil_chk(collectedGroup))->groupValue_ == nil) {
      ord = -1;
    }
    else {
      ord = [groupIndex_ lookupTermWithOrgApacheLuceneUtilBytesRef:collectedGroup->groupValue_];
    }
    if (collectedGroup->groupValue_ == nil || ord >= 0) {
      [ordSet_ putWithInt:ord];
      IOSObjectArray_Set(segmentGroupHeads_, ord + 1, collectedGroup);
      for (jint i = 0; i < ((IOSObjectArray *) nil_chk(sortsIndex_))->size_; i++) {
        if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields_, i))) getType] == JreLoadStatic(OrgApacheLuceneSearchSortField_TypeEnum, SCORE)) {
          continue;
        }
        jint sortOrd;
        if (IOSObjectArray_Get(nil_chk(collectedGroup->sortValues_), i) == nil) {
          sortOrd = -1;
        }
        else {
          sortOrd = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(sortsIndex_, i))) lookupTermWithOrgApacheLuceneUtilBytesRef:[((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(IOSObjectArray_Get(collectedGroup->sortValues_, i))) get]];
        }
        *IOSIntArray_GetRef(nil_chk(collectedGroup->sortOrds_), i) = sortOrd;
      }
    }
  }
}

- (void)dealloc {
  RELEASE_(ordSet_);
  RELEASE_(collectedGroups_);
  RELEASE_(fields_);
  RELEASE_(sortsIndex_);
  RELEASE_(scorer_);
  RELEASE_(segmentGroupHeads_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withOrgApacheLuceneSearchSort:withInt:", "OrdScoreAllGroupHeadsCollector", NULL, 0x0, NULL, NULL },
    { "getCollectedGroupHeads", NULL, "Ljava.util.Collection;", 0x4, NULL, NULL },
    { "setScorerWithOrgApacheLuceneSearchScorer:", "setScorer", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "retrieveGroupHeadAndAddIfNotExistWithInt:", "retrieveGroupHeadAndAddIfNotExist", "V", 0x4, "Ljava.io.IOException;", NULL },
    { "doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:", "doSetNextReader", "V", 0x4, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "ordSet_", NULL, 0x12, "Lorg.apache.lucene.util.SentinelIntSet;", NULL, NULL, .constantValue.asLong = 0 },
    { "collectedGroups_", NULL, 0x12, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector$GroupHead;>;", .constantValue.asLong = 0 },
    { "fields_", NULL, 0x12, "[Lorg.apache.lucene.search.SortField;", NULL, NULL, .constantValue.asLong = 0 },
    { "sortsIndex_", NULL, 0x2, "[Lorg.apache.lucene.index.SortedDocValues;", NULL, NULL, .constantValue.asLong = 0 },
    { "scorer_", NULL, 0x2, "Lorg.apache.lucene.search.Scorer;", NULL, NULL, .constantValue.asLong = 0 },
    { "segmentGroupHeads_", NULL, 0x2, "[Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector$GroupHead;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector$GroupHead;"};
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector$GroupHead;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector = { 2, "OrdScoreAllGroupHeadsCollector", "org.apache.lucene.search.grouping.term", "TermAllGroupHeadsCollector", 0x8, 5, methods, 6, fields, 1, superclass_type_args, 1, inner_classes, NULL, "Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector<Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector$GroupHead;>;" };
  return &_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *self, NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, ((IOSObjectArray *) nil_chk([((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort]))->size_);
  JreStrongAssignAndConsume(&self->ordSet_, new_OrgApacheLuceneUtilSentinelIntSet_initWithInt_withInt_(initialSize, -2));
  JreStrongAssignAndConsume(&self->collectedGroups_, new_JavaUtilArrayList_initWithInt_(initialSize));
  IOSObjectArray *sortFields = [sortWithinGroup getSort];
  JreStrongAssignAndConsume(&self->fields_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(sortFields))->size_ type:OrgApacheLuceneSearchSortField_class_()]);
  JreStrongAssignAndConsume(&self->sortsIndex_, [IOSObjectArray newArrayWithLength:sortFields->size_ type:OrgApacheLuceneIndexSortedDocValues_class_()]);
  for (jint i = 0; i < sortFields->size_; i++) {
    *IOSIntArray_GetRef(nil_chk(self->reversed_), i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getReverse] ? -1 : 1;
    IOSObjectArray_Set(self->fields_, i, IOSObjectArray_Get(sortFields, i));
  }
}

OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *self = [OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector alloc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupField, sortWithinGroup, initialSize);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *)outer$
                                                                                                           withInt:(jint)doc
                                                                                   withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)groupValue {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(self, outer$, doc, groupValue);
  return self;
}

- (jint)compareWithInt:(jint)compIDX
               withInt:(jint)doc {
  if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->fields_), compIDX))) getType] == JreLoadStatic(OrgApacheLuceneSearchSortField_TypeEnum, SCORE)) {
    jfloat score = [((OrgApacheLuceneSearchScorer *) nil_chk(this$0_->scorer_)) score];
    if (IOSFloatArray_Get(nil_chk(scores_), compIDX) < score) {
      return 1;
    }
    else if (IOSFloatArray_Get(scores_, compIDX) > score) {
      return -1;
    }
    return 0;
  }
  else {
    if (IOSIntArray_Get(nil_chk(sortOrds_), compIDX) < 0) {
      OrgApacheLuceneUtilBytesRef *term = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->sortsIndex_), compIDX))) getWithInt:doc];
      return [((OrgApacheLuceneUtilBytesRef *) nil_chk([((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(IOSObjectArray_Get(nil_chk(sortValues_), compIDX))) get])) compareToWithId:term];
    }
    else {
      return IOSIntArray_Get(sortOrds_, compIDX) - [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->sortsIndex_), compIDX))) getOrdWithInt:doc];
    }
  }
}

- (void)updateDocHeadWithInt:(jint)doc {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(this$0_->sortsIndex_))->size_; i++) {
    if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->fields_), i))) getType] == JreLoadStatic(OrgApacheLuceneSearchSortField_TypeEnum, SCORE)) {
      *IOSFloatArray_GetRef(nil_chk(scores_), i) = [((OrgApacheLuceneSearchScorer *) nil_chk(this$0_->scorer_)) score];
    }
    else {
      *IOSIntArray_GetRef(nil_chk(sortOrds_), i) = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, i))) getOrdWithInt:doc];
      [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(IOSObjectArray_Get(nil_chk(sortValues_), i))) copyBytesWithOrgApacheLuceneUtilBytesRef:[((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, i))) getWithInt:doc]];
    }
  }
  self->doc_ = doc + ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(this$0_->readerContext_))->docBase_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(sortValues_);
  RELEASE_(sortOrds_);
  RELEASE_(scores_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector:withInt:withOrgApacheLuceneUtilBytesRef:", "GroupHead", NULL, 0x2, NULL, NULL },
    { "compareWithInt:withInt:", "compare", "I", 0x1, "Ljava.io.IOException;", NULL },
    { "updateDocHeadWithInt:", "updateDocHead", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector;", NULL, NULL, .constantValue.asLong = 0 },
    { "sortValues_", NULL, 0x0, "[Lorg.apache.lucene.util.BytesRefBuilder;", NULL, NULL, .constantValue.asLong = 0 },
    { "sortOrds_", NULL, 0x0, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "scores_", NULL, 0x0, "[F", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.util.BytesRef;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead = { 2, "GroupHead", "org.apache.lucene.search.grouping.term", "TermAllGroupHeadsCollector$OrdScoreAllGroupHeadsCollector", 0x0, 3, methods, 4, fields, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead<Lorg/apache/lucene/util/BytesRef;>;" };
  return &_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead;
}

@end

void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(self, groupValue, doc + ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(outer$->readerContext_))->docBase_);
  JreStrongAssignAndConsume(&self->sortValues_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(outer$->sortsIndex_))->size_ type:OrgApacheLuceneUtilBytesRefBuilder_class_()]);
  JreStrongAssignAndConsume(&self->sortOrds_, [IOSIntArray newArrayWithLength:outer$->sortsIndex_->size_]);
  JreStrongAssignAndConsume(&self->scores_, [IOSFloatArray newArrayWithLength:outer$->sortsIndex_->size_]);
  for (jint i = 0; i < outer$->sortsIndex_->size_; i++) {
    if ([((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(nil_chk(outer$->fields_), i))) getType] == JreLoadStatic(OrgApacheLuceneSearchSortField_TypeEnum, SCORE)) {
      *IOSFloatArray_GetRef(self->scores_, i) = [((OrgApacheLuceneSearchScorer *) nil_chk(outer$->scorer_)) score];
    }
    else {
      *IOSIntArray_GetRef(self->sortOrds_, i) = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(outer$->sortsIndex_, i))) getOrdWithInt:doc];
      IOSObjectArray_SetAndConsume(self->sortValues_, i, new_OrgApacheLuceneUtilBytesRefBuilder_init());
      if (IOSIntArray_Get(self->sortOrds_, i) != -1) {
        [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(IOSObjectArray_Get(self->sortValues_, i))) copyBytesWithOrgApacheLuceneUtilBytesRef:[((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(outer$->sortsIndex_, i))) getWithInt:doc]];
      }
    }
  }
}

OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead *self = [OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead alloc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(self, outer$, doc, groupValue);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdScoreAllGroupHeadsCollector_GroupHead)

@implementation OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup
                         withInt:(jint)initialSize {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupField, sortWithinGroup, initialSize);
  return self;
}

- (id<JavaUtilCollection>)getCollectedGroupHeads {
  return collectedGroups_;
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
}

- (void)retrieveGroupHeadAndAddIfNotExistWithInt:(jint)doc {
  jint key = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(groupIndex_)) getOrdWithInt:doc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *groupHead;
  if (![((OrgApacheLuceneUtilSentinelIntSet *) nil_chk(ordSet_)) existsWithInt:key]) {
    [ordSet_ putWithInt:key];
    OrgApacheLuceneUtilBytesRef *term;
    if (key == -1) {
      term = nil;
    }
    else {
      term = OrgApacheLuceneUtilBytesRef_deepCopyOfWithOrgApacheLuceneUtilBytesRef_([groupIndex_ lookupOrdWithInt:key]);
    }
    groupHead = [new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(self, doc, term) autorelease];
    [((id<JavaUtilList>) nil_chk(collectedGroups_)) addWithId:groupHead];
    IOSObjectArray_Set(nil_chk(segmentGroupHeads_), key + 1, groupHead);
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = YES;
  }
  else {
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = NO;
    groupHead = IOSObjectArray_Get(nil_chk(segmentGroupHeads_), key + 1);
  }
  JreStrongAssign(&((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->groupHead_, groupHead);
}

- (void)doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  JreStrongAssign(&self->readerContext_, context);
  JreStrongAssign(&groupIndex_, OrgApacheLuceneIndexDocValues_getSortedWithOrgApacheLuceneIndexLeafReader_withNSString_([((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context)) reader], groupField_));
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(fields_))->size_; i++) {
    IOSObjectArray_Set(nil_chk(sortsIndex_), i, OrgApacheLuceneIndexDocValues_getSortedWithOrgApacheLuceneIndexLeafReader_withNSString_([context reader], [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(fields_, i))) getField]));
  }
  [((OrgApacheLuceneUtilSentinelIntSet *) nil_chk(ordSet_)) clear];
  JreStrongAssignAndConsume(&segmentGroupHeads_, [IOSObjectArray newArrayWithLength:[((OrgApacheLuceneIndexSortedDocValues *) nil_chk(groupIndex_)) getValueCount] + 1 type:OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_class_()]);
  for (OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead * __strong collectedGroup in nil_chk(collectedGroups_)) {
    jint groupOrd;
    if (((OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *) nil_chk(collectedGroup))->groupValue_ == nil) {
      groupOrd = -1;
    }
    else {
      groupOrd = [groupIndex_ lookupTermWithOrgApacheLuceneUtilBytesRef:collectedGroup->groupValue_];
    }
    if (collectedGroup->groupValue_ == nil || groupOrd >= 0) {
      [ordSet_ putWithInt:groupOrd];
      IOSObjectArray_Set(segmentGroupHeads_, groupOrd + 1, collectedGroup);
      for (jint i = 0; i < ((IOSObjectArray *) nil_chk(sortsIndex_))->size_; i++) {
        jint sortOrd;
        if (IOSIntArray_Get(nil_chk(collectedGroup->sortOrds_), i) == -1) {
          sortOrd = -1;
        }
        else {
          sortOrd = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(sortsIndex_, i))) lookupTermWithOrgApacheLuceneUtilBytesRef:[((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(IOSObjectArray_Get(nil_chk(collectedGroup->sortValues_), i))) get]];
        }
        *IOSIntArray_GetRef(collectedGroup->sortOrds_, i) = sortOrd;
      }
    }
  }
}

- (void)dealloc {
  RELEASE_(ordSet_);
  RELEASE_(collectedGroups_);
  RELEASE_(fields_);
  RELEASE_(sortsIndex_);
  RELEASE_(segmentGroupHeads_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withOrgApacheLuceneSearchSort:withInt:", "OrdAllGroupHeadsCollector", NULL, 0x0, NULL, NULL },
    { "getCollectedGroupHeads", NULL, "Ljava.util.Collection;", 0x4, NULL, NULL },
    { "setScorerWithOrgApacheLuceneSearchScorer:", "setScorer", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "retrieveGroupHeadAndAddIfNotExistWithInt:", "retrieveGroupHeadAndAddIfNotExist", "V", 0x4, "Ljava.io.IOException;", NULL },
    { "doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:", "doSetNextReader", "V", 0x4, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "ordSet_", NULL, 0x12, "Lorg.apache.lucene.util.SentinelIntSet;", NULL, NULL, .constantValue.asLong = 0 },
    { "collectedGroups_", NULL, 0x12, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector$GroupHead;>;", .constantValue.asLong = 0 },
    { "fields_", NULL, 0x12, "[Lorg.apache.lucene.search.SortField;", NULL, NULL, .constantValue.asLong = 0 },
    { "sortsIndex_", NULL, 0x2, "[Lorg.apache.lucene.index.SortedDocValues;", NULL, NULL, .constantValue.asLong = 0 },
    { "segmentGroupHeads_", NULL, 0x2, "[Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector$GroupHead;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector$GroupHead;"};
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector$GroupHead;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector = { 2, "OrdAllGroupHeadsCollector", "org.apache.lucene.search.grouping.term", "TermAllGroupHeadsCollector", 0x8, 5, methods, 5, fields, 1, superclass_type_args, 1, inner_classes, NULL, "Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector<Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector$GroupHead;>;" };
  return &_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *self, NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, ((IOSObjectArray *) nil_chk([((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort]))->size_);
  JreStrongAssignAndConsume(&self->ordSet_, new_OrgApacheLuceneUtilSentinelIntSet_initWithInt_withInt_(initialSize, -2));
  JreStrongAssignAndConsume(&self->collectedGroups_, new_JavaUtilArrayList_initWithInt_(initialSize));
  IOSObjectArray *sortFields = [sortWithinGroup getSort];
  JreStrongAssignAndConsume(&self->fields_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(sortFields))->size_ type:OrgApacheLuceneSearchSortField_class_()]);
  JreStrongAssignAndConsume(&self->sortsIndex_, [IOSObjectArray newArrayWithLength:sortFields->size_ type:OrgApacheLuceneIndexSortedDocValues_class_()]);
  for (jint i = 0; i < sortFields->size_; i++) {
    *IOSIntArray_GetRef(nil_chk(self->reversed_), i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getReverse] ? -1 : 1;
    IOSObjectArray_Set(self->fields_, i, IOSObjectArray_Get(sortFields, i));
  }
}

OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *self = [OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector alloc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupField, sortWithinGroup, initialSize);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *)outer$
                                                                                                      withInt:(jint)doc
                                                                              withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)groupValue {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(self, outer$, doc, groupValue);
  return self;
}

- (jint)compareWithInt:(jint)compIDX
               withInt:(jint)doc {
  if (IOSIntArray_Get(nil_chk(sortOrds_), compIDX) < 0) {
    OrgApacheLuceneUtilBytesRef *term = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->sortsIndex_), compIDX))) getWithInt:doc];
    return [((OrgApacheLuceneUtilBytesRef *) nil_chk([((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(IOSObjectArray_Get(nil_chk(sortValues_), compIDX))) get])) compareToWithId:term];
  }
  else {
    return IOSIntArray_Get(sortOrds_, compIDX) - [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(nil_chk(this$0_->sortsIndex_), compIDX))) getOrdWithInt:doc];
  }
}

- (void)updateDocHeadWithInt:(jint)doc {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(this$0_->sortsIndex_))->size_; i++) {
    *IOSIntArray_GetRef(nil_chk(sortOrds_), i) = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, i))) getOrdWithInt:doc];
    [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(IOSObjectArray_Get(nil_chk(sortValues_), i))) copyBytesWithOrgApacheLuceneUtilBytesRef:[((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(this$0_->sortsIndex_, i))) getWithInt:doc]];
  }
  self->doc_ = doc + ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(this$0_->readerContext_))->docBase_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(sortValues_);
  RELEASE_(sortOrds_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector:withInt:withOrgApacheLuceneUtilBytesRef:", "GroupHead", NULL, 0x2, NULL, NULL },
    { "compareWithInt:withInt:", "compare", "I", 0x1, "Ljava.io.IOException;", NULL },
    { "updateDocHeadWithInt:", "updateDocHead", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector;", NULL, NULL, .constantValue.asLong = 0 },
    { "sortValues_", NULL, 0x0, "[Lorg.apache.lucene.util.BytesRefBuilder;", NULL, NULL, .constantValue.asLong = 0 },
    { "sortOrds_", NULL, 0x0, "[I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.util.BytesRef;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead = { 2, "GroupHead", "org.apache.lucene.search.grouping.term", "TermAllGroupHeadsCollector$OrdAllGroupHeadsCollector", 0x0, 3, methods, 3, fields, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead<Lorg/apache/lucene/util/BytesRef;>;" };
  return &_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead;
}

@end

void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(self, groupValue, doc + ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(outer$->readerContext_))->docBase_);
  JreStrongAssignAndConsume(&self->sortValues_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(outer$->sortsIndex_))->size_ type:OrgApacheLuceneUtilBytesRefBuilder_class_()]);
  JreStrongAssignAndConsume(&self->sortOrds_, [IOSIntArray newArrayWithLength:outer$->sortsIndex_->size_]);
  for (jint i = 0; i < outer$->sortsIndex_->size_; i++) {
    *IOSIntArray_GetRef(self->sortOrds_, i) = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(outer$->sortsIndex_, i))) getOrdWithInt:doc];
    IOSObjectArray_SetAndConsume(self->sortValues_, i, new_OrgApacheLuceneUtilBytesRefBuilder_init());
    [((OrgApacheLuceneUtilBytesRefBuilder *) nil_chk(IOSObjectArray_Get(self->sortValues_, i))) copyBytesWithOrgApacheLuceneUtilBytesRef:[((OrgApacheLuceneIndexSortedDocValues *) nil_chk(IOSObjectArray_Get(outer$->sortsIndex_, i))) getWithInt:doc]];
  }
}

OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead *self = [OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead alloc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(self, outer$, doc, groupValue);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_OrdAllGroupHeadsCollector_GroupHead)

@implementation OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector

- (instancetype)initWithNSString:(NSString *)groupField
   withOrgApacheLuceneSearchSort:(OrgApacheLuceneSearchSort *)sortWithinGroup
                         withInt:(jint)initialSize {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupField, sortWithinGroup, initialSize);
  return self;
}

- (id<JavaUtilCollection>)getCollectedGroupHeads {
  return collectedGroups_;
}

- (void)setScorerWithOrgApacheLuceneSearchScorer:(OrgApacheLuceneSearchScorer *)scorer {
  JreStrongAssign(&self->scorer_, scorer);
}

- (void)retrieveGroupHeadAndAddIfNotExistWithInt:(jint)doc {
  jint key = [((OrgApacheLuceneIndexSortedDocValues *) nil_chk(groupIndex_)) getOrdWithInt:doc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *groupHead;
  if (![((OrgApacheLuceneUtilSentinelIntSet *) nil_chk(ordSet_)) existsWithInt:key]) {
    [ordSet_ putWithInt:key];
    OrgApacheLuceneUtilBytesRef *term;
    if (key == -1) {
      term = nil;
    }
    else {
      term = OrgApacheLuceneUtilBytesRef_deepCopyOfWithOrgApacheLuceneUtilBytesRef_([groupIndex_ lookupOrdWithInt:key]);
    }
    groupHead = [new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(self, doc, term) autorelease];
    [((id<JavaUtilList>) nil_chk(collectedGroups_)) addWithId:groupHead];
    IOSObjectArray_Set(nil_chk(segmentGroupHeads_), key + 1, groupHead);
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = YES;
  }
  else {
    ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_ = NO;
    groupHead = IOSObjectArray_Get(nil_chk(segmentGroupHeads_), key + 1);
  }
  JreStrongAssign(&((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->groupHead_, groupHead);
}

- (void)doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  JreStrongAssign(&self->readerContext_, context);
  JreStrongAssign(&groupIndex_, OrgApacheLuceneIndexDocValues_getSortedWithOrgApacheLuceneIndexLeafReader_withNSString_([((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(context)) reader], groupField_));
  [((OrgApacheLuceneUtilSentinelIntSet *) nil_chk(ordSet_)) clear];
  JreStrongAssignAndConsume(&segmentGroupHeads_, [IOSObjectArray newArrayWithLength:[((OrgApacheLuceneIndexSortedDocValues *) nil_chk(groupIndex_)) getValueCount] + 1 type:OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_class_()]);
  for (OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead * __strong collectedGroup in nil_chk(collectedGroups_)) {
    jint ord;
    if (((OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *) nil_chk(collectedGroup))->groupValue_ == nil) {
      ord = -1;
    }
    else {
      ord = [groupIndex_ lookupTermWithOrgApacheLuceneUtilBytesRef:collectedGroup->groupValue_];
    }
    if (collectedGroup->groupValue_ == nil || ord >= 0) {
      [ordSet_ putWithInt:ord];
      IOSObjectArray_Set(segmentGroupHeads_, ord + 1, collectedGroup);
    }
  }
}

- (void)dealloc {
  RELEASE_(ordSet_);
  RELEASE_(collectedGroups_);
  RELEASE_(fields_);
  RELEASE_(scorer_);
  RELEASE_(segmentGroupHeads_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithNSString:withOrgApacheLuceneSearchSort:withInt:", "ScoreAllGroupHeadsCollector", NULL, 0x0, NULL, NULL },
    { "getCollectedGroupHeads", NULL, "Ljava.util.Collection;", 0x4, NULL, NULL },
    { "setScorerWithOrgApacheLuceneSearchScorer:", "setScorer", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "retrieveGroupHeadAndAddIfNotExistWithInt:", "retrieveGroupHeadAndAddIfNotExist", "V", 0x4, "Ljava.io.IOException;", NULL },
    { "doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:", "doSetNextReader", "V", 0x4, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "ordSet_", NULL, 0x12, "Lorg.apache.lucene.util.SentinelIntSet;", NULL, NULL, .constantValue.asLong = 0 },
    { "collectedGroups_", NULL, 0x12, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector$GroupHead;>;", .constantValue.asLong = 0 },
    { "fields_", NULL, 0x12, "[Lorg.apache.lucene.search.SortField;", NULL, NULL, .constantValue.asLong = 0 },
    { "scorer_", NULL, 0x2, "Lorg.apache.lucene.search.Scorer;", NULL, NULL, .constantValue.asLong = 0 },
    { "segmentGroupHeads_", NULL, 0x2, "[Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector$GroupHead;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector$GroupHead;"};
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector$GroupHead;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector = { 2, "ScoreAllGroupHeadsCollector", "org.apache.lucene.search.grouping.term", "TermAllGroupHeadsCollector", 0x8, 5, methods, 5, fields, 1, superclass_type_args, 1, inner_classes, NULL, "Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector<Lorg/apache/lucene/search/grouping/term/TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector$GroupHead;>;" };
  return &_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *self, NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_initWithNSString_withInt_(self, groupField, ((IOSObjectArray *) nil_chk([((OrgApacheLuceneSearchSort *) nil_chk(sortWithinGroup)) getSort]))->size_);
  JreStrongAssignAndConsume(&self->ordSet_, new_OrgApacheLuceneUtilSentinelIntSet_initWithInt_withInt_(initialSize, -2));
  JreStrongAssignAndConsume(&self->collectedGroups_, new_JavaUtilArrayList_initWithInt_(initialSize));
  IOSObjectArray *sortFields = [sortWithinGroup getSort];
  JreStrongAssignAndConsume(&self->fields_, [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(sortFields))->size_ type:OrgApacheLuceneSearchSortField_class_()]);
  for (jint i = 0; i < sortFields->size_; i++) {
    *IOSIntArray_GetRef(nil_chk(self->reversed_), i) = [((OrgApacheLuceneSearchSortField *) nil_chk(IOSObjectArray_Get(sortFields, i))) getReverse] ? -1 : 1;
    IOSObjectArray_Set(self->fields_, i, IOSObjectArray_Get(sortFields, i));
  }
}

OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(NSString *groupField, OrgApacheLuceneSearchSort *sortWithinGroup, jint initialSize) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *self = [OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector alloc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_initWithNSString_withOrgApacheLuceneSearchSort_withInt_(self, groupField, sortWithinGroup, initialSize);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead

- (instancetype)initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *)outer$
                                                                                                        withInt:(jint)doc
                                                                                withOrgApacheLuceneUtilBytesRef:(OrgApacheLuceneUtilBytesRef *)groupValue {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(self, outer$, doc, groupValue);
  return self;
}

- (jint)compareWithInt:(jint)compIDX
               withInt:(jint)doc {
  jfloat score = [((OrgApacheLuceneSearchScorer *) nil_chk(this$0_->scorer_)) score];
  if (IOSFloatArray_Get(nil_chk(scores_), compIDX) < score) {
    return 1;
  }
  else if (IOSFloatArray_Get(scores_, compIDX) > score) {
    return -1;
  }
  return 0;
}

- (void)updateDocHeadWithInt:(jint)doc {
  jfloat score = [((OrgApacheLuceneSearchScorer *) nil_chk(this$0_->scorer_)) score];
  for (jint i = 0; i < ((IOSFloatArray *) nil_chk(scores_))->size_; i++) {
    *IOSFloatArray_GetRef(scores_, i) = score;
  }
  self->doc_ = doc + ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(this$0_->readerContext_))->docBase_;
}

- (void)dealloc {
  RELEASE_(this$0_);
  RELEASE_(scores_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector:withInt:withOrgApacheLuceneUtilBytesRef:", "GroupHead", NULL, 0x2, NULL, NULL },
    { "compareWithInt:withInt:", "compare", "I", 0x1, "Ljava.io.IOException;", NULL },
    { "updateDocHeadWithInt:", "updateDocHead", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.lucene.search.grouping.term.TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector;", NULL, NULL, .constantValue.asLong = 0 },
    { "scores_", NULL, 0x0, "[F", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.util.BytesRef;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead = { 2, "GroupHead", "org.apache.lucene.search.grouping.term", "TermAllGroupHeadsCollector$ScoreAllGroupHeadsCollector", 0x0, 3, methods, 2, fields, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead<Lorg/apache/lucene/util/BytesRef;>;" };
  return &_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead;
}

@end

void OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *self, OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue) {
  JreStrongAssign(&self->this$0_, outer$);
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(self, groupValue, doc + ((OrgApacheLuceneIndexLeafReaderContext *) nil_chk(outer$->readerContext_))->docBase_);
  JreStrongAssignAndConsume(&self->scores_, [IOSFloatArray newArrayWithLength:((IOSObjectArray *) nil_chk(outer$->fields_))->size_]);
  jfloat score = [((OrgApacheLuceneSearchScorer *) nil_chk(outer$->scorer_)) score];
  for (jint i = 0; i < self->scores_->size_; i++) {
    *IOSFloatArray_GetRef(self->scores_, i) = score;
  }
}

OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *new_OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector *outer$, jint doc, OrgApacheLuceneUtilBytesRef *groupValue) {
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead *self = [OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead alloc];
  OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead_initWithOrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_withInt_withOrgApacheLuceneUtilBytesRef_(self, outer$, doc, groupValue);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingTermTermAllGroupHeadsCollector_ScoreAllGroupHeadsCollector_GroupHead)
