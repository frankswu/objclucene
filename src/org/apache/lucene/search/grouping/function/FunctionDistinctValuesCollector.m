//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./grouping/src/java/org/apache/lucene/search/grouping/function/FunctionDistinctValuesCollector.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/LinkedHashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/queries/function/FunctionValues.h"
#include "org/apache/lucene/queries/function/ValueSource.h"
#include "org/apache/lucene/search/grouping/AbstractDistinctValuesCollector.h"
#include "org/apache/lucene/search/grouping/SearchGroup.h"
#include "org/apache/lucene/search/grouping/function/FunctionDistinctValuesCollector.h"
#include "org/apache/lucene/util/mutable/MutableValue.h"

@interface OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector () {
 @public
  id<JavaUtilMap> vsContext_;
  OrgApacheLuceneQueriesFunctionValueSource *groupSource_;
  OrgApacheLuceneQueriesFunctionValueSource *countSource_;
  id<JavaUtilMap> groupMap_;
  OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *groupFiller_;
  OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *countFiller_;
  OrgApacheLuceneUtilMutableMutableValue *groupMval_;
  OrgApacheLuceneUtilMutableMutableValue *countMval_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector, vsContext_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector, groupSource_, OrgApacheLuceneQueriesFunctionValueSource *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector, countSource_, OrgApacheLuceneQueriesFunctionValueSource *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector, groupMap_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector, groupFiller_, OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector, countFiller_, OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector, groupMval_, OrgApacheLuceneUtilMutableMutableValue *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector, countMval_, OrgApacheLuceneUtilMutableMutableValue *)

@implementation OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector

- (instancetype)initWithJavaUtilMap:(id<JavaUtilMap>)vsContext
withOrgApacheLuceneQueriesFunctionValueSource:(OrgApacheLuceneQueriesFunctionValueSource *)groupSource
withOrgApacheLuceneQueriesFunctionValueSource:(OrgApacheLuceneQueriesFunctionValueSource *)countSource
             withJavaUtilCollection:(id<JavaUtilCollection>)groups {
  OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_initWithJavaUtilMap_withOrgApacheLuceneQueriesFunctionValueSource_withOrgApacheLuceneQueriesFunctionValueSource_withJavaUtilCollection_(self, vsContext, groupSource, countSource, groups);
  return self;
}

- (id<JavaUtilList>)getGroups {
  return [new_JavaUtilArrayList_initWithJavaUtilCollection_([((id<JavaUtilMap>) nil_chk(groupMap_)) values]) autorelease];
}

- (void)collectWithInt:(jint)doc {
  [((OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *) nil_chk(groupFiller_)) fillValueWithInt:doc];
  OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount *groupCount = [((id<JavaUtilMap>) nil_chk(groupMap_)) getWithId:groupMval_];
  if (groupCount != nil) {
    [((OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *) nil_chk(countFiller_)) fillValueWithInt:doc];
    [((id<JavaUtilSet>) nil_chk(groupCount->uniqueValues_)) addWithId:[((OrgApacheLuceneUtilMutableMutableValue *) nil_chk(countMval_)) duplicate]];
  }
}

- (void)doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  OrgApacheLuceneQueriesFunctionFunctionValues *values = [((OrgApacheLuceneQueriesFunctionValueSource *) nil_chk(groupSource_)) getValuesWithJavaUtilMap:vsContext_ withOrgApacheLuceneIndexLeafReaderContext:context];
  JreStrongAssign(&groupFiller_, [((OrgApacheLuceneQueriesFunctionFunctionValues *) nil_chk(values)) getValueFiller]);
  JreStrongAssign(&groupMval_, [((OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *) nil_chk(groupFiller_)) getValue]);
  values = [((OrgApacheLuceneQueriesFunctionValueSource *) nil_chk(countSource_)) getValuesWithJavaUtilMap:vsContext_ withOrgApacheLuceneIndexLeafReaderContext:context];
  JreStrongAssign(&countFiller_, [((OrgApacheLuceneQueriesFunctionFunctionValues *) nil_chk(values)) getValueFiller]);
  JreStrongAssign(&countMval_, [((OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *) nil_chk(countFiller_)) getValue]);
}

- (jboolean)needsScores {
  return YES;
}

- (void)dealloc {
  RELEASE_(vsContext_);
  RELEASE_(groupSource_);
  RELEASE_(countSource_);
  RELEASE_(groupMap_);
  RELEASE_(groupFiller_);
  RELEASE_(countFiller_);
  RELEASE_(groupMval_);
  RELEASE_(countMval_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithJavaUtilMap:withOrgApacheLuceneQueriesFunctionValueSource:withOrgApacheLuceneQueriesFunctionValueSource:withJavaUtilCollection:", "FunctionDistinctValuesCollector", NULL, 0x1, NULL, NULL },
    { "getGroups", NULL, "Ljava.util.List;", 0x1, NULL, NULL },
    { "collectWithInt:", "collect", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:", "doSetNextReader", "V", 0x4, "Ljava.io.IOException;", NULL },
    { "needsScores", NULL, "Z", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "vsContext_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<**>;", .constantValue.asLong = 0 },
    { "groupSource_", NULL, 0x12, "Lorg.apache.lucene.queries.function.ValueSource;", NULL, NULL, .constantValue.asLong = 0 },
    { "countSource_", NULL, 0x12, "Lorg.apache.lucene.queries.function.ValueSource;", NULL, NULL, .constantValue.asLong = 0 },
    { "groupMap_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Lorg/apache/lucene/util/mutable/MutableValue;Lorg/apache/lucene/search/grouping/function/FunctionDistinctValuesCollector$GroupCount;>;", .constantValue.asLong = 0 },
    { "groupFiller_", NULL, 0x2, "Lorg.apache.lucene.queries.function.FunctionValues$ValueFiller;", NULL, NULL, .constantValue.asLong = 0 },
    { "countFiller_", NULL, 0x2, "Lorg.apache.lucene.queries.function.FunctionValues$ValueFiller;", NULL, NULL, .constantValue.asLong = 0 },
    { "groupMval_", NULL, 0x2, "Lorg.apache.lucene.util.mutable.MutableValue;", NULL, NULL, .constantValue.asLong = 0 },
    { "countMval_", NULL, 0x2, "Lorg.apache.lucene.util.mutable.MutableValue;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.search.grouping.function.FunctionDistinctValuesCollector$GroupCount;"};
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.grouping.function.FunctionDistinctValuesCollector$GroupCount;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector = { 2, "FunctionDistinctValuesCollector", "org.apache.lucene.search.grouping.function", NULL, 0x1, 5, methods, 8, fields, 1, superclass_type_args, 1, inner_classes, NULL, "Lorg/apache/lucene/search/grouping/AbstractDistinctValuesCollector<Lorg/apache/lucene/search/grouping/function/FunctionDistinctValuesCollector$GroupCount;>;" };
  return &_OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector;
}

@end

void OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_initWithJavaUtilMap_withOrgApacheLuceneQueriesFunctionValueSource_withOrgApacheLuceneQueriesFunctionValueSource_withJavaUtilCollection_(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector *self, id<JavaUtilMap> vsContext, OrgApacheLuceneQueriesFunctionValueSource *groupSource, OrgApacheLuceneQueriesFunctionValueSource *countSource, id<JavaUtilCollection> groups) {
  OrgApacheLuceneSearchGroupingAbstractDistinctValuesCollector_init(self);
  JreStrongAssign(&self->vsContext_, vsContext);
  JreStrongAssign(&self->groupSource_, groupSource);
  JreStrongAssign(&self->countSource_, countSource);
  JreStrongAssignAndConsume(&self->groupMap_, new_JavaUtilLinkedHashMap_init());
  for (OrgApacheLuceneSearchGroupingSearchGroup * __strong group in nil_chk(groups)) {
    [self->groupMap_ putWithId:((OrgApacheLuceneSearchGroupingSearchGroup *) nil_chk(group))->groupValue_ withId:[new_OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount_initWithOrgApacheLuceneUtilMutableMutableValue_(group->groupValue_) autorelease]];
  }
}

OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector *new_OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_initWithJavaUtilMap_withOrgApacheLuceneQueriesFunctionValueSource_withOrgApacheLuceneQueriesFunctionValueSource_withJavaUtilCollection_(id<JavaUtilMap> vsContext, OrgApacheLuceneQueriesFunctionValueSource *groupSource, OrgApacheLuceneQueriesFunctionValueSource *countSource, id<JavaUtilCollection> groups) {
  OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector *self = [OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector alloc];
  OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_initWithJavaUtilMap_withOrgApacheLuceneQueriesFunctionValueSource_withOrgApacheLuceneQueriesFunctionValueSource_withJavaUtilCollection_(self, vsContext, groupSource, countSource, groups);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector)

@implementation OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount

- (instancetype)initWithOrgApacheLuceneUtilMutableMutableValue:(OrgApacheLuceneUtilMutableMutableValue *)groupValue {
  OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount_initWithOrgApacheLuceneUtilMutableMutableValue_(self, groupValue);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneUtilMutableMutableValue:", "GroupCount", NULL, 0x0, NULL, NULL },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.util.mutable.MutableValue;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount = { 2, "GroupCount", "org.apache.lucene.search.grouping.function", "FunctionDistinctValuesCollector", 0x9, 1, methods, 0, NULL, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/search/grouping/AbstractDistinctValuesCollector$GroupCount<Lorg/apache/lucene/util/mutable/MutableValue;>;" };
  return &_OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount;
}

@end

void OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount_initWithOrgApacheLuceneUtilMutableMutableValue_(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount *self, OrgApacheLuceneUtilMutableMutableValue *groupValue) {
  OrgApacheLuceneSearchGroupingAbstractDistinctValuesCollector_GroupCount_initWithId_(self, groupValue);
}

OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount *new_OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount_initWithOrgApacheLuceneUtilMutableMutableValue_(OrgApacheLuceneUtilMutableMutableValue *groupValue) {
  OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount *self = [OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount alloc];
  OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount_initWithOrgApacheLuceneUtilMutableMutableValue_(self, groupValue);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingFunctionFunctionDistinctValuesCollector_GroupCount)
