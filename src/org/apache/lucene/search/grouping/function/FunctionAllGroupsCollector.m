//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./grouping/src/java/org/apache/lucene/search/grouping/function/FunctionAllGroupsCollector.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/util/Collection.h"
#include "java/util/Map.h"
#include "java/util/SortedSet.h"
#include "java/util/TreeSet.h"
#include "org/apache/lucene/index/LeafReaderContext.h"
#include "org/apache/lucene/queries/function/FunctionValues.h"
#include "org/apache/lucene/queries/function/ValueSource.h"
#include "org/apache/lucene/search/grouping/AbstractAllGroupsCollector.h"
#include "org/apache/lucene/search/grouping/function/FunctionAllGroupsCollector.h"
#include "org/apache/lucene/util/mutable/MutableValue.h"

@interface OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector () {
 @public
  id<JavaUtilMap> vsContext_;
  OrgApacheLuceneQueriesFunctionValueSource *groupBy_;
  id<JavaUtilSortedSet> groups_;
  OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *filler_;
  OrgApacheLuceneUtilMutableMutableValue *mval_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector, vsContext_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector, groupBy_, OrgApacheLuceneQueriesFunctionValueSource *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector, groups_, id<JavaUtilSortedSet>)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector, filler_, OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *)
J2OBJC_FIELD_SETTER(OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector, mval_, OrgApacheLuceneUtilMutableMutableValue *)

@implementation OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector

- (instancetype)initWithOrgApacheLuceneQueriesFunctionValueSource:(OrgApacheLuceneQueriesFunctionValueSource *)groupBy
                                                  withJavaUtilMap:(id<JavaUtilMap>)vsContext {
  OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector_initWithOrgApacheLuceneQueriesFunctionValueSource_withJavaUtilMap_(self, groupBy, vsContext);
  return self;
}

- (id<JavaUtilCollection>)getGroups {
  return groups_;
}

- (void)collectWithInt:(jint)doc {
  [((OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *) nil_chk(filler_)) fillValueWithInt:doc];
  if (![((id<JavaUtilSortedSet>) nil_chk(groups_)) containsWithId:mval_]) {
    [groups_ addWithId:[((OrgApacheLuceneUtilMutableMutableValue *) nil_chk(mval_)) duplicate]];
  }
}

- (void)doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:(OrgApacheLuceneIndexLeafReaderContext *)context {
  OrgApacheLuceneQueriesFunctionFunctionValues *values = [((OrgApacheLuceneQueriesFunctionValueSource *) nil_chk(groupBy_)) getValuesWithJavaUtilMap:vsContext_ withOrgApacheLuceneIndexLeafReaderContext:context];
  JreStrongAssign(&filler_, [((OrgApacheLuceneQueriesFunctionFunctionValues *) nil_chk(values)) getValueFiller]);
  JreStrongAssign(&mval_, [((OrgApacheLuceneQueriesFunctionFunctionValues_ValueFiller *) nil_chk(filler_)) getValue]);
}

- (jboolean)needsScores {
  return YES;
}

- (void)dealloc {
  RELEASE_(vsContext_);
  RELEASE_(groupBy_);
  RELEASE_(groups_);
  RELEASE_(filler_);
  RELEASE_(mval_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneQueriesFunctionValueSource:withJavaUtilMap:", "FunctionAllGroupsCollector", NULL, 0x1, NULL, NULL },
    { "getGroups", NULL, "Ljava.util.Collection;", 0x1, NULL, NULL },
    { "collectWithInt:", "collect", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "doSetNextReaderWithOrgApacheLuceneIndexLeafReaderContext:", "doSetNextReader", "V", 0x4, "Ljava.io.IOException;", NULL },
    { "needsScores", NULL, "Z", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "vsContext_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<**>;", .constantValue.asLong = 0 },
    { "groupBy_", NULL, 0x12, "Lorg.apache.lucene.queries.function.ValueSource;", NULL, NULL, .constantValue.asLong = 0 },
    { "groups_", NULL, 0x12, "Ljava.util.SortedSet;", NULL, "Ljava/util/SortedSet<Lorg/apache/lucene/util/mutable/MutableValue;>;", .constantValue.asLong = 0 },
    { "filler_", NULL, 0x2, "Lorg.apache.lucene.queries.function.FunctionValues$ValueFiller;", NULL, NULL, .constantValue.asLong = 0 },
    { "mval_", NULL, 0x2, "Lorg.apache.lucene.util.mutable.MutableValue;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Lorg.apache.lucene.util.mutable.MutableValue;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector = { 2, "FunctionAllGroupsCollector", "org.apache.lucene.search.grouping.function", NULL, 0x1, 5, methods, 5, fields, 1, superclass_type_args, 0, NULL, NULL, "Lorg/apache/lucene/search/grouping/AbstractAllGroupsCollector<Lorg/apache/lucene/util/mutable/MutableValue;>;" };
  return &_OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector;
}

@end

void OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector_initWithOrgApacheLuceneQueriesFunctionValueSource_withJavaUtilMap_(OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector *self, OrgApacheLuceneQueriesFunctionValueSource *groupBy, id<JavaUtilMap> vsContext) {
  OrgApacheLuceneSearchGroupingAbstractAllGroupsCollector_init(self);
  JreStrongAssignAndConsume(&self->groups_, new_JavaUtilTreeSet_init());
  JreStrongAssign(&self->vsContext_, vsContext);
  JreStrongAssign(&self->groupBy_, groupBy);
}

OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector *new_OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector_initWithOrgApacheLuceneQueriesFunctionValueSource_withJavaUtilMap_(OrgApacheLuceneQueriesFunctionValueSource *groupBy, id<JavaUtilMap> vsContext) {
  OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector *self = [OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector alloc];
  OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector_initWithOrgApacheLuceneQueriesFunctionValueSource_withJavaUtilMap_(self, groupBy, vsContext);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingFunctionFunctionAllGroupsCollector)
