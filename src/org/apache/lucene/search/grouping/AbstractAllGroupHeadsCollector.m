//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ./grouping/src/java/org/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector.java
//

#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/util/Collection.h"
#include "org/apache/lucene/search/SimpleCollector.h"
#include "org/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector.h"
#include "org/apache/lucene/util/FixedBitSet.h"

@implementation OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector

- (instancetype)initWithInt:(jint)numberOfSorts {
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_initWithInt_(self, numberOfSorts);
  return self;
}

- (OrgApacheLuceneUtilFixedBitSet *)retrieveGroupHeadsWithInt:(jint)maxDoc {
  OrgApacheLuceneUtilFixedBitSet *bitSet = [new_OrgApacheLuceneUtilFixedBitSet_initWithInt_(maxDoc) autorelease];
  id<JavaUtilCollection> groupHeads = [self getCollectedGroupHeads];
  for (OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead * __strong groupHead in nil_chk(groupHeads)) {
    [bitSet setWithInt:((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead *) nil_chk(groupHead))->doc_];
  }
  return bitSet;
}

- (IOSIntArray *)retrieveGroupHeads {
  id<JavaUtilCollection> groupHeads = [self getCollectedGroupHeads];
  IOSIntArray *docHeads = [IOSIntArray arrayWithLength:[((id<JavaUtilCollection>) nil_chk(groupHeads)) size]];
  jint i = 0;
  for (OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead * __strong groupHead in groupHeads) {
    *IOSIntArray_GetRef(docHeads, i++) = ((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead *) nil_chk(groupHead))->doc_;
  }
  return docHeads;
}

- (jint)groupHeadsSize {
  return [((id<JavaUtilCollection>) nil_chk([self getCollectedGroupHeads])) size];
}

- (void)retrieveGroupHeadAndAddIfNotExistWithInt:(jint)doc {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (id<JavaUtilCollection>)getCollectedGroupHeads {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)collectWithInt:(jint)doc {
  [self retrieveGroupHeadAndAddIfNotExistWithInt:doc];
  if (((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *) nil_chk(temporalResult_))->stop_) {
    return;
  }
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead *groupHead = temporalResult_->groupHead_;
  for (jint compIDX = 0; ; compIDX++) {
    jint c = IOSIntArray_Get(nil_chk(reversed_), compIDX) * [((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead *) nil_chk(groupHead)) compareWithInt:compIDX withInt:doc];
    if (c < 0) {
      return;
    }
    else if (c > 0) {
      break;
    }
    else if (compIDX == compIDXEnd_) {
      return;
    }
  }
  [((OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead *) nil_chk(groupHead)) updateDocHeadWithInt:doc];
}

- (void)dealloc {
  RELEASE_(reversed_);
  RELEASE_(temporalResult_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "AbstractAllGroupHeadsCollector", NULL, 0x4, NULL, NULL },
    { "retrieveGroupHeadsWithInt:", "retrieveGroupHeads", "Lorg.apache.lucene.util.FixedBitSet;", 0x1, NULL, NULL },
    { "retrieveGroupHeads", NULL, "[I", 0x1, NULL, NULL },
    { "groupHeadsSize", NULL, "I", 0x1, NULL, NULL },
    { "retrieveGroupHeadAndAddIfNotExistWithInt:", "retrieveGroupHeadAndAddIfNotExist", "V", 0x404, "Ljava.io.IOException;", NULL },
    { "getCollectedGroupHeads", NULL, "Ljava.util.Collection;", 0x404, NULL, NULL },
    { "collectWithInt:", "collect", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "reversed_", NULL, 0x14, "[I", NULL, NULL, .constantValue.asLong = 0 },
    { "compIDXEnd_", NULL, 0x14, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "temporalResult_", NULL, 0x14, "Lorg.apache.lucene.search.grouping.AbstractAllGroupHeadsCollector$TemporalResult;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lorg.apache.lucene.search.grouping.AbstractAllGroupHeadsCollector$TemporalResult;", "Lorg.apache.lucene.search.grouping.AbstractAllGroupHeadsCollector$GroupHead;"};
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector = { 2, "AbstractAllGroupHeadsCollector", "org.apache.lucene.search.grouping", NULL, 0x401, 7, methods, 3, fields, 0, NULL, 2, inner_classes, NULL, "<GH:Lorg/apache/lucene/search/grouping/AbstractAllGroupHeadsCollector$GroupHead;>Lorg/apache/lucene/search/SimpleCollector;" };
  return &_OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector;
}

@end

void OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_initWithInt_(OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *self, jint numberOfSorts) {
  OrgApacheLuceneSearchSimpleCollector_init(self);
  JreStrongAssignAndConsume(&self->reversed_, [IOSIntArray newArrayWithLength:numberOfSorts]);
  self->compIDXEnd_ = numberOfSorts - 1;
  JreStrongAssignAndConsume(&self->temporalResult_, new_OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult_initWithOrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_(self));
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector)

@implementation OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult

- (instancetype)initWithOrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector:(OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *)outer$ {
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult_initWithOrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_(self, outer$);
  return self;
}

- (void)dealloc {
  RELEASE_(groupHead_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector:", "init", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "groupHead_", NULL, 0x1, "TGH;", NULL, "TGH;", .constantValue.asLong = 0 },
    { "stop_", NULL, 0x1, "Z", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult = { 2, "TemporalResult", "org.apache.lucene.search.grouping", "AbstractAllGroupHeadsCollector", 0x4, 1, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult;
}

@end

void OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult_initWithOrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_(OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *self, OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *outer$) {
  NSObject_init(self);
}

OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *new_OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult_initWithOrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_(OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector *outer$) {
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult *self = [OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult alloc];
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult_initWithOrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_TemporalResult)

@implementation OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead

- (instancetype)initWithId:(id)groupValue
                   withInt:(jint)doc {
  OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(self, groupValue, doc);
  return self;
}

- (jint)compareWithInt:(jint)compIDX
               withInt:(jint)doc {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)updateDocHeadWithInt:(jint)doc {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)dealloc {
  RELEASE_(groupValue_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithId:withInt:", "GroupHead", NULL, 0x4, NULL, "(TGROUP_VALUE_TYPE;I)V" },
    { "compareWithInt:withInt:", "compare", "I", 0x404, "Ljava.io.IOException;", NULL },
    { "updateDocHeadWithInt:", "updateDocHead", "V", 0x404, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "groupValue_", NULL, 0x11, "TGROUP_VALUE_TYPE;", NULL, "TGROUP_VALUE_TYPE;", .constantValue.asLong = 0 },
    { "doc_", NULL, 0x1, "I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead = { 2, "GroupHead", "org.apache.lucene.search.grouping", "AbstractAllGroupHeadsCollector", 0x409, 3, methods, 2, fields, 0, NULL, 0, NULL, NULL, "<GROUP_VALUE_TYPE:Ljava/lang/Object;>Ljava/lang/Object;" };
  return &_OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead;
}

@end

void OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead_initWithId_withInt_(OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead *self, id groupValue, jint doc) {
  NSObject_init(self);
  JreStrongAssign(&self->groupValue_, groupValue);
  self->doc_ = doc;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheLuceneSearchGroupingAbstractAllGroupHeadsCollector_GroupHead)
